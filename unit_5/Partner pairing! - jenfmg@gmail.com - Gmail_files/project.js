/*!
* Bootstrap.js by @fat & @mdo
* Copyright 2013 Twitter, Inc.
* http://www.apache.org/licenses/LICENSE-2.0.txt
*/
!function(e){"use strict";e(function(){e.support.transition=function(){var e=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},n;for(n in t)if(e.style[n]!==undefined)return t[n]}();return e&&{end:e}}()})}(window.jQuery),!function(e){"use strict";var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.prototype.close=function(t){function n(){s.trigger("closed").remove()}var r=e(this),i=r.attr("data-target"),s;i||(i=r.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),s=e(i),t&&t.preventDefault(),s.length||(s=r.hasClass("alert")?r:r.parent()),s.trigger(t=e.Event("close"));if(t.isDefaultPrevented())return;s.removeClass("in"),e.support.transition&&s.hasClass("fade")?s.on(e.support.transition.end,n):n()};var r=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var r=e(this),i=r.data("alert");i||r.data("alert",i=new n(this)),typeof t=="string"&&i[t].call(r)})},e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=r,this},e(document).on("click.alert.data-api",t,n.prototype.close)}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.button.defaults,n)};t.prototype.setState=function(e){var t="disabled",n=this.$element,r=n.data(),i=n.is("input")?"val":"html";e+="Text",r.resetText||n.data("resetText",n[i]()),n[i](r[e]||this.options[e]),setTimeout(function(){e=="loadingText"?n.addClass(t).attr(t,t):n.removeClass(t).removeAttr(t)},0)},t.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons-radio"]');e&&e.find(".active").removeClass("active"),this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=function(n){return this.each(function(){var r=e(this),i=r.data("button"),s=typeof n=="object"&&n;i||r.data("button",i=new t(this,s)),n=="toggle"?i.toggle():n&&i.setState(n)})},e.fn.button.defaults={loadingText:"loading..."},e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.button.data-api","[data-toggle^=button]",function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle")})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.options.pause=="hover"&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.prototype={cycle:function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(t){var n=this.getActiveIndex(),r=this;if(t>this.$items.length-1||t<0)return;return this.sliding?this.$element.one("slid",function(){r.to(t)}):n==t?this.pause().cycle():this.slide(t>n?"next":"prev",e(this.$items[t]))},pause:function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition.end&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),clearInterval(this.interval),this.interval=null,this},next:function(){if(this.sliding)return;return this.slide("next")},prev:function(){if(this.sliding)return;return this.slide("prev")},slide:function(t,n){var r=this.$element.find(".item.active"),i=n||r[t](),s=this.interval,o=t=="next"?"left":"right",u=t=="next"?"first":"last",a=this,f;this.sliding=!0,s&&this.pause(),i=i.length?i:this.$element.find(".item")[u](),f=e.Event("slide",{relatedTarget:i[0],direction:o});if(i.hasClass("active"))return;this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var t=e(a.$indicators.children()[a.getActiveIndex()]);t&&t.addClass("active")}));if(e.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(f);if(f.isDefaultPrevented())return;i.addClass(t),i[0].offsetWidth,r.addClass(o),i.addClass(o),this.$element.one(e.support.transition.end,function(){i.removeClass([t,o].join(" ")).addClass("active"),r.removeClass(["active",o].join(" ")),a.sliding=!1,setTimeout(function(){a.$element.trigger("slid")},0)})}else{this.$element.trigger(f);if(f.isDefaultPrevented())return;r.removeClass("active"),i.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return s&&this.cycle(),this}};var n=e.fn.carousel;e.fn.carousel=function(n){return this.each(function(){var r=e(this),i=r.data("carousel"),s=e.extend({},e.fn.carousel.defaults,typeof n=="object"&&n),o=typeof n=="string"?n:s.slide;i||r.data("carousel",i=new t(this,s)),typeof n=="number"?i.to(n):o?i[o]():s.interval&&i.pause().cycle()})},e.fn.carousel.defaults={interval:5e3,pause:"hover"},e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=n,this},e(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(t){var n=e(this),r,i=e(n.attr("data-target")||(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,"")),s=e.extend({},i.data(),n.data()),o;i.carousel(s),(o=n.attr("data-slide-to"))&&i.data("carousel").pause().to(o).cycle(),t.preventDefault()})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.collapse.defaults,n),this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.prototype={constructor:t,dimension:function(){var e=this.$element.hasClass("width");return e?"width":"height"},show:function(){var t,n,r,i;if(this.transitioning||this.$element.hasClass("in"))return;t=this.dimension(),n=e.camelCase(["scroll",t].join("-")),r=this.$parent&&this.$parent.find("> .accordion-group > .in");if(r&&r.length){i=r.data("collapse");if(i&&i.transitioning)return;r.collapse("hide"),i||r.data("collapse",null)}this.$element[t](0),this.transition("addClass",e.Event("show"),"shown"),e.support.transition&&this.$element[t](this.$element[0][n])},hide:function(){var t;if(this.transitioning||!this.$element.hasClass("in"))return;t=this.dimension(),this.reset(this.$element[t]()),this.transition("removeClass",e.Event("hide"),"hidden"),this.$element[t](0)},reset:function(e){var t=this.dimension();return this.$element.removeClass("collapse")[t](e||"auto")[0].offsetWidth,this.$element[e!==null?"addClass":"removeClass"]("collapse"),this},transition:function(t,n,r){var i=this,s=function(){n.type=="show"&&i.reset(),i.transitioning=0,i.$element.trigger(r)};this.$element.trigger(n);if(n.isDefaultPrevented())return;this.transitioning=1,this.$element[t]("in"),e.support.transition&&this.$element.hasClass("collapse")?this.$element.one(e.support.transition.end,s):s()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var n=e.fn.collapse;e.fn.collapse=function(n){return this.each(function(){var r=e(this),i=r.data("collapse"),s=e.extend({},e.fn.collapse.defaults,r.data(),typeof n=="object"&&n);i||r.data("collapse",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.collapse.defaults={toggle:!0},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=n,this},e(document).on("click.collapse.data-api","[data-toggle=collapse]",function(t){var n=e(this),r,i=n.attr("data-target")||t.preventDefault()||(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""),s=e(i).data("collapse")?"toggle":n.data();n[e(i).hasClass("in")?"addClass":"removeClass"]("collapsed"),e(i).collapse(s)})}(window.jQuery),!function(e){"use strict";function t(){e(".dropdown-backdrop").remove(),e(r).each(function(){n(e(this)).removeClass("open")})}function n(t){var n=t.attr("data-target"),r;n||(n=t.attr("href"),n=n&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,"")),r=n&&e(n);if(!r||!r.length)r=t.parent();return r}var r="[data-toggle=dropdown]",i=function(t){var n=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};i.prototype={constructor:i,toggle:function(r){var i=e(this),s,o;if(i.is(".disabled, :disabled"))return;return s=n(i),o=s.hasClass("open"),t(),o||("ontouchstart"in document.documentElement&&e('<div class="dropdown-backdrop"/>').insertBefore(e(this)).on("click",t),s.toggleClass("open")),i.focus(),!1},keydown:function(t){var i,s,o,u,a,f;if(!/(38|40|27)/.test(t.keyCode))return;i=e(this),t.preventDefault(),t.stopPropagation();if(i.is(".disabled, :disabled"))return;u=n(i),a=u.hasClass("open");if(!a||a&&t.keyCode==27)return t.which==27&&u.find(r).focus(),i.click();s=e("[role=menu] li:not(.divider):visible a",u);if(!s.length)return;f=s.index(s.filter(":focus")),t.keyCode==38&&f>0&&f--,t.keyCode==40&&f<s.length-1&&f++,~f||(f=0),s.eq(f).focus()}};var s=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var n=e(this),r=n.data("dropdown");r||n.data("dropdown",r=new i(this)),typeof t=="string"&&r[t].call(n)})},e.fn.dropdown.Constructor=i,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=s,this},e(document).on("click.dropdown.data-api",t).on("click.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.dropdown.data-api",r,i.prototype.toggle).on("keydown.dropdown.data-api",r+", [role=menu]",i.prototype.keydown)}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.options=n,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,n=e.Event("show");this.$element.trigger(n);if(this.isShown||n.isDefaultPrevented())return;this.isShown=!0,this.escape(),this.backdrop(function(){var n=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),n&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1),t.enforceFocus(),n?t.$element.one(e.support.transition.end,function(){t.$element.focus().trigger("shown")}):t.$element.focus().trigger("shown")})},hide:function(t){t&&t.preventDefault();var n=this;t=e.Event("hide"),this.$element.trigger(t);if(!this.isShown||t.isDefaultPrevented())return;this.isShown=!1,this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var t=this;e(document).on("focusin.modal",function(e){t.$element[0]!==e.target&&!t.$element.has(e.target).length&&t.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){t.which==27&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,n=setTimeout(function(){t.$element.off(e.support.transition.end),t.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(n),t.hideModal()})},hideModal:function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var n=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&r;this.$backdrop=e('<div class="modal-backdrop '+r+'" />').appendTo(document.body),this.$backdrop.click(this.options.backdrop=="static"?e.proxy(this.$element[0].focus,this.$element[0]):e.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in");if(!t)return;i?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t):t()):t&&t()}};var n=e.fn.modal;e.fn.modal=function(n){return this.each(function(){var r=e(this),i=r.data("modal"),s=e.extend({},e.fn.modal.defaults,r.data(),typeof n=="object"&&n);i||r.data("modal",i=new t(this,s)),typeof n=="string"?i[n]():s.show&&i.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),r=n.attr("href"),i=e(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),s=i.data("modal")?"toggle":e.extend({remote:!/#/.test(r)&&r},i.data(),n.data());t.preventDefault(),i.modal(s).one("hide",function(){n.focus()})})}(window.jQuery),!function(e){"use strict";var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,n,r){var i,s,o,u,a;this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.enabled=!0,o=this.options.trigger.split(" ");for(a=o.length;a--;)u=o[a],u=="click"?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):u!="manual"&&(i=u=="hover"?"mouseenter":"focus",s=u=="hover"?"mouseleave":"blur",this.$element.on(i+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.leave,this)));this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,this.$element.data(),t),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var n=e.fn[this.type].defaults,r={},i;this._options&&e.each(this._options,function(e,t){n[e]!=t&&(r[e]=t)},this),i=e(t.currentTarget)[this.type](r).data(this.type);if(!i.options.delay||!i.options.delay.show)return i.show();clearTimeout(this.timeout),i.hoverState="in",this.timeout=setTimeout(function(){i.hoverState=="in"&&i.show()},i.options.delay.show)},leave:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!n.options.delay||!n.options.delay.hide)return n.hide();n.hoverState="out",this.timeout=setTimeout(function(){n.hoverState=="out"&&n.hide()},n.options.delay.hide)},show:function(){var t,n,r,i,s,o,u=e.Event("show");if(this.hasContent()&&this.enabled){this.$element.trigger(u);if(u.isDefaultPrevented())return;t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),s=typeof this.options.placement=="function"?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,t.detach().css({top:0,left:0,display:"block"}),this.options.container?t.appendTo(this.options.container):t.insertAfter(this.$element),n=this.getPosition(),r=t[0].offsetWidth,i=t[0].offsetHeight;switch(s){case"bottom":o={top:n.top+n.height,left:n.left+n.width/2-r/2};break;case"top":o={top:n.top-i,left:n.left+n.width/2-r/2};break;case"left":o={top:n.top+n.height/2-i/2,left:n.left-r};break;case"right":o={top:n.top+n.height/2-i/2,left:n.left+n.width}}this.applyPlacement(o,s),this.$element.trigger("shown")}},applyPlacement:function(e,t){var n=this.tip(),r=n[0].offsetWidth,i=n[0].offsetHeight,s,o,u,a;n.offset(e).addClass(t).addClass("in"),s=n[0].offsetWidth,o=n[0].offsetHeight,t=="top"&&o!=i&&(e.top=e.top+i-o,a=!0),t=="bottom"||t=="top"?(u=0,e.left<0&&(u=e.left*-2,e.left=0,n.offset(e),s=n[0].offsetWidth,o=n[0].offsetHeight),this.replaceArrow(u-r+s,s,"left")):this.replaceArrow(o-i,o,"top"),a&&n.offset(e)},replaceArrow:function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function t(){var t=setTimeout(function(){r.off(e.support.transition.end).detach()},500);r.one(e.support.transition.end,function(){clearTimeout(t),r.detach()})}var n=this,r=this.tip(),i=e.Event("hide");this.$element.trigger(i);if(i.isDefaultPrevented())return;return r.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?t():r.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var e=this.$element;(e.attr("title")||typeof e.attr("data-original-title")!="string")&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var t=this.$element[0];return e.extend({},typeof t.getBoundingClientRect=="function"?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},getTitle:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||(typeof n.title=="function"?n.title.call(t[0]):n.title),e},tip:function(){return this.$tip=this.$tip||e(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var n=t?e(t.currentTarget)[this.type](this._options).data(this.type):this;n.tip().hasClass("in")?n.hide():n.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var r=e(this),i=r.data("tooltip"),s=typeof n=="object"&&n;i||r.data("tooltip",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(window.jQuery),!function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype,{constructor:t,setContent:function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content")[this.options.html?"html":"text"](n),e.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var e,t=this.$element,n=this.options;return e=(typeof n.content=="function"?n.content.call(t[0]):n.content)||t.attr("data-content"),e},tip:function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var n=e.fn.popover;e.fn.popover=function(n){return this.each(function(){var r=e(this),i=r.data("popover"),s=typeof n=="object"&&n;i||r.data("popover",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.popover.Constructor=t,e.fn.popover.defaults=e.extend({},e.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(window.jQuery),!function(e){"use strict";function t(t,n){var r=e.proxy(this.process,this),i=e(t).is("body")?e(window):e(t),s;this.options=e.extend({},e.fn.scrollspy.defaults,n),this.$scrollElement=i.on("scroll.scroll-spy.data-api",r),this.selector=(this.options.target||(s=e(t).attr("href"))&&s.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=e("body"),this.refresh(),this.process()}t.prototype={constructor:t,refresh:function(){var t=this,n;this.offsets=e([]),this.targets=e([]),n=this.$body.find(this.selector).map(function(){var n=e(this),r=n.data("target")||n.attr("href"),i=/^#\w/.test(r)&&e(r);return i&&i.length&&[[i.position().top+(!e.isWindow(t.$scrollElement.get(0))&&t.$scrollElement.scrollTop()),r]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},process:function(){var e=this.$scrollElement.scrollTop()+this.options.offset,t=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,n=t-this.$scrollElement.height(),r=this.offsets,i=this.targets,s=this.activeTarget,o;if(e>=n)return s!=(o=i.last()[0])&&this.activate(o);for(o=r.length;o--;)s!=i[o]&&e>=r[o]&&(!r[o+1]||e<=r[o+1])&&this.activate(i[o])},activate:function(t){var n,r;this.activeTarget=t,e(this.selector).parent(".active").removeClass("active"),r=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',n=e(r).parent("li").addClass("active"),n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate")}};var n=e.fn.scrollspy;e.fn.scrollspy=function(n){return this.each(function(){var r=e(this),i=r.data("scrollspy"),s=typeof n=="object"&&n;i||r.data("scrollspy",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.defaults={offset:10},e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=n,this},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(window.jQuery),!function(e){"use strict";var t=function(t){this.element=e(t)};t.prototype={constructor:t,show:function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.attr("data-target"),i,s,o;r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));if(t.parent("li").hasClass("active"))return;i=n.find(".active:last a")[0],o=e.Event("show",{relatedTarget:i}),t.trigger(o);if(o.isDefaultPrevented())return;s=e(r),this.activate(t.parent("li"),n),this.activate(s,s.parent(),function(){t.trigger({type:"shown",relatedTarget:i})})},activate:function(t,n,r){function i(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),o?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),r&&r()}var s=n.find("> .active"),o=r&&e.support.transition&&s.hasClass("fade");o?s.one(e.support.transition.end,i):i(),s.removeClass("in")}};var n=e.fn.tab;e.fn.tab=function(n){return this.each(function(){var r=e(this),i=r.data("tab");i||r.data("tab",i=new t(this)),typeof n=="string"&&i[n]()})},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=n,this},e(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=e(this.options.menu),this.shown=!1,this.listen()};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(e)).change(),this.hide()},updater:function(e){return e},show:function(){var t=e.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:t.top+t.height,left:t.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(t){var n;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(n=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source,n?this.process(n):this)},process:function(t){var n=this;return t=e.grep(t,function(e){return n.matcher(e)}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){var t=[],n=[],r=[],i;while(i=e.shift())i.toLowerCase().indexOf(this.query.toLowerCase())?~i.indexOf(this.query)?n.push(i):r.push(i):t.push(i);return t.concat(n,r)},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},render:function(t){var n=this;return t=e(t).map(function(t,r){return t=e(n.options.item).attr("data-value",r),t.find("a").html(n.highlighter(r)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(t){var n=this.$menu.find(".active").removeClass("active"),r=n.next();r.length||(r=e(this.$menu.find("li")[0])),r.addClass("active")},prev:function(e){var t=this.$menu.find(".active").removeClass("active"),n=t.prev();n.length||(n=this.$menu.find("li").last()),n.addClass("active")},listen:function(){this.$element.on("focus",e.proxy(this.focus,this)).on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this)).on("mouseleave","li",e.proxy(this.mouseleave,this))},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t=typeof this.$element[e]=="function"),t},move:function(e){if(!this.shown)return;switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()},keydown:function(t){this.suppressKeyPressRepeat=~e.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},keypress:function(e){if(this.suppressKeyPressRepeat)return;this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},focus:function(e){this.focused=!0},blur:function(e){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(e){e.stopPropagation(),e.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(t){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")},mouseleave:function(e){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var n=e.fn.typeahead;e.fn.typeahead=function(n){return this.each(function(){var r=e(this),i=r.data("typeahead"),s=typeof n=="object"&&n;i||r.data("typeahead",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},e.fn.typeahead.Constructor=t,e.fn.typeahead.noConflict=function(){return e.fn.typeahead=n,this},e(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var n=e(this);if(n.data("typeahead"))return;n.typeahead(n.data())})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.options=e.extend({},e.fn.affix.defaults,n),this.$window=e(window).on("scroll.affix.data-api",e.proxy(this.checkPosition,this)).on("click.affix.data-api",e.proxy(function(){setTimeout(e.proxy(this.checkPosition,this),1)},this)),this.$element=e(t),this.checkPosition()};t.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var t=e(document).height(),n=this.$window.scrollTop(),r=this.$element.offset(),i=this.options.offset,s=i.bottom,o=i.top,u="affix affix-top affix-bottom",a;typeof i!="object"&&(s=o=i),typeof o=="function"&&(o=i.top()),typeof s=="function"&&(s=i.bottom()),a=this.unpin!=null&&n+this.unpin<=r.top?!1:s!=null&&r.top+this.$element.height()>=t-s?"bottom":o!=null&&n<=o?"top":!1;if(this.affixed===a)return;this.affixed=a,this.unpin=a=="bottom"?r.top-n:null,this.$element.removeClass(u).addClass("affix"+(a?"-"+a:""))};var n=e.fn.affix;e.fn.affix=function(n){return this.each(function(){var r=e(this),i=r.data("affix"),s=typeof n=="object"&&n;i||r.data("affix",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.affix.Constructor=t,e.fn.affix.defaults={offset:0},e.fn.affix.noConflict=function(){return e.fn.affix=n,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),n=t.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),t.affix(n)})})}(window.jQuery),function(){var t=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="edit-detail-container"><form'),buf.push(attrs({method:"POST",action:""+create_url+"","class":"new-hubspot-record"},{"class":!0,method:!0,action:!0})),buf.push(">"),function(){if("number"==typeof valid_hidden_properties.length)for(var e=0,t=valid_hidden_properties.length;e<t;e++){var n=valid_hidden_properties[e];n.value&&(buf.push("<input"),buf.push(attrs({type:"hidden",name:n.property,value:n.value},{type:!0,name:!0,value:!0})),buf.push("/>"))}else{var t=0;for(var e in valid_hidden_properties){t++;if(valid_hidden_properties.hasOwnProperty(e)){var n=valid_hidden_properties[e];n.value&&(buf.push("<input"),buf.push(attrs({type:"hidden",name:n.property,value:n.value},{type:!0,name:!0,value:!0})),buf.push("/>"))}}}}.call(this),buf.push('<div class="data-table edit-details editable"><div class="data-row"><div class="data-col">Company</div><div class="data-col">'),companies?(buf.push('<select name="company" class="data-field">'),function(){if("number"==typeof companies.length)for(var e=0,t=companies.length;e<t;e++){var n=companies[e];buf.push("<option"),buf.push(attrs({value:e},{value:!0})),buf.push(">"+escape((interp=n["company_name"])==null?"":interp)+"</option>")}else{var t=0;for(var e in companies){t++;if(companies.hasOwnProperty(e)){var n=companies[e];buf.push("<option"),buf.push(attrs({value:e},{value:!0})),buf.push(">"+escape((interp=n["company_name"])==null?"":interp)+"</option>")}}}}.call(this),buf.push('<option value="NEW">Create "'+escape((interp=company)==null?"":interp)+'"</option></select><i class="icon-chevron-down pull-right"></i>')):type=="Company"?(buf.push("<input"),buf.push(attrs({type:"text",name:"name",placeholder:""+(company?company:"Add Company")+"",prefilled:!!company,"class":"data-field"},{type:!0,name:!0,placeholder:!0,prefilled:!0})),buf.push('/><i class="icon-pencil pull-right"></i>')):(buf.push("<input"),buf.push(attrs({type:"text",name:"company",placeholder:""+(company?company:"Add Company")+"",prefilled:!!company,"class":"data-field"},{type:!0,name:!0,placeholder:!0,prefilled:!0})),buf.push('/><i class="icon-pencil pull-right"></i>')),buf.push("</div></div>"),function(){if("number"==typeof valid_visible_properties.length)for(var e=0,t=valid_visible_properties.length;e<t;e++){var n=valid_visible_properties[e];buf.push('<div class="data-row"><div class="data-col">'+escape((interp=n.label)==null?"":interp)+'</div><div class="data-col"><input'),buf.push(attrs({type:"text",name:""+n.property+"",placeholder:""+(n.value?n.value:"Add "+n.label)+"",prefilled:!!n.value,"class":"data-field"},{type:!0,name:!0,placeholder:!0,prefilled:!0})),buf.push('/><i class="icon-pencil pull-right"></i></div></div>')}else{var t=0;for(var e in valid_visible_properties){t++;if(valid_visible_properties.hasOwnProperty(e)){var n=valid_visible_properties[e];buf.push('<div class="data-row"><div class="data-col">'+escape((interp=n.label)==null?"":interp)+'</div><div class="data-col"><input'),buf.push(attrs({type:"text",name:""+n.property+"",placeholder:""+(n.value?n.value:"Add "+n.label)+"",prefilled:!!n.value,"class":"data-field"},{type:!0,name:!0,placeholder:!0,prefilled:!0})),buf.push('/><i class="icon-pencil pull-right"></i></div></div>')}}}}.call(this),type=="Company"&&(buf.push('<div class="data-row"><div class="data-col">Status</div><div class="data-col"><select name="hs_lead_status" class="data-field">'),statuses&&function(){if("number"==typeof statuses.length)for(var e=0,t=statuses.length;e<t;e++){var n=statuses[e];buf.push("<option"),buf.push(attrs({value:n.value},{value:!0})),buf.push(">"+escape((interp=n.label)==null?"":interp)+"</option>")}else{var t=0;for(var e in statuses){t++;if(statuses.hasOwnProperty(e)){var n=statuses[e];buf.push("<option"),buf.push(attrs({value:n.value},{value:!0})),buf.push(">"+escape((interp=n.label)==null?"":interp)+"</option>")}}}}.call(this),buf.push('</select><i class="icon-chevron-down pull-right"></i></div></div>'
)),type=="Contact"&&(buf.push('<div class="data-row"><div class="data-col">Lifecycle</div><div class="data-col"><select name="lifecyclestage" class="data-field">'),lifecycle_stages&&function(){if("number"==typeof lifecycle_stages.length)for(var e=0,t=lifecycle_stages.length;e<t;e++){var n=lifecycle_stages[e];buf.push("<option"),buf.push(attrs({value:n.value},{value:!0})),buf.push(">"+escape((interp=n.label)==null?"":interp)+"</option>")}else{var t=0;for(var e in lifecycle_stages){t++;if(lifecycle_stages.hasOwnProperty(e)){var n=lifecycle_stages[e];buf.push("<option"),buf.push(attrs({value:n.value},{value:!0})),buf.push(">"+escape((interp=n.label)==null?"":interp)+"</option>")}}}}.call(this),buf.push('</select><i class="icon-chevron-down pull-right"></i></div></div>')),buf.push('</div><a href="#" data-help-url="http://support.getsignals.com/knowledgebase/articles/246456-resolving-salesforce-integration-errors" class="button banner-button input-block-level real-button primary-button multi-state-button save-record"><div class="adding-success">Adding as '+escape((interp=type)==null?"":interp)+'...<div class="icon-signals-loop adding-animation play pull-right"></div></div><div class="searching-status">Searching in HubSpot...<div class="icon-signals-loop adding-animation play pull-right"></div></div><div class="default save">Save '+escape((interp=type)==null?"":interp)+'<span class="normal"> in HubSpot</span><i class="icon-ok pull-right"></i></div><div class="added-error">Error adding '+escape((interp=type)==null?"":interp)+'<i class="icon-info pull-right"></i><div class="subtext">Error</div></div></a><div style="display:none;" class="notice error"><i class="icon-remove-sign">Error adding '+escape((interp=type)==null?"":interp)+' to HubSpot</i><div class="error-detail subtext">Details: <strong>'+escape((interp=hscrm_error_message)==null?"":interp)+'</strong></div></div><a href="#" target="_blank" class="hide button banner-button real-button crm-button existing-button input-block-level view-in-crm">View in CRM<i class="icon-chevron-right pull-right"></i></a><a class="banner banner-button existing no-link"><i class="icon-hubspot pull-right"></i>Existing '+escape((interp=type)==null?"":interp)+' in HubSpot</a><div class="cancel-container"><a href="#" class="muted cancel small-link">Cancel</a></div></form></div>')}return buf.join("")};return typeof define=="function"&&define.amd?define(["jade"],function(){return this.jade.templates||(this.jade.templates={}),this.jade.templates.add_hubspot_record_detail_table=t,t}):(this.jade.templates||(this.jade.templates={}),this.jade.templates.add_hubspot_record_detail_table=t,typeof hubspot=="object"&&hubspot.updateDependencies&&hubspot.updateDependencies("jade.templates.add_hubspot_record_detail_table")),t}.call(this),function(){var t=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<a target="_blank" href="http://support.getsignals.com/knowledgebase/articles/246456-resolving-salesforce-integration-errors" class="banner banner-button lead-error"><i class="icon-info pull-right"></i>Salesforce Lookup Error</a><a href="#" data-help-url="http://support.getsignals.com/knowledgebase/articles/246456-resolving-salesforce-integration-errors" class="button banner-button input-block-level add-as-lead"><div class="adding-success">Adding as Lead...<div class="icon-signals-loop adding-animation play pull-right"></div></div><div class="default">Add to Salesforce<i class="icon-plus-sign pull-right"></i></div><div style="display: none;" class="save">Save Record<span class="normal"> in Salesforce</span><i class="icon-ok pull-right"></i></div><div class="added-success">Lead added to Salesforce<i class="icon-ok-sign pull-right"></i></div><div class="added-error">Error adding lead<i class="icon-info pull-right"></i><div class="subtext">'+escape((interp=error_message)==null?"":interp)+'</div></div></a><a target="_blank" href="#" class="banner banner-button searching">Searching in Salesforce...<div class="icon-signals-loop adding-animation play pull-right"></div></a><a class="banner banner-button existing no-link"><i class="icon-salesforce pull-right"></i>Existing Record in Salesforce</a>')}return buf.join("")};return typeof define=="function"&&define.amd?define(["jade"],function(){return this.jade.templates||(this.jade.templates={}),this.jade.templates.add_lead_cta_container=t,t}):(this.jade.templates||(this.jade.templates={}),this.jade.templates.add_lead_cta_container=t,typeof hubspot=="object"&&hubspot.updateDependencies&&hubspot.updateDependencies("jade.templates.add_lead_cta_container")),t}.call(this),function(){var t=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="edit-detail-container"><form'),buf.push(attrs({method:"POST",action:createLeadUrl,"class":"new-sfdc-lead"},{"class":!0,method:!0,action:!0})),buf.push("><input"),buf.push(attrs({type:"hidden",name:"Website",value:""+domain+""},{type:!0,name:!0,value:!0})),buf.push("/>"),salesforce_id&&(buf.push("<input"),buf.push(attrs({type:"hidden",name:"Id",value:""+salesforce_id+""},{type:!0,name:!0,value:!0})),buf.push("/>")),overview&&(buf.push("<input"),buf.push(attrs({type:"hidden",name:"Description",value:""+overview+""},{type:!0,name:!0,value:!0})),buf.push("/>")),state&&(buf.push("<input"),buf.push(attrs({type:"hidden",name:"State",value:""+state+""},{type:!0,name:!0,value:!0})),buf.push("/>")),city&&(buf.push("<input"),buf.push(attrs({type:"hidden",name:"City",value:""+city+""},{type:!0,name:!0,value:!0})),buf.push("/>")),country&&(buf.push("<input"),buf.push(attrs({type:"hidden",name:"Country",value:""+country+""},{type:!0,name:!0,value:!0})),buf.push("/>")),address1&&(buf.push("<input"),buf.push(attrs({type:"hidden",name:"Street",value:""+address1+""},{type:!0,name:!0,value:!0})),buf.push("/>")),zipcode&&(buf.push("<input"),buf.push(attrs({type:"hidden",name:"PostalCode",value:""+zipcode+""},{type:!0,name:!0,value:!0})),buf.push("/>")),buf.push('<div class="data-table edit-details editable"><div class="data-row"><div class="data-col">Lead Status</div><div class="data-col">'),input_statuses?(buf.push('<select name="Status" class="data-field">'),function(){if("number"==typeof input_statuses.length)for(var e=0,t=input_statuses.length;e<t;e++){var n=input_statuses[e];buf.push("<option"),buf.push(attrs({value:n},{value:!0})),buf.push(">"+escape((interp=n)==null?"":interp)+"</option>")}else{var t=0;for(var e in input_statuses){t++;if(input_statuses.hasOwnProperty(e)){var n=input_statuses[e];buf.push("<option"),buf.push(attrs({value:n},{value:!0})),buf.push(">"+escape((interp=n)==null?"":interp)+"</option>")}}}}.call(this),buf.push('</select><i class="icon-chevron-down pull-right"></i>')):buf.push("<span>Loading Salesforce Statuses</span>"),buf.push('</div></div><div class="data-row"><div class="data-col">First Name</div><div class="data-col"><input'),buf.push(attrs({type:"text",name:"FirstName",placeholder:""+(first_name?first_name:"Add first name")+"",prefilled:!!first_name,"class":"data-field"},{type:!0,name:!0,placeholder:!0,prefilled:!0})),buf.push('/><i class="icon-pencil pull-right"></i></div></div><div class="data-row"><div class="data-col">Last Name</div><div class="data-col"><input'),buf.push(attrs({type:"text",name:"LastName",placeholder:""+(last_name?last_name:"Add last name")+"",prefilled:!!last_name,"class":"data-field"},{type:!0,name:!0,placeholder:!0,prefilled:!0})),buf.push('/><i class="icon-pencil pull-right"></i></div></div><div class="data-row"><div class="data-col">Company</div><div class="data-col"><input'),buf.push(attrs({type:"text",name:"Company",placeholder:""+(company?company:"Add company")+"",prefilled:!!company,"class":"data-field"},{type:!0,name:!0,placeholder:!0,prefilled:!0})),buf.push('/><i class="icon-pencil pull-right"></i></div></div><div class="data-row"><div class="data-col">Website</div><div class="data-col"><input'),buf.push(attrs({type:"text",name:"Website",placeholder:""+domain+"",prefilled:!!domain,"class":"data-field"},{type:!0,name:!0,placeholder:!0,prefilled:!0})),buf.push('/><i class="icon-pencil pull-right"></i></div></div><div class="data-row"><div class="data-col">Title</div><div class="data-col"><input'),buf.push(attrs({type:"text",name:"Title",placeholder:""+(title?title:"Add title")+"",prefilled:!!title,"class":"data-field"},{type:!0,name:!0,placeholder:!0,prefilled:!0})),buf.push('/><i class="icon-pencil pull-right"></i></div></div><div class="data-row"><div class="data-col">Email</div><div class="data-col"><input'),buf.push(attrs({type:"text",name:"Email",placeholder:""+(email?email:"Add email")+"",prefilled:!!email,"class":"data-field"},{type:!0,name:!0,placeholder:!0,prefilled:!0})),buf.push('/><i class="icon-pencil pull-right"></i></div></div><div class="data-row"><div class="data-col">Phone</div><div class="data-col"><input'),buf.push(attrs({type:"text",name:"Phone",placeholder:""+(phone?phone:"Add phone")+"",prefilled:!!phone,"class":"data-field"},{type:!0,name:!0,placeholder:!0,prefilled:!0})),buf.push('/><i class="icon-pencil pull-right"></i></div></div></div><a href="#" data-help-url="http://support.getsignals.com/knowledgebase/articles/246456-resolving-salesforce-integration-errors" class="button banner-button input-block-level real-button primary-button multi-state-button save-record">'),salesforce_id?buf.push('<div class="adding-success">Updating Lead...<div class="icon-signals-loop adding-animation play pull-right"></div></div><div class="searching-status">Searching in Salesforce...<div class="icon-signals-loop adding-animation play pull-right"></div></div><div class="default save">Update Record<span class="normal"> in Salesforce</span><i class="icon-ok pull-right"></i></div><div class="added-error">Error updating lead<i class="icon-info pull-right"></i><div class="subtext">'+escape((interp=salesforce_error_message)==null?"":interp)+"</div></div>"):buf.push('<div class="adding-success">Adding as Lead...<div class="icon-signals-loop adding-animation play pull-right"></div></div><div class="searching-status">Searching in Salesforce...<div class="icon-signals-loop adding-animation play pull-right"></div></div><div class="default save">Save Record<span class="normal"> in Salesforce</span><i class="icon-ok pull-right"></i></div><div class="added-error">Error adding lead<i class="icon-info pull-right"></i><div class="subtext">'+escape((interp=salesforce_error_message)==null?"":interp)+"</div></div>"),buf.push('</a><div style="display:none;" class="notice error"><i class="icon-remove-sign"></i>'),salesforce_id?buf.push("Error updating record in Salesforce"):buf.push("Error adding record to Salesforce"),buf.push('<div class="error-detail subtext">Details: <strong>"'+escape((interp=salesforce_error_message)==null?"":interp)+'"</strong></div></div><div style="display:none;" class="notice success"><i class="icon-ok-sign"></i>'),salesforce_id?buf.push("Record updated in Salesforce"):buf.push("Record added to Salesforce"),buf.push('<span class="divider">Â·</span><a href="#" target="_blank" class="external-link existing-record-link">View</a></div><a class="banner banner-button existing no-link"><i class="icon-salesforce pull-right"></i>Existing Record in Salesforce</a><div class="cancel-container"><a href="#" class="muted cancel small-link"><Cancel></Cancel></a></div></form></div>')}return buf.join("")};return typeof define=="function"&&define.amd?define(["jade"],function(){return this.jade.templates||(this.jade.templates={}),this.jade.templates.add_lead_detail_table=t,t}):(this.jade.templates||(this.jade.templates={}),this.jade.templates.add_lead_detail_table=t,typeof hubspot=="object"&&hubspot.updateDependencies&&hubspot.updateDependencies("jade.templates.add_lead_detail_table")),t}.call(this),function(){var t=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<a href="#" class="button banner-button input-block-level add-as-lead"><div class="default"><Add>to Salesforce</Add><i class="icon-plus-sign pull-right"></i></div></a>')}return buf.join("")};return typeof define=="function"&&define.amd?define(["jade"],function(){return this.jade.templates||(this.jade.templates={}),this.jade.templates.add_to_salesforce_button=t,t}):(this.jade.templates||(this.jade.templates={}),this.jade.templates.add_to_salesforce_button=t,typeof hubspot=="object"&&hubspot.updateDependencies&&hubspot.updateDependencies("jade.templates.add_to_salesforce_button")),t}.call(this),function(){var t=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<a class="close-sidekick-btn icon-button"><i class="icon-double-angle-right icon-fixed-width"></i></a><a'),buf.push(attrs({href:settings_link,target:"_blank","class":"settings-sidekick-btn icon-button"},{href:!0,target:!0})),buf.push('><i class="icon-gear icon-fixed-width"></i></a><a'),buf.push(attrs({href:settings_link,target:"_blank","class":"icon-button pull-left"},{href:!0,target:!0})),buf.push('><span class="logotype"><div class="brand-mark"></div><span>Sidekick</span></span></a>')}return buf.join("")};return typeof define=="function"&&define.amd?define(["jade"],function(){return this.jade.templates||(this.jade.templates={}),this.jade.templates.app_bar=t,t}):(this.jade.templates||(this.jade.templates={}),this.jade.templates.app_bar=t,typeof hubspot=="object"&&hubspot.updateDependencies&&hubspot.updateDependencies("jade.templates.app_bar")),t}.call(this),function(){var t=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<a href="#" class="back-banner"><i class="icon-chevron-left"></i>Back to '+escape((interp=previous_domain)==null?"":interp)+"</a>")}return buf.join("")};return typeof define=="function"&&define.amd?define(["jade"],function(){return this.jade.templates||(this.jade.templates={}),this.jade.templates.back_container=t,t}):(this.jade.templates||(this.jade.templates={}),this.jade.templates.back_container=t,typeof hubspot=="object"&&hubspot.updateDependencies&&hubspot.updateDependencies("jade.templates.back_container")),t}.call(this),function(){var t=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<a target="_blank" href="#" class="banner banner-button existing"><i class="icon-salesforce pull-right"></i><View>Lead <span class="normal">in Salesforce</span></View></a><a target="_blank" href="#" class="banner banner-button lead-error"><span class="pull-right"><details></details></span><Salesforce>Error</Salesforce></a>')}return buf.join("")};return typeof define=="function"&&define.amd?define(["jade"],function(){return this.jade.templates||(this.jade.templates={}),this.jade.templates.banner_container=t,t}):(this.jade.templates||(this.jade.templates={}),this.jade.templates.banner_container=t,typeof hubspot=="object"&&hubspot.updateDependencies&&hubspot.updateDependencies("jade.templates.banner_container")),t}.call(this),function(){var t=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="signals-overlimit"><div class="overlimit-header">You\'ve hit your monthly Sidekick notification limit</div><div class="overlimit-body"><a href="#" class="blurred-stream-cta button banner-button primary-button real-button input-block-level"> \n'+escape((interp=blurred)==null?"":interp)+"</a></div></div>")}return buf.join("")};return typeof define=="function"&&define.amd?define(["jade"],function(){return this.jade.templates||(this.jade.templates={}),this.jade.templates.blurred_activities_table=t,t}):(this.jade.templates||(this.jade.templates={}),this.jade.templates.blurred_activities_table=t,typeof hubspot=="object"&&hubspot.updateDependencies&&hubspot.updateDependencies("jade.templates.blurred_activities_table")),t}.call(this),function(){var t=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;inbox_connected?contactsDisplayed?hasMutualConnections?(buf.push("<div"),buf.push(attrs({"class":"view-company-connections link-list-header"+(limited?"":" expanded")+""},{"class":!0})),buf.push("><h4><strong>Mutual Connections</strong><i"),buf.push(attrs({"data-toggle":"tooltip","data-placement":"bottom","data-original-title":"Contacts at "+company_name+" that are connected to your colleagues","class":"icon-question-sign tippable"},{"class":!0,"data-toggle":!0,"data-placement":!0,"data-original-title":!0})),buf.push('></i></h4></div><div class="company-connections-list link-list">'),contactsDisplayed.length<1&&buf.push('<p class="no-search-results notice">No contact results found.</p>'),function(){if("number"==typeof contactsDisplayed.length)for(var e=0,t=contactsDisplayed.length;e<t;e++){var n=contactsDisplayed[e];if(e<limit){buf.push("<div"),buf.push(attrs({cid:n.cid,"data-linkedin-url":"http://www.google.com/search?q="+n.name+"+"+company_name+"+"+domain+"","class":"company-contact banner-link two-line"},{cid:!0,"data-linkedin-url":!0})),buf.push('><span class="link-actions pull-right">');if(use_salesforce||use_hscrm)n.isCRMRecord()?(buf.push("<a"),buf.push(attrs({href:n.getHubspotUrl(),target:"_blank","data-toggle":"tooltip","data-placement":"bottom","data-original-title":"View in CRM","class":"view-contact-button button banner-button secondary-button small-icon-button no-highlight hide-on-save tippable"},{href:!0,target:!0,"data-toggle":!0,"data-placement":!0,"data-original-title":!0})),buf.push('><i class="icon-ok"></i></a>')):buf.push('<a href="#" target="_blank" data-toggle="tooltip" data-placement="bottom" data-original-title="Add to CRM" class="add-contact-button button banner-button accented-button small-icon-button no-highlight hide-on-save tippable"><i class="icon-plus"></i></a>'),buf.push('<a href="#" target="_blank" class="cancel-add-contact-link muted cancel-edit on-highlight hide-on-save">Cancel</a>');buf.push('</span><span class="contact-row pull-left">'),n.getAvatarUrl()&&(buf.push('<span class="link-actions pull-left"><img'),buf.push(attrs({src:""+n.getAvatarUrl()+"",onerror:"this.onerror=null;this.src='"+defaultImgUrl+"';","class":"contact-avatar square-avatar"},{src:!0,onerror:!0})),buf.push("/></span>")),buf.push('<span class="link-actions contact-data pull-left"><a href="#" class="contact-link email-action no-highlight"><span class="contact-name">'),n.get("name")?buf.push(""+escape((interp=n.get("name"))==null?"":interp)+""):buf.push(""+escape((interp=n.get("email"))==null?"":interp)+""),buf.push("</span></a><div"),buf.push(attrs({alt:n.get("job_title"),title:n.get("job_title"),"class":"link-subtext contact-title"},{alt:!0,title:!0})),buf.push('><span class="contact-title">'),n.get("job_title")?buf.push(""+escape((interp=n.get("job_title"))==null?"":interp)+" at "+escape((interp=company_name)==null?"":interp)+""):buf.push("Employee at "+escape((interp=company_name)==null?"":interp)+""),buf.push('</span></div></span></span><span class="connector-rows hide">'),function(){if("number"==typeof n.get("connectors").models.length)for(var e=0,t=n.get("connectors").models.length;e<t;e++){var r=n.get("connectors").models[e];r.getAvatarUrl()&&(buf.push('<span class="link-actions pull-left"><img'),buf.push(attrs({src:""+r.getAvatarUrl()+"",onerror:"this.onerror=null;this.src='"+defaultImgUrl+"';","class":"contact-avatar show-connectors"},{src:!0,onerror:!0})),buf.push("/></span>")),buf.push("<span"),buf.push(attrs({cid:r.cid,"class":"link-actions pull-left connector-data"},{cid:!0})),buf.push('><a href="#" class="contact-link email-action no-highlight"><span class="contact-name">'),r.get("connectorName")?buf.push(""+escape((interp=r.get("connectorName"))==null?"":interp)+""):buf.push(""+escape((interp=r.get("connectorEmail"))==null?"":interp)+""),buf.push("</span></a><div"),buf.push(attrs({alt:r.get("connectorTitle"),title:r.get("job_title"),"class":"link-subtext contact-title"},{alt:!0,title:!0})),buf.push('><span class="contact-title">'),r.get("connectorTitle")?buf.push(""+escape((interp=r.get("connectorTitle"))==null?"":interp)+" at "+escape((interp=userDomain)==null?"":interp)+""):buf.push("Coworker at "+escape((interp=userDomain)==null?"":interp)+""),buf.push('</span></div><div class="link-subtext">'),r.get("lastContactDate")&&(r.get("lastContactAction")?r.get("lastContactAction")=="email"?buf.push('<i class="icon-envelope"></i>Exchanged Emails on '+escape((interp=r.get("lastContactDate"))==null?"":interp)+""):r.get("lastContactAction")=="phone"&&buf.push('<i class="icon-phone"></i>Exchanged Calls on '+escape((interp=r.get("lastContactDate"))==null?"":interp)+""):buf.push('<i class="icon-envelope"></i>Contacted on '+escape((interp=r.get("lastContactDate"))==null?"":interp)+"")),buf.push("</div></span>")}else{var t=0;for(var e in n.get("connectors").models){t++;if(n.get("connectors").models.hasOwnProperty(e)){var r=n.get("connectors").models[e];r.getAvatarUrl()&&(buf.push('<span class="link-actions pull-left"><img'),buf.push(attrs({src:""+r.getAvatarUrl()+"",onerror:"this.onerror=null;this.src='"+defaultImgUrl+"';","class":"contact-avatar show-connectors"},{src:!0,onerror:!0})),buf.push("/></span>")),buf.push("<span"),buf.push(attrs({cid:r.cid,"class":"link-actions pull-left connector-data"},{cid:!0})),buf.push('><a href="#" class="contact-link email-action no-highlight"><span class="contact-name">'),r.get("connectorName")?buf.push(""+escape((interp=r.get("connectorName"))==null?"":interp)+""):buf.push(""+escape((interp=r.get("connectorEmail"))==null?"":interp)+""),buf.push("</span></a><div"),buf.push(attrs({alt:r.get("connectorTitle"),title:r.get("job_title"),"class":"link-subtext contact-title"},{alt:!0,title:!0})),buf.push('><span class="contact-title">'),r.get("connectorTitle")?buf.push(""+escape((interp=r.get("connectorTitle"))==null?"":interp)+" at "+escape((interp=userDomain)==null?"":interp)+""):buf.push("Coworker at "+escape((interp=userDomain)==null?"":interp)+""),buf.push('</span></div><div class="link-subtext">'),r.get("lastContactDate")&&(r.get("lastContactAction")?r.get("lastContactAction")=="email"?buf.push('<i class="icon-envelope"></i>Exchanged Emails on '+escape((interp=r.get("lastContactDate"))==null?"":interp)+""):r.get("lastContactAction")=="phone"&&buf.push('<i class="icon-phone"></i>Exchanged Calls on '+escape((interp=r.get("lastContactDate"))==null?"":interp)+""):buf.push('<i class="icon-envelope"></i>Contacted on '+escape((interp=r.get("lastContactDate"))==null?"":interp)+"")),buf.push("</div></span>")}}}}.call(this),buf.push('</span><div class="view-connectors"><a href="#" class="link-actions expand-link view-connectors-link"><span class="expand-text"><i class="icon-caret-down"></i> View '+escape((interp=n.get("connectors_count"))==null?"":interp)+" "),n.get("connectors_count")>1?buf.push("connections"):buf.push("connection"),buf.push('</span><span class="expand-text hide viewing"><i class="icon-caret-up"></i> Collapse</span></a></div></div>')}}else{var t=0;for(var e in contactsDisplayed){t++;if(contactsDisplayed.hasOwnProperty(e)){var n=contactsDisplayed[e];if(e<limit){buf.push("<div"),buf.push(attrs({cid:n.cid,"data-linkedin-url":"http://www.google.com/search?q="+n.name+"+"+company_name+"+"+domain+"","class":"company-contact banner-link two-line"},{cid:!0,"data-linkedin-url":!0})),buf.push('><span class="link-actions pull-right">');if(use_salesforce||use_hscrm)n.isCRMRecord()?(buf.push("<a"),buf.push(attrs({href:n.getHubspotUrl(),target:"_blank","data-toggle":"tooltip","data-placement":"bottom","data-original-title":"View in CRM","class":"view-contact-button button banner-button secondary-button small-icon-button no-highlight hide-on-save tippable"},{href:!0,target:!0,"data-toggle":!0,"data-placement":!0,"data-original-title":!0})),buf.push('><i class="icon-ok"></i></a>')):buf.push('<a href="#" target="_blank" data-toggle="tooltip" data-placement="bottom" data-original-title="Add to CRM" class="add-contact-button button banner-button accented-button small-icon-button no-highlight hide-on-save tippable"><i class="icon-plus"></i></a>'),buf.push('<a href="#" target="_blank" class="cancel-add-contact-link muted cancel-edit on-highlight hide-on-save">Cancel</a>');buf.push('</span><span class="contact-row pull-left">'),n.getAvatarUrl()&&(buf.push('<span class="link-actions pull-left"><img'),buf.push(attrs({src:""+n.getAvatarUrl()+"",onerror:"this.onerror=null;this.src='"+defaultImgUrl+"';","class":"contact-avatar square-avatar"},{src:!0,onerror:!0})),buf.push("/></span>")),buf.push('<span class="link-actions contact-data pull-left"><a href="#" class="contact-link email-action no-highlight"><span class="contact-name">'),n.get("name")?buf.push(""+escape((interp=n.get("name"))==null?"":interp)+""):buf.push(""+escape((interp=n.get("email"))==null?"":interp)+""),buf.push("</span></a><div"),buf.push(attrs({alt:n.get("job_title"),title:n.get("job_title"),"class":"link-subtext contact-title"},{alt:!0,title:!0})),buf.push('><span class="contact-title">'),n.get("job_title")?buf.push(""+escape((interp=n.get("job_title"))==null?"":interp)+" at "+escape((interp=company_name)==null?"":interp)+""):buf.push("Employee at "+escape((interp=company_name)==null?"":interp)+""),buf.push('</span></div></span></span><span class="connector-rows hide">'),function(){if("number"==typeof n.get("connectors").models.length)for(var e=0,t=n.get("connectors").models.length;e<t;e++){var r=n.get("connectors").models[e];r.getAvatarUrl()&&(buf.push('<span class="link-actions pull-left"><img'),buf.push(attrs({src:""+r.getAvatarUrl()+"",onerror:"this.onerror=null;this.src='"+defaultImgUrl+"';","class":"contact-avatar show-connectors"},{src:!0,onerror:!0})),buf.push("/></span>")),buf.push("<span"),buf.push(attrs({cid:r.cid,"class":"link-actions pull-left connector-data"},{cid:!0})),buf.push('><a href="#" class="contact-link email-action no-highlight"><span class="contact-name">'),r.get("connectorName")?buf.push(""+escape((interp=r.get("connectorName"))==null?"":interp)+""):buf.push(""+escape((interp=r.get("connectorEmail"))==null?"":interp)+""),buf.push("</span></a><div"),buf.push(attrs({alt:r.get("connectorTitle"),title:r.get("job_title"),"class":"link-subtext contact-title"},{alt:!0,title:!0})),buf.push('><span class="contact-title">'),r.get("connectorTitle")?buf.push(""+escape((interp=r.get("connectorTitle"))==null?"":interp)+" at "+escape((interp=userDomain)==null?"":interp)+""):buf.push("Coworker at "+escape((interp=userDomain)==null?"":interp)+""),buf.push('</span></div><div class="link-subtext">'),r.get("lastContactDate")&&(r.get("lastContactAction")?r.get("lastContactAction")=="email"?buf.push('<i class="icon-envelope"></i>Exchanged Emails on '+escape((interp=r.get("lastContactDate"))==null?"":interp)+""):r.get("lastContactAction")=="phone"&&buf.push('<i class="icon-phone"></i>Exchanged Calls on '+escape((interp=r.get("lastContactDate"))==null?"":interp)+""):buf.push('<i class="icon-envelope"></i>Contacted on '+escape((interp=r.get("lastContactDate"))==null?"":interp)+"")),buf.push("</div></span>")}else{var t=0;for(var e in n.get("connectors").models){t++;if(n.get("connectors").models.hasOwnProperty(e)){var r=n.get("connectors").models[e];r.getAvatarUrl()&&(buf.push('<span class="link-actions pull-left"><img'),buf.push(attrs({src:""+r.getAvatarUrl()+"",onerror:"this.onerror=null;this.src='"+defaultImgUrl+"';","class":"contact-avatar show-connectors"},{src:!0,onerror:!0})),buf.push("/></span>")),buf.push("<span"),buf.push(attrs({cid:r.cid,"class":"link-actions pull-left connector-data"},{cid:!0})),buf.push('><a href="#" class="contact-link email-action no-highlight"><span class="contact-name">'),r.get("connectorName")?buf.push(""+escape((interp=r.get("connectorName"))==null?"":interp)+""):buf.push(""+escape((interp=r.get("connectorEmail"))==null?"":interp)+""),buf.push("</span></a><div"),buf.push(attrs({alt:r.get("connectorTitle"),title:r.get("job_title"),"class":"link-subtext contact-title"},{alt:!0,title:!0})),buf.push('><span class="contact-title">'),r.get("connectorTitle")?buf.push(""+escape((interp=r.get("connectorTitle"))==null?"":interp)+" at "+escape((interp=userDomain)==null?"":interp)+""):buf.push("Coworker at "+escape((interp=userDomain)==null?"":interp)+""),buf.push('</span></div><div class="link-subtext">'),r.get("lastContactDate")&&(r.get("lastContactAction")?r.get("lastContactAction")=="email"?buf.push('<i class="icon-envelope"></i>Exchanged Emails on '+escape((interp=r.get("lastContactDate"))==null?"":interp)+""):r.get("lastContactAction")=="phone"&&buf.push('<i class="icon-phone"></i>Exchanged Calls on '+escape((interp=r.get("lastContactDate"))==null?"":interp)+""):buf.push('<i class="icon-envelope"></i>Contacted on '+escape((interp=r.get("lastContactDate"))==null?"":interp)+"")),buf.push("</div></span>")}}}}.call(this),buf.push('</span><div class="view-connectors"><a href="#" class="link-actions expand-link view-connectors-link"><span class="expand-text"><i class="icon-caret-down"></i> View '+escape((interp=n.get("connectors_count"))==null?"":interp)+" "),n.get("connectors_count")>1?buf.push("connections"):buf.push("connection"),buf.push('</span><span class="expand-text hide viewing"><i class="icon-caret-up"></i> Collapse</span></a></div></div>')}}}}}.call(this),buf.push('<a href="#" class="link-actions expand-link show-more-link">'),limited&&contactsDisplayed.length>limit?buf.push('<span class="expand-text collapsed"></span>Show all '+escape((interp=contactsDisplayed.length)==null?"":interp)+'<i class="icon-caret-down"></i>'):limited||buf.push('<span class="expand-text expanded"></span>Show less<i class="icon-caret-up"></i>'),buf.push("</a></div>")):(buf.push('<div class="view-company-connections link-list-header"><h4 class="muted">No Mutual Connections<i'),buf.push(attrs({"data-toggle":"tooltip","data-placement":"bottom","data-original-title":"No connections found at "+company_name+". Invite more colleagues to discover connections.","class":"icon-question-sign tippable"},{"class":!0,"data-toggle":!0,"data-placement":!0,"data-original-title":!0})),buf.push("></i></h4></div>")):(buf.push('<div class="view-company-connections link-list-header"><h4 class="muted">Connections<i'),buf.push(attrs({"data-toggle":"tooltip","data-placement":"bottom","data-original-title":"Contacts at "+company_name+" that are connected to your colleagues","class":"icon-question-sign tippable"},{"class":!0,"data-toggle":!0,"data-placement":!0,"data-original-title":!0})),buf.push('></i><span class="muted pull-right">Searching...</span></h4></div>')):(buf.push('<div class="view-company-connections link-list-header"><h4><strong>Email Connections</strong><i'),buf.push(attrs({"data-toggle":"tooltip","data-placement":"bottom","data-original-title":"Contacts at "+company_name+" that are connected to your colleagues","class":"icon-question-sign tippable"},{"class":!0,"data-toggle":!0,"data-placement":!0,"data-original-title":!0})),buf.push('></i><span class="muted pull-right">Off</span></h4></div><div class="company-connections-list link-list"><div class="notice muted">Find connections<span class="divider">&bull;</span><a href="https://api.getsidekick.com/facsimile/v1/oauth/start" target="_blank" class="external-link connect-inbox-link"><strong>Link your Inbox</strong></a></div></div>'))}return buf.join("")};return typeof define=="function"&&define.amd?define(["jade"],function(){return this.jade.templates||(this.jade.templates={}),this.jade.templates.company_connections_table=t,t}):(this.jade.templates||(this.jade.templates={}),this.jade.templates.company_connections_table=t,typeof hubspot=="object"&&hubspot.updateDependencies&&hubspot.updateDependencies("jade.templates.company_connections_table")),t}.call(this),function(){var t=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||
jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;departments?hasEmployees?(buf.push("<div"),buf.push(attrs({"class":"view-company-contacts link-list-header"+(limited?"":" expanded")+""+(has_avatars?" has-avatars":"")+""},{"class":!0})),buf.push("><h4><strong>Company Contacts</strong><i"),buf.push(attrs({"data-toggle":"tooltip","data-placement":"bottom","data-original-title":"Contacts that are likely employed at "+company_name+"","class":"icon-question-sign tippable"},{"class":!0,"data-toggle":!0,"data-placement":!0,"data-original-title":!0})),buf.push('></i><span class="link-actions pull-right department-filter">'),hasDepartments&&(buf.push('<select name="filter-role" dir="rtl" class="filter-type">'),selectedDepartmentType==""?buf.push('<option value="" selected="selected">Filter</option>'):(buf.push("<option"),buf.push(attrs({value:"",selected:"false"},{value:!0,selected:!0})),buf.push(">Collapse</option>")),function(){if("number"==typeof departments.length)for(var e=0,t=departments.length;e<t;e++){var n=departments[e];buf.push("<option"),buf.push(attrs({value:n.type,selected:selectedDepartmentType==n.type},{value:!0,selected:!0})),buf.push(">"+escape((interp=n.label)==null?"":interp)+"</option>")}else{var t=0;for(var e in departments){t++;if(departments.hasOwnProperty(e)){var n=departments[e];buf.push("<option"),buf.push(attrs({value:n.type,selected:selectedDepartmentType==n.type},{value:!0,selected:!0})),buf.push(">"+escape((interp=n.label)==null?"":interp)+"</option>")}}}}.call(this),buf.push('</select><i class="icon-sort-down"></i>')),buf.push('</span></h4></div><div class="company-contacts-list link-list">'),contactsDisplayed.length<1&&buf.push('<p class="no-search-results notice">No contact results found.</p>'),function(){if("number"==typeof contactsDisplayed.length)for(var e=0,t=contactsDisplayed.length;e<t;e++){var n=contactsDisplayed[e];if(e<limit){buf.push("<div"),buf.push(attrs({cid:n.cid,"data-linkedin-url":"http://www.google.com/search?q="+n.name+"+"+company_name+"+"+domain+"","class":"company-contact banner-link two-line"},{cid:!0,"data-linkedin-url":!0})),buf.push('><span class="link-actions pull-right">');if(use_salesforce||use_hscrm)n.isCRMRecord()?(buf.push("<a"),buf.push(attrs({href:n.getHubspotUrl(),target:"_blank","data-toggle":"tooltip","data-placement":"bottom","data-original-title":"View in CRM","class":"view-contact-button button banner-button secondary-button small-icon-button no-highlight hide-on-save tippable"},{href:!0,target:!0,"data-toggle":!0,"data-placement":!0,"data-original-title":!0})),buf.push('><i class="icon-ok"></i></a>')):buf.push('<a href="#" target="_blank" data-toggle="tooltip" data-placement="bottom" data-original-title="Add to CRM" class="add-contact-button button banner-button accented-button small-icon-button no-highlight hide-on-save tippable"><i class="icon-plus"></i></a>'),buf.push('<a href="#" target="_blank" class="cancel-add-contact-link muted cancel-edit on-highlight hide-on-save">Cancel</a>');buf.push("</span>"),n.get("name")?(buf.push("<a"),buf.push(attrs({href:"http://www.google.com/search?q="+n.get("name")+"+"+company_name+"+"+domain+"",target:"_blank",title:""+n.get("name")+"",alt:""+n.get("name")+"","class":"external-link contact-link view-linkedin-action"},{href:!0,target:!0,title:!0,alt:!0})),buf.push('><div class="contact-data"><span class="contact-name">'+escape((interp=n.get("name"))==null?"":interp)+"</span></div></a>")):buf.push('<div class="contact-data"><span class="contact-name">[No name]</span></div>'),buf.push('<div class="link-subtext guess-email-link">');if(hasEmailGuessing)if(n.get("email")){buf.push("<a"),buf.push(attrs({href:"mailto:"+n.get("email")+"","class":"contact-link email-link"},{href:!0})),buf.push("><span>");var r=n.get("email");buf.push(null==r?"":r),buf.push("</span></a>"),n.get("emailStatus")=="VERIFIED"&&buf.push('<span class="inline-small-icon-container"><i data-toggle="tooltip" data-placement="bottom" data-original-title="Verified Email" class="icon-envelope tippable"></i></span>')}else if(n.get("emailStatus")&&n.get("emailStatus")!="MOSTLIKELY")if(n.get("emailStatus")=="ERROR")buf.push('<span class="error">No email found</span>');else if(n.get("emailStatus")=="GUESSING")buf.push("<span>Finding...</span>");else if(n.get("emailStatus")=="UPGRADE")buf.push('<a href="http://www.getsidekick.com/pql-lp?pql-source=email-guessing" target="_blank">Learn more.</a>');else if(n.get("emailStatus")=="VERIFIED"){buf.push("<a"),buf.push(attrs({href:"mailto:"+n.get("email")+"","class":"contact-link email-link"},{href:!0})),buf.push("><span>");var r=n.get("email");buf.push(null==r?"":r),buf.push('</span></a><span class="inline-small-icon-container"><i data-toggle="tooltip" data-placement="bottom" data-original-title="Verified Email" class="icon-envelope tippable"></i></span>')}else{buf.push("<a"),buf.push(attrs({href:"mailto:"+n.get("email")+"","class":"contact-link email-link"},{href:!0})),buf.push("><span></span>");var r=n.get("email");buf.push(null==r?"":r),buf.push("</a>")}else buf.push('<a href="#" class="contact-link email-action">Guess email</a>');buf.push("<div"),buf.push(attrs({alt:n.get("title"),title:n.get("title"),"class":"link-subtext contact-title"},{alt:!0,title:!0})),buf.push(">"),n.get("title")&&buf.push(""+escape((interp=n.get("title"))==null?"":interp)+""),buf.push("</div></div></div>")}}else{var t=0;for(var e in contactsDisplayed){t++;if(contactsDisplayed.hasOwnProperty(e)){var n=contactsDisplayed[e];if(e<limit){buf.push("<div"),buf.push(attrs({cid:n.cid,"data-linkedin-url":"http://www.google.com/search?q="+n.name+"+"+company_name+"+"+domain+"","class":"company-contact banner-link two-line"},{cid:!0,"data-linkedin-url":!0})),buf.push('><span class="link-actions pull-right">');if(use_salesforce||use_hscrm)n.isCRMRecord()?(buf.push("<a"),buf.push(attrs({href:n.getHubspotUrl(),target:"_blank","data-toggle":"tooltip","data-placement":"bottom","data-original-title":"View in CRM","class":"view-contact-button button banner-button secondary-button small-icon-button no-highlight hide-on-save tippable"},{href:!0,target:!0,"data-toggle":!0,"data-placement":!0,"data-original-title":!0})),buf.push('><i class="icon-ok"></i></a>')):buf.push('<a href="#" target="_blank" data-toggle="tooltip" data-placement="bottom" data-original-title="Add to CRM" class="add-contact-button button banner-button accented-button small-icon-button no-highlight hide-on-save tippable"><i class="icon-plus"></i></a>'),buf.push('<a href="#" target="_blank" class="cancel-add-contact-link muted cancel-edit on-highlight hide-on-save">Cancel</a>');buf.push("</span>"),n.get("name")?(buf.push("<a"),buf.push(attrs({href:"http://www.google.com/search?q="+n.get("name")+"+"+company_name+"+"+domain+"",target:"_blank",title:""+n.get("name")+"",alt:""+n.get("name")+"","class":"external-link contact-link view-linkedin-action"},{href:!0,target:!0,title:!0,alt:!0})),buf.push('><div class="contact-data"><span class="contact-name">'+escape((interp=n.get("name"))==null?"":interp)+"</span></div></a>")):buf.push('<div class="contact-data"><span class="contact-name">[No name]</span></div>'),buf.push('<div class="link-subtext guess-email-link">');if(hasEmailGuessing)if(n.get("email")){buf.push("<a"),buf.push(attrs({href:"mailto:"+n.get("email")+"","class":"contact-link email-link"},{href:!0})),buf.push("><span>");var r=n.get("email");buf.push(null==r?"":r),buf.push("</span></a>"),n.get("emailStatus")=="VERIFIED"&&buf.push('<span class="inline-small-icon-container"><i data-toggle="tooltip" data-placement="bottom" data-original-title="Verified Email" class="icon-envelope tippable"></i></span>')}else if(n.get("emailStatus")&&n.get("emailStatus")!="MOSTLIKELY")if(n.get("emailStatus")=="ERROR")buf.push('<span class="error">No email found</span>');else if(n.get("emailStatus")=="GUESSING")buf.push("<span>Finding...</span>");else if(n.get("emailStatus")=="UPGRADE")buf.push('<a href="http://www.getsidekick.com/pql-lp?pql-source=email-guessing" target="_blank">Learn more.</a>');else if(n.get("emailStatus")=="VERIFIED"){buf.push("<a"),buf.push(attrs({href:"mailto:"+n.get("email")+"","class":"contact-link email-link"},{href:!0})),buf.push("><span>");var r=n.get("email");buf.push(null==r?"":r),buf.push('</span></a><span class="inline-small-icon-container"><i data-toggle="tooltip" data-placement="bottom" data-original-title="Verified Email" class="icon-envelope tippable"></i></span>')}else{buf.push("<a"),buf.push(attrs({href:"mailto:"+n.get("email")+"","class":"contact-link email-link"},{href:!0})),buf.push("><span></span>");var r=n.get("email");buf.push(null==r?"":r),buf.push("</a>")}else buf.push('<a href="#" class="contact-link email-action">Guess email</a>');buf.push("<div"),buf.push(attrs({alt:n.get("title"),title:n.get("title"),"class":"link-subtext contact-title"},{alt:!0,title:!0})),buf.push(">"),n.get("title")&&buf.push(""+escape((interp=n.get("title"))==null?"":interp)+""),buf.push("</div></div></div>")}}}}}.call(this),buf.push('<a href="#" class="link-actions expand-link">'),limited&&contactsDisplayed.length>limit?buf.push('<span class="expand-text collapsed"></span>Show all '+escape((interp=contactsDisplayed.length)==null?"":interp)+'<i class="icon-caret-down"></i>'):!limited&&departments[currentDepartmentType].employees.length>initialLimit&&buf.push('<span class="expand-text expanded"></span>Show less<i class="icon-caret-up"></i>'),buf.push("</a></div>")):(buf.push('<div class="view-company-contacts link-list-header"><h4 class="muted">No Company Contacts<i'),buf.push(attrs({"data-toggle":"tooltip","data-placement":"bottom","data-original-title":"No contacts found at "+company_name+"","class":"icon-question-sign tippable"},{"class":!0,"data-toggle":!0,"data-placement":!0,"data-original-title":!0})),buf.push("></i></h4></div>")):buf.push('<div class="view-company-contacts link-list-header"><h4 class="muted">Company Contacts<span class="muted pull-right">Searching...</span></h4></div>')}return buf.join("")};return typeof define=="function"&&define.amd?define(["jade"],function(){return this.jade.templates||(this.jade.templates={}),this.jade.templates.company_contacts_table=t,t}):(this.jade.templates||(this.jade.templates={}),this.jade.templates.company_contacts_table=t,typeof hubspot=="object"&&hubspot.updateDependencies&&hubspot.updateDependencies("jade.templates.company_contacts_table")),t}.call(this),function(){var t=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;departments?hasEmployees?(buf.push('<div class="contacts-header-list link-list-header"><h4><strong>Contacts</strong></h4></div><div class="find-contact-container"><div class="row-fluid span12 search-input-wrapper"><input type="text" placeholder="By Name" class="search-input name-search-term"/><i class="icon-search"></i>'),searching&&buf.push('<a href="#" class="button clear-search-button icon-remove-sign"></a>'),buf.push("</div></div>")):buf.push('<div class="contacts-header-list link-list-header"><h4 class="muted">No Contacts</h4></div>'):buf.push('<div class="contacts-header-list link-list-header"><h4 class="muted">Contacts<span class="muted pull-right">Searching...</span></h4></div>')}return buf.join("")};return typeof define=="function"&&define.amd?define(["jade"],function(){return this.jade.templates||(this.jade.templates={}),this.jade.templates.contacts_header=t,t}):(this.jade.templates||(this.jade.templates={}),this.jade.templates.contacts_header=t,typeof hubspot=="object"&&hubspot.updateDependencies&&hubspot.updateDependencies("jade.templates.contacts_header")),t}.call(this),function(){var t=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="data-col data-col-label">'+escape((interp=property.label)==null?"":interp)+"</div>")}return buf.join("")};return typeof define=="function"&&define.amd?define(["jade"],function(){return this.jade.templates||(this.jade.templates={}),this.jade.templates.data_col_label=t,t}):(this.jade.templates||(this.jade.templates={}),this.jade.templates.data_col_label=t,typeof hubspot=="object"&&hubspot.updateDependencies&&hubspot.updateDependencies("jade.templates.data_col_label")),t}.call(this),function(){var t=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="data-col readable"><a'),buf.push(attrs({href:property.link,target:"_blank","class":"external-link muted-link"},{href:!0,target:!0})),buf.push('><span class="data-col-value">'+escape((interp=property.value)==null?"":interp)+'</span><i class="icon-external-link"></i></a></div><div class="data-col data-col-value data-link writable"><input'),buf.push(attrs({type:"text",name:""+property.property+"",placeholder:""+(property.link?property.link:"Add "+property.link)+"","data-interpreted-value":property.link,prefilled:!!property.rawvalue,"class":"editable-lead-data-field data-field"},{type:!0,name:!0,placeholder:!0,"data-interpreted-value":!0,prefilled:!0})),buf.push('/><i class="icon-pencil pull-right data-row show-more-row"></i></div>')}return buf.join("")};return typeof define=="function"&&define.amd?define(["jade"],function(){return this.jade.templates||(this.jade.templates={}),this.jade.templates.data_col_link=t,t}):(this.jade.templates||(this.jade.templates={}),this.jade.templates.data_col_link=t,typeof hubspot=="object"&&hubspot.updateDependencies&&hubspot.updateDependencies("jade.templates.data_col_link")),t}.call(this),function(){var t=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push("<div"),buf.push(attrs({title:property.value,"class":"data-col data-col-value readable"},{title:!0})),buf.push(">"+escape((interp=property.value)==null?"":interp)+'</div><div class="data-col data-col-value writable">'),property.readonly?buf.push(""+escape((interp=property.value)==null?"":interp)+""):property.options?(buf.push("<select"),buf.push(attrs({name:property.property,placeholder:property.value,"data-interpreted-value":property.interpreted_value,"class":"editable-lead-data-field"},{name:!0,placeholder:!0,"data-interpreted-value":!0})),buf.push('><option value="">---</option>'),function(){if("number"==typeof property.options.length)for(var e=0,t=property.options.length;e<t;e++){var n=property.options[e];buf.push("<option"),buf.push(attrs({value:n.value,selected:n.label==property.value},{value:!0,selected:!0})),buf.push(">"+escape((interp=n.label)==null?"":interp)+"</option>")}else{var t=0;for(var e in property.options){t++;if(property.options.hasOwnProperty(e)){var n=property.options[e];buf.push("<option"),buf.push(attrs({value:n.value,selected:n.label==property.value},{value:!0,selected:!0})),buf.push(">"+escape((interp=n.label)==null?"":interp)+"</option>")}}}}.call(this),buf.push("</select>")):(buf.push("<input"),buf.push(attrs({type:"text",name:""+property.property+"",placeholder:""+(property.value?property.value:"Add "+property.label)+"","data-interpreted-value":property.interpreted_value,prefilled:!!property.value,"class":"editable-lead-data-field data-field"},{type:!0,name:!0,placeholder:!0,"data-interpreted-value":!0,prefilled:!0})),buf.push('/><i class="icon-pencil pull-right data-row show-more-row"></i>')),buf.push("</div>")}return buf.join("")};return typeof define=="function"&&define.amd?define(["jade"],function(){return this.jade.templates||(this.jade.templates={}),this.jade.templates.data_col_value=t,t}):(this.jade.templates||(this.jade.templates={}),this.jade.templates.data_col_value=t,typeof hubspot=="object"&&hubspot.updateDependencies&&hubspot.updateDependencies("jade.templates.data_col_value")),t}.call(this),function(){var t=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="link-list"><div class="overview"></div><div class="editable-lead-details"><p class="correction-subtext bold-subtext hide">Submit a correction and we\'ll review it for accuracy.</p><div class="primary-properties"></div><div class="secondary-properties"></div><div class="data-row show-more-row"><div class="data-col"><a href="#" class="link show-more">More<i class="icon-caret-down"></i></a></div>'),has_dispute_ui&&buf.push('<div class="data-col action-col"><a href="#" class="link improve-data">Improve Data</a></div>'),buf.push('</div><div class="request-updated-info-container"><div class="request-updated-info-button-and-subtext hide"><a href="#" class="button banner-button request-updated-info-button existing-button input-block-level">  \nRequest updated contact info</a><p class="request-updated-info-button-subtext muted">We will send an email on your behalf to request the most up-to-date contact info</p></div><p class="request-updated-info-submitted bold-subtext hide">  \nThanks! An email has been sent on your behalf. We will update their contact information when available.</p><p class="request-updated-info-failed bold-subtext hide">Sorry, we couldn\'t process your request. Please try again later.</p></div><div class="data-controls hide"><div class="block-controls"><a href="#" class="button banner-button real-button input-block-level crm-button primary-crm-button submit-dispute">Submit</a><a href="#" class="link cancel-dispute secondary-link">Cancel</a></div></div><p class="correction-submitted-subtext bold-subtext hide">Thanks for sending that along! We\'re reviewing your submission now.</p></div></div><div class="crm-controls"><a href="#" class="button banner-button real-button primary-button input-block-level add-to-crm hide">Add to&nbsp;'),use_hscrm?buf.push("HubSpot"):buf.push("Salesforce"),buf.push('<i class="icon-plus-sign pull-right"></i></a><a href="#" target="_blank" class="button banner-button real-button crm-button primary-crm-button button-block call-in-crm hide"><i class="icon-phone"></i></a><a href="#" target="_blank" class="hide button banner-button real-button crm-button existing-button input-block-level view-in-crm">View in CRM<i class="icon-chevron-right pull-right"></i></a>'),has_both_crms&&(buf.push('<a href="#" class="input-block-level crm-toggle-link">Use&nbsp;'),use_hscrm?buf.push("Salesforce&nbsp;"):buf.push("HubSpot&nbsp;"),buf.push("instead</a>")),buf.push("</div>")}return buf.join("")};return typeof define=="function"&&define.amd?define(["jade"],function(){return this.jade.templates||(this.jade.templates={}),this.jade.templates.data_table=t,t}):(this.jade.templates||(this.jade.templates={}),this.jade.templates.data_table=t,typeof hubspot=="object"&&hubspot.updateDependencies&&hubspot.updateDependencies("jade.templates.data_table")),t}.call(this),function(){var t=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="data-table"><div class="link-list"><div class="visible-properties"></div><div class="social-properties"></div><div class="hidden-properties"></div><div class="overview"><a href="#" class="banner-link expandable lead-overview">When you send me an email with Sidekick, you\'ll get a notification when I open your email. <br/><hr/>Try it out - send me an email at <strong>hello@getsidekick.com</strong>. </a></div></div></div><div class="social-streams-container"><div class="stream-heading-container"><div data-stream-type="signals" class="stream-heading active"><i class="icon-fixed-width icon-signals"></i></div><div data-stream-type="twitter" class="stream-heading"><i class="icon-fixed-width icon-twitter"></i></div><div class="other-social-links"><div class="data-row social-row"><a href="hello@getsidekick.com" class="email-link external-link muted-link"><i class="icon-envelope"></i></a><a href="https://www.getsidekick.com" target="_blank" class="external-link muted-link"><i class="icon-globe"></i></a></div></div><div class="stream-container"><div data-stream-type="signals" class="social-stream"><div class="signals-activities-table"><div class="signals-activities-list link-list contact-timeline-list"><div data-index="1" data-contact-name="#" data-domain="#" data-linkedin-url="#" class="banner-link signals-activity three-line"><div class="activity-bubble-container"><div class="activity-bubble emailopen-bubble"><i class="icon-envelope"></i></div></div><div class="activity-meta"><span class="contact-link view-linkedin-action"><div class="contact-data"><span class="activity-story">Opened "Getting Started with Sidekick"</span></div></span><div class="link-subtext"><span class="record-date">Today</span></div></div></div><div data-index="2" data-contact-name="#" data-domain="#" data-linkedin-url="#" class="banner-link signals-activity three-line"><div class="activity-bubble-container"><div class="activity-bubble linkclick-bubble"><i class="icon-link"></i></div></div><div class="activity-meta"><span class="contact-link view-linkedin-action"><div class="contact-data"><span class="activity-story">Clicked "Sweet Sidekick has an <a href="https://play.google.com/store/apps/details?id=com.hubspot.sidekick&hl=en" target="_blank">Android App</a> and <a href="https://itunes.apple.com/us/app/sidekick-by-hubspot/id780995421?mt=8" target="_blank">IOS App</a>"</span></div></span><div class="link-subtext"><span class="record-date">1 day ago</span></div></div></div><div data-index="3" data-contact-name="#" data-domain="#" data-linkedin-url="#" class="banner-link signals-activity three-line"><div class="activity-bubble-container"><div class="activity-bubble linkclick-bubble"><i class="icon-link"></i></div></div><div class="activity-meta"><span class="contact-link view-linkedin-action"><div class="contact-data"><span class="activity-story">Clicked â<a href="http://www.getsidekick.com/email-tracking-guide" target="_blank">Here\'s How Email Tracking Works</a>â</span></div></span><div class="link-subtext"><span class="record-date">1 day ago</span></div></div></div><div data-index="4" data-contact-name="#" data-domain="#" data-linkedin-url="#" class="banner-link signals-activity three-line"><div class="activity-bubble-container"><div class="activity-bubble emailopen-bubble"><i class="icon-envelope"></i></div></div><div class="activity-meta"><span class="contact-link view-linkedin-action"><div class="contact-data"><span class="activity-story">Opened âFollowing up on our last conversationâ</span></div></span><div class="link-subtext"><span class="record-date">2 Days Ago</span></div></div></div><div class="clearfix">&nbsp;</div></div></div></div><div data-stream-type="twitter" class="social-stream hide"><div class="twitter-time-line"><a href="https://twitter.com/sidekick" data-widget-id="559721531123982337" class="twitter-timeline">Tweets by @sidekick</a></div></div></div></div></div><div class="child-company-container"><div class="lead-view no-status child-lead-view"><div class="header"><div class="expand-container"><i class="icon-double-angle-up"></i></div><img src="https://app.getsidekick.com/avatar/image/?domain=getsidekick.com" class="company-avatar"/><div class="primary-data"><div class="company-name primary-name">Sidekick</div><div class="secondary-name"><a href="http://getsidekick.com" target="_blank" class="external-link muted-link">getsidekick.com<i class="icon-external-link"></i></a></div></div></div><div class="data-table"><div class="link-list"><div class="visible-properties"><div data-row-type="Last Contacted" class="data-row"><div class="data-col data-col-label">Last Contacted</div><div class="data-col data-col-value">2014-12-22</div></div></div><div class="social-properties"></div><div class="hidden-properties"><div style="display none;" class="data-row show-more-row"><div class="data-col"><a href="#" class="external-link muted-link show-more">More<i class="icon-caret-down"></i></a></div><div class="data-col">&nbsp;</div></div><div style="display block;" class="detailed-data"><div class="data-row"><div class="data-col">Facebook</div><div class="data-col"><a href="https://www.facebook.com/getsidekick" target="_blank" class="external-link muted-link">Getsidekick<i class="icon-external-link"></i></a></div></div><div class="data-row"><div class="data-col">Twitter</div><div class="data-col"><a href="http://twitter.com/sidekick" target="_blank" class="external-link muted-link">@sidekick<i class="icon-external-link"></i></a></div></div><div class="data-row"><div class="data-col">Blog</div><div class="data-col"><a href="http://www.getsidekick.com/blog" target="_blank" class="external-link muted-link">Sidekick Blog<i class="icon-external-link"></i></a></div></div><div class="data-row"><div class="data-col">Crafted By</div><div class="data-col"><a href="http://www.hubspot.com" target="_blank" class="external-link muted-link">HubSpot<i class="icon-external-link"></i></a></div></div></div></div></div></div></div></div>')}return buf.join("")};return typeof define=="function"&&define.amd?define(["jade"],function(){return this.jade.templates||(this.jade.templates={}),this.jade.templates.dummy_view=t,t}):(this.jade.templates||(this.jade.templates={}),this.jade.templates.dummy_view=t,typeof hubspot=="object"&&hubspot.updateDependencies&&hubspot.updateDependencies("jade.templates.dummy_view")),t}.call(this),function(){var t=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;formatted_existing_records&&crm_base_url?num_total_records>0?(buf.push("<div"),buf.push(attrs({"class":"view-existing-records link-list-header"+(limited?"":" expanded")+""},{"class":!0})),buf.push("><h4><strong>"+escape((interp=existing_records.get("record_set_type"))==null?"":interp)+" Records</strong><i"),buf.push(attrs({"data-toggle":"tooltip","data-placement":"bottom","data-original-title":"Existing "+existing_records.get("record_set_type")+" records for "+company_name+"","class":"icon-question-sign tippable"},{"class":!0,"data-toggle":!0,"data-placement":!0,"data-original-title":!0})),buf.push('></i></h4></div><div class="existing-records-list link-list">'),function(){if("number"==typeof formatted_existing_records.length)for(var e=0,t=formatted_existing_records.length;e<t;e++){var n=formatted_existing_records[e];(function(){if("number"==typeof n.length)for(var e=0,t=n.length;e<t;e++){var r=n[e];buf.push("<div"),buf.push(attrs({"data-id":r.id,"class":"existing-record banner-link two-link "+r.record_type+"-record"},{"class":!0,"data-id":!0})),buf.push(">"),r.record_type=="lead"&&existing_records.get("record_set_type")=="Salesforce"&&(buf.push('<span class="link-actions pull-right">'),r.owner_name&&r.owned_by_queue&&buf.push('<a href="#" target="_blank" class="existing-record-link claim-record-action">Claim</a><span class="existing-record-link claiming-status muted">Claiming...</span><span class="existing-record-link claimed-success success"><i class="icon-ok-sign"></i>Claimed</span><span class="existing-record-link claimed-error error"><i class="icon-remove-sign"></i>Error</span><span class="divider">Â·</span>'),buf.push('<a href="#" target="_blank" class="existing-record-link edit-record-action no-highlight hide-on-save">Edit</a><a href="#" target="_blank" class="existing-record-link edit-record-action muted cancel-edit on-highlight hide-on-save">Cancel</a></span>')),buf.push("<a"),buf.push(attrs({href:"#","data-record-url":""+crm_base_url+"/"+r.id+"",target:"_blank","class":"external-link existing-record-link view-record-action"},{href:!0,"data-record-url":!0,target:!0})),buf.push('><div class="contact-data"><span class="contact-name">'),r.name?buf.push(""+escape((interp=r.name)==null?"":interp)+""):r.firstName||r.lastName?(r.firstName&&buf.push(""+escape((interp=r.firstName)==null?"":interp)+""),r.lastName&&buf.push(""+escape((interp=r.lastName)==null?"":interp)+"")):r.email?buf.push(""+escape((interp=r.email)==null?"":interp)+""):buf.push('<span class="muted">'+escape((interp=r.company_name)==null?"":interp)+"</span>"),buf.push("</span></div></a>");if(r.owner_name||r.date)buf.push("<div"),buf.push(attrs({alt:r.owner_name,title:r.owner_name,"class":"link-subtext contact-title"},{alt:!0,title:!0})),buf.push(">"),r.date&&r.date!="undefined"&&buf.push('<span class="record-date pull-right">'+escape((interp=r.date)==null?"":interp)+"</span>"),buf.push('<span class="record-owner">'+escape((interp=r.formatted_record_type)==null?"":interp)+"&nbsp;"),r.owner_name&&buf.push("&bull; "+escape((interp=r.owner_name)==null?"":interp)+""),buf.push("</span></div>");buf.push("</div>")}else{var t=0;for(var e in n){t++;if(n.hasOwnProperty(e)){var r=n[e];buf.push("<div"),buf.push(attrs({"data-id":r.id,"class":"existing-record banner-link two-link "+r.record_type+"-record"},{"class":!0,"data-id":!0})),buf.push(">"),r.record_type=="lead"&&existing_records.get("record_set_type")=="Salesforce"&&(buf.push('<span class="link-actions pull-right">'),r.owner_name&&r.owned_by_queue&&buf.push('<a href="#" target="_blank" class="existing-record-link claim-record-action">Claim</a><span class="existing-record-link claiming-status muted">Claiming...</span><span class="existing-record-link claimed-success success"><i class="icon-ok-sign"></i>Claimed</span><span class="existing-record-link claimed-error error"><i class="icon-remove-sign"></i>Error</span><span class="divider">Â·</span>'),buf.push('<a href="#" target="_blank" class="existing-record-link edit-record-action no-highlight hide-on-save">Edit</a><a href="#" target="_blank" class="existing-record-link edit-record-action muted cancel-edit on-highlight hide-on-save">Cancel</a></span>')),buf.push("<a"),buf.push(attrs({href:"#","data-record-url":""+crm_base_url+"/"+r.id+"",target:"_blank","class":"external-link existing-record-link view-record-action"},{href:!0,"data-record-url":!0,target:!0})),buf.push('><div class="contact-data"><span class="contact-name">'),r.name?buf.push(""+escape((interp=r.name)==null?"":interp)+""):r.firstName||r.lastName?(r.firstName&&buf.push(""+escape((interp=r.firstName)==null?"":interp)+""),r.lastName&&buf.push(""+escape((interp=r.lastName)==null?"":interp)+"")):r.email?buf.push(""+escape((interp=r.email)==null?"":interp)+""):buf.push('<span class="muted">'+escape((interp=r.company_name)==null?"":interp)+"</span>"),buf.push("</span></div></a>");if(r.owner_name||r.date)buf.push("<div"),buf.push(attrs({alt:r.owner_name,title:r.owner_name,"class":"link-subtext contact-title"},{alt:!0,title:!0})),buf.push(">"),r.date&&r.date!="undefined"&&buf.push('<span class="record-date pull-right">'+escape((interp=r.date)==null?"":interp)+"</span>"),buf.push('<span class="record-owner">'+escape((interp=r.formatted_record_type)==null?"":interp)+"&nbsp;"),r.owner_name&&buf.push("&bull; "+escape((interp=r.owner_name)==null?"":interp)+""),buf.push("</span></div>");buf.push("</div>")}}}}).call(this)}else{var t=0;for(var e in formatted_existing_records){t++;if(formatted_existing_records.hasOwnProperty(e)){var n=formatted_existing_records[e];(function(){if("number"==typeof n.length)for(var e=0,t=n.length;e<t;e++){var r=n[e];buf.push("<div"),buf.push(attrs({"data-id":r.id,"class":"existing-record banner-link two-link "+r.record_type+"-record"},{"class":!0,"data-id":!0})),buf.push(">"),r.record_type=="lead"&&existing_records.get("record_set_type")=="Salesforce"&&(buf.push('<span class="link-actions pull-right">'),r.owner_name&&r.owned_by_queue&&buf.push('<a href="#" target="_blank" class="existing-record-link claim-record-action">Claim</a><span class="existing-record-link claiming-status muted">Claiming...</span><span class="existing-record-link claimed-success success"><i class="icon-ok-sign"></i>Claimed</span><span class="existing-record-link claimed-error error"><i class="icon-remove-sign"></i>Error</span><span class="divider">Â·</span>'),buf.push('<a href="#" target="_blank" class="existing-record-link edit-record-action no-highlight hide-on-save">Edit</a><a href="#" target="_blank" class="existing-record-link edit-record-action muted cancel-edit on-highlight hide-on-save">Cancel</a></span>')),buf.push
("<a"),buf.push(attrs({href:"#","data-record-url":""+crm_base_url+"/"+r.id+"",target:"_blank","class":"external-link existing-record-link view-record-action"},{href:!0,"data-record-url":!0,target:!0})),buf.push('><div class="contact-data"><span class="contact-name">'),r.name?buf.push(""+escape((interp=r.name)==null?"":interp)+""):r.firstName||r.lastName?(r.firstName&&buf.push(""+escape((interp=r.firstName)==null?"":interp)+""),r.lastName&&buf.push(""+escape((interp=r.lastName)==null?"":interp)+"")):r.email?buf.push(""+escape((interp=r.email)==null?"":interp)+""):buf.push('<span class="muted">'+escape((interp=r.company_name)==null?"":interp)+"</span>"),buf.push("</span></div></a>");if(r.owner_name||r.date)buf.push("<div"),buf.push(attrs({alt:r.owner_name,title:r.owner_name,"class":"link-subtext contact-title"},{alt:!0,title:!0})),buf.push(">"),r.date&&r.date!="undefined"&&buf.push('<span class="record-date pull-right">'+escape((interp=r.date)==null?"":interp)+"</span>"),buf.push('<span class="record-owner">'+escape((interp=r.formatted_record_type)==null?"":interp)+"&nbsp;"),r.owner_name&&buf.push("&bull; "+escape((interp=r.owner_name)==null?"":interp)+""),buf.push("</span></div>");buf.push("</div>")}else{var t=0;for(var e in n){t++;if(n.hasOwnProperty(e)){var r=n[e];buf.push("<div"),buf.push(attrs({"data-id":r.id,"class":"existing-record banner-link two-link "+r.record_type+"-record"},{"class":!0,"data-id":!0})),buf.push(">"),r.record_type=="lead"&&existing_records.get("record_set_type")=="Salesforce"&&(buf.push('<span class="link-actions pull-right">'),r.owner_name&&r.owned_by_queue&&buf.push('<a href="#" target="_blank" class="existing-record-link claim-record-action">Claim</a><span class="existing-record-link claiming-status muted">Claiming...</span><span class="existing-record-link claimed-success success"><i class="icon-ok-sign"></i>Claimed</span><span class="existing-record-link claimed-error error"><i class="icon-remove-sign"></i>Error</span><span class="divider">Â·</span>'),buf.push('<a href="#" target="_blank" class="existing-record-link edit-record-action no-highlight hide-on-save">Edit</a><a href="#" target="_blank" class="existing-record-link edit-record-action muted cancel-edit on-highlight hide-on-save">Cancel</a></span>')),buf.push("<a"),buf.push(attrs({href:"#","data-record-url":""+crm_base_url+"/"+r.id+"",target:"_blank","class":"external-link existing-record-link view-record-action"},{href:!0,"data-record-url":!0,target:!0})),buf.push('><div class="contact-data"><span class="contact-name">'),r.name?buf.push(""+escape((interp=r.name)==null?"":interp)+""):r.firstName||r.lastName?(r.firstName&&buf.push(""+escape((interp=r.firstName)==null?"":interp)+""),r.lastName&&buf.push(""+escape((interp=r.lastName)==null?"":interp)+"")):r.email?buf.push(""+escape((interp=r.email)==null?"":interp)+""):buf.push('<span class="muted">'+escape((interp=r.company_name)==null?"":interp)+"</span>"),buf.push("</span></div></a>");if(r.owner_name||r.date)buf.push("<div"),buf.push(attrs({alt:r.owner_name,title:r.owner_name,"class":"link-subtext contact-title"},{alt:!0,title:!0})),buf.push(">"),r.date&&r.date!="undefined"&&buf.push('<span class="record-date pull-right">'+escape((interp=r.date)==null?"":interp)+"</span>"),buf.push('<span class="record-owner">'+escape((interp=r.formatted_record_type)==null?"":interp)+"&nbsp;"),r.owner_name&&buf.push("&bull; "+escape((interp=r.owner_name)==null?"":interp)+""),buf.push("</span></div>");buf.push("</div>")}}}}).call(this)}}}}.call(this),buf.push('<a href="#" class="link-actions expand-link">'),limited&&num_total_records>limit?buf.push('<span class="expand-text collapsed"></span>Show all '+escape((interp=num_total_records)==null?"":interp)+'<i class="icon-caret-down"></i>'):limited||buf.push('<span class="expand-text expanded"></span>Show less<i class="icon-caret-up"></i>'),buf.push("</a></div>")):salesforce_error_message&&(buf.push('<div class="view-existing-records link-list-header"><h4 class="error"><strong>Salesforce Records</strong><i'),buf.push(attrs({"data-toggle":"tooltip","data-placement":"bottom","data-original-title":"Existing Salesforce records for "+company_name+"","class":"icon-question-sign tippable"},{"class":!0,"data-toggle":!0,"data-placement":!0,"data-original-title":!0})),buf.push('></i></h4></div><div class="existing-records-list link-list"><div class="notice error"><i class="icon-remove-sign"></i>'+escape((interp=salesforce_error_message)==null?"":interp)+'<span class="divider">Â·</span><a'),buf.push(attrs({href:salesforceSettingsUrl,target:"_blank","class":"external-link fix-salesforce-link"},{"class":!0,href:!0,target:!0})),buf.push('><strong>Fix</strong><i class="icon-external-link"></i></a></div></div>')):salesforce_error_message&&(buf.push('<div class="view-existing-records link-list-header"><h4 class="error"><strong>CRM Records</strong><i'),buf.push(attrs({"data-toggle":"tooltip","data-placement":"bottom","data-original-title":"Existing Salesforce records for "+company_name+"","class":"icon-question-sign tippable"},{"class":!0,"data-toggle":!0,"data-placement":!0,"data-original-title":!0})),buf.push('></i></h4></div><div class="existing-records-list link-list"><div class="notice error"><i class="icon-remove-sign"></i>'+escape((interp=salesforce_error_message)==null?"":interp)+'<span class="divider">Â·</span><a'),buf.push(attrs({href:salesforceSettingsUrl,target:"_blank","class":"external-link fix-salesforce-link"},{"class":!0,href:!0,target:!0})),buf.push('>Fix<i class="icon-external-link"></i></a></div></div>'))}return buf.join("")};return typeof define=="function"&&define.amd?define(["jade"],function(){return this.jade.templates||(this.jade.templates={}),this.jade.templates.existing_records_table=t,t}):(this.jade.templates||(this.jade.templates={}),this.jade.templates.existing_records_table=t,typeof hubspot=="object"&&hubspot.updateDependencies&&hubspot.updateDependencies("jade.templates.existing_records_table")),t}.call(this),function(){var t=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;is_child_view&&buf.push('<div class="expand-container"><i class="icon-double-angle-up"></i></div>'),buf.push("<img"),buf.push(attrs({src:"//app.getsidekick.com/avatar/image/?domain="+domain+"","class":"company-avatar"},{"class":!0,src:!0})),buf.push('/><div class="primary-data"><div'),buf.push(attrs({alt:company_name,title:company_name,"class":"primary-name company-name"},{alt:!0,title:!0})),buf.push(">"+escape((interp=company_name)==null?"":interp)+'</div><div class="secondary-name"><a'),buf.push(attrs({href:"http://"+domain+"",target:"_blank","class":"external-link muted-link"},{href:!0,target:!0})),buf.push(">"+escape((interp=domain)==null?"":interp)+'<i class="icon-external-link"></i></a></div></div>')}return buf.join("")};return typeof define=="function"&&define.amd?define(["jade"],function(){return this.jade.templates||(this.jade.templates={}),this.jade.templates.header_company=t,t}):(this.jade.templates||(this.jade.templates={}),this.jade.templates.header_company=t,typeof hubspot=="object"&&hubspot.updateDependencies&&hubspot.updateDependencies("jade.templates.header_company")),t}.call(this),function(){var t=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push("<img"),buf.push(attrs({src:""+avatar_url+"","class":"header-contact-avatar"},{"class":!0,src:!0})),buf.push('/><div class="primary-data"><div class="primary-name contact-name"></div><div class="secondary-name"></div></div>')}return buf.join("")};return typeof define=="function"&&define.amd?define(["jade"],function(){return this.jade.templates||(this.jade.templates={}),this.jade.templates.header_contact=t,t}):(this.jade.templates||(this.jade.templates={}),this.jade.templates.header_contact=t,typeof hubspot=="object"&&hubspot.updateDependencies&&hubspot.updateDependencies("jade.templates.header_contact")),t}.call(this),function(){var t=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="full-length-container invite-container"><div class="icon-remove-sign invite-cancel"></div><span class="invite-text"><b>'+escape((interp=inviteText)==null?"":interp)+' </b>a free month of Sidekick<div class="invite-button"><a href="#" class="button banner-button real-button primary-button invite-link"> \n'+escape((interp=buttonText)==null?"":interp)+"</a></div></span></div>")}return buf.join("")};return typeof define=="function"&&define.amd?define(["jade"],function(){return this.jade.templates||(this.jade.templates={}),this.jade.templates.invite=t,t}):(this.jade.templates||(this.jade.templates={}),this.jade.templates.invite=t,typeof hubspot=="object"&&hubspot.updateDependencies&&hubspot.updateDependencies("jade.templates.invite")),t}.call(this),function(){var t=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="padded-container pre-login-container"><h3>You\'re logged out of Sidekick</h3><div class="information-container"><p class="subtext large">Log in to know when your emails are opened.</p></div><a href="#" class="primary-button-cta login-cta">Log in to Sidekick</a><p class="subtext large faded">Need help?&nbsp;<a href="#" class="chat-link">Chat with us.</a></p></div><div class="padded-container login-form-container hide"><a'),buf.push(attrs({href:loginWithGoogleUrl,"class":"primary-button-cta login-with-google-cta"},{href:!0})),buf.push('><i class="icon-google-plus"></i><span>Log in with Google</span></a><hr/><div class="divider"><div class="spacer"><strong>OR</strong></div></div><p class="login"><strong>Log in with your Sidekick account</strong></p><form'),buf.push(attrs({action:loginWithCredentialsUrl,method:"post",novalidate:"novalidate","class":"login-form"},{action:!0,method:!0,novalidate:!0})),buf.push('><div class="control-group"><div class="controls"><input name="email" placeholder="work@company.com" type="text" class="input-large"/></div></div><div class="control-group"><div class="controls"><input name="password" placeholder="Sidekick Password" type="password" class="input-password input-large"/></div></div><div class="control-group"><div class="controls"><button type="submit" class="secondary-button-cta login-with-creds-cta input-large">Log in</button></div></div></form><p class="notice incorrect-creds error hide">Incorrect email and password.</p><p class="subtext">Forgot your password?&nbsp;<a'),buf.push(attrs({href:forgotPasswordUrl,target:"_blank"},{href:!0,target:!0})),buf.push(">Reset it</a></p></div>")}return buf.join("")};return typeof define=="function"&&define.amd?define(["jade"],function(){return this.jade.templates||(this.jade.templates={}),this.jade.templates.login_view=t,t}):(this.jade.templates||(this.jade.templates={}),this.jade.templates.login_view=t,typeof hubspot=="object"&&hubspot.updateDependencies&&hubspot.updateDependencies("jade.templates.login_view")),t}.call(this),function(){var t=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<h3 class="centered">Mutual Connections</h3>'),hasConnectors?(buf.push('<div class="mutual-connections-list contact-profile-view link-list"><div class="company-contact banner-link two-line">'),function(){if("number"==typeof connectors.models.length)for(var e=0,t=connectors.models.length;e<t;e++){var n=connectors.models[e];e<limit&&(buf.push("<div"),buf.push(attrs({cid:n.cid,"class":"connector-row"},{cid:!0})),buf.push(">"),n.getAvatarUrl()&&(buf.push('<span class="link-actions pull-left small-avatar-container"><img'),buf.push(attrs({src:""+n.getAvatarUrl()+"",onerror:"this.onerror=null;this.src='"+defaultImgUrl+"';","class":"contact-avatar circular-avatar"},{src:!0,onerror:!0})),buf.push("/></span>")),buf.push("<span"),buf.push(attrs({cid:n.cid,"class":"link-actions pull-left connector-data"},{cid:!0})),buf.push('><a href="#" class="contact-link email-action no-highlight"><span class="contact-name">'),n.get("connectorName")?buf.push(""+escape((interp=n.get("connectorName"))==null?"":interp)+""):buf.push(""+escape((interp=n.get("connectorEmail"))==null?"":interp)+""),buf.push("</span></a><div"),buf.push(attrs({alt:n.get("connectorTitle"),title:n.get("job_title"),"class":"link-subtext contact-title"},{alt:!0,title:!0})),buf.push('><span class="contact-title">'),n.get("connectorTitle")?buf.push(""+escape((interp=n.get("connectorTitle"))==null?"":interp)+" at "+escape((interp=userDomain)==null?"":interp)+""):buf.push("Coworker at "+escape((interp=userDomain)==null?"":interp)+""),buf.push('</span></div><div class="link-subtext social-links"></div></span></div>'))}else{var t=0;for(var e in connectors.models){t++;if(connectors.models.hasOwnProperty(e)){var n=connectors.models[e];e<limit&&(buf.push("<div"),buf.push(attrs({cid:n.cid,"class":"connector-row"},{cid:!0})),buf.push(">"),n.getAvatarUrl()&&(buf.push('<span class="link-actions pull-left small-avatar-container"><img'),buf.push(attrs({src:""+n.getAvatarUrl()+"",onerror:"this.onerror=null;this.src='"+defaultImgUrl+"';","class":"contact-avatar circular-avatar"},{src:!0,onerror:!0})),buf.push("/></span>")),buf.push("<span"),buf.push(attrs({cid:n.cid,"class":"link-actions pull-left connector-data"},{cid:!0})),buf.push('><a href="#" class="contact-link email-action no-highlight"><span class="contact-name">'),n.get("connectorName")?buf.push(""+escape((interp=n.get("connectorName"))==null?"":interp)+""):buf.push(""+escape((interp=n.get("connectorEmail"))==null?"":interp)+""),buf.push("</span></a><div"),buf.push(attrs({alt:n.get("connectorTitle"),title:n.get("job_title"),"class":"link-subtext contact-title"},{alt:!0,title:!0})),buf.push('><span class="contact-title">'),n.get("connectorTitle")?buf.push(""+escape((interp=n.get("connectorTitle"))==null?"":interp)+" at "+escape((interp=userDomain)==null?"":interp)+""):buf.push("Coworker at "+escape((interp=userDomain)==null?"":interp)+""),buf.push('</span></div><div class="link-subtext social-links"></div></span></div>'))}}}}.call(this),buf.push('</div><a href="#" class="link-actions expand-link mutual-connections-link">'),limited&&connectors.models.length>limit?buf.push('<span class="expand-text collapsed">Show all '+escape((interp=connectors.models.length)==null?"":interp)+'</span><i class="icon-caret-down"></i>'):limited||buf.push('<span class="expand-text expanded"></span>Show less<i class="icon-caret-up"></i>'),buf.push("</a></div>")):(buf.push('<div class="mutual-connections-list contact-profile-view link-list"><div class="large-avatar-container"><img'),buf.push(attrs({src:""+defaultImgUrl+"","class":"large-avatar"},{src:!0})),buf.push('/></div><p class="no-connectors muted">You currently have no mutual connections with this contact</p></div>'))}return buf.join("")};return typeof define=="function"&&define.amd?define(["jade"],function(){return this.jade.templates||(this.jade.templates={}),this.jade.templates.mutual_connections_table=t,t}):(this.jade.templates||(this.jade.templates={}),this.jade.templates.mutual_connections_table=t,typeof hubspot=="object"&&hubspot.updateDependencies&&hubspot.updateDependencies("jade.templates.mutual_connections_table")),t}.call(this),function(){var t=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<a href="#" class="banner-link expandable lead-overview">'+escape((interp=overview)==null?"":interp)+"</a>")}return buf.join("")};return typeof define=="function"&&define.amd?define(["jade"],function(){return this.jade.templates||(this.jade.templates={}),this.jade.templates.overview=t,t}):(this.jade.templates||(this.jade.templates={}),this.jade.templates.overview=t,typeof hubspot=="object"&&hubspot.updateDependencies&&hubspot.updateDependencies("jade.templates.overview")),t}.call(this),function(){var t=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;related_companies?related_companies.length>0?(buf.push('<div class="view-related-companies link-list-header"><h4><strong>Related Companies</strong><i'),buf.push(attrs({"data-toggle":"tooltip","data-placement":"bottom","data-original-title":"Companies that may be related to "+company_name+"","class":"icon-question-sign tippable"},{"class":!0,"data-toggle":!0,"data-placement":!0,"data-original-title":!0})),buf.push('></i></h4></div><div class="related-companies-list link-list">'),function(){if("number"==typeof related_companies.length)for(var e=0,t=related_companies.length;e<t;e++){var n=related_companies[e];buf.push("<div"),buf.push(attrs({"data-domain":""+n.domain+"","data-company-name":""+n.name+"","class":"related-company banner-link"},{"data-domain":!0,"data-company-name":!0})),buf.push("><a"),buf.push(attrs({href:""+n.domain+"",target:"_blank","class":"related-company-link"},{href:!0,target:!0})),buf.push(">"+escape((interp=n.name)==null?"":interp)+"</a></div>")}else{var t=0;for(var e in related_companies){t++;if(related_companies.hasOwnProperty(e)){var n=related_companies[e];buf.push("<div"),buf.push(attrs({"data-domain":""+n.domain+"","data-company-name":""+n.name+"","class":"related-company banner-link"},{"data-domain":!0,"data-company-name":!0})),buf.push("><a"),buf.push(attrs({href:""+n.domain+"",target:"_blank","class":"related-company-link"},{href:!0,target:!0})),buf.push(">"+escape((interp=n.name)==null?"":interp)+"</a></div>")}}}}.call(this),buf.push("</div>")):(buf.push('<div class="view-related-companies link-list-header"><h4 class="muted">No Related Companies<i'),buf.push(attrs({"data-toggle":"tooltip","data-placement":"bottom","data-original-title":"We couldn't find any companies related to "+company_name+"","class":"icon-question-sign tippable"},{"class":!0,"data-toggle":!0,"data-placement":!0,"data-original-title":!0})),buf.push('></i></h4></div><div class="related-companies-list link-list empty-list"></div>')):(buf.push('<div class="view-related-companies link-list-header"><h4 class="muted">Related Companies<i'),buf.push(attrs({"data-toggle":"tooltip","data-placement":"bottom","data-original-title":"Companies that may be related to "+company_name+"","class":"icon-question-sign tippable"},{"class":!0,"data-toggle":!0,"data-placement":!0,"data-original-title":!0})),buf.push('></i><span class="muted pull-right">Searching...</span></h4></div>'))}return buf.join("")};return typeof define=="function"&&define.amd?define(["jade"],function(){return this.jade.templates||(this.jade.templates={}),this.jade.templates.related_companies_table=t,t}):(this.jade.templates||(this.jade.templates={}),this.jade.templates.related_companies_table=t,typeof hubspot=="object"&&hubspot.updateDependencies&&hubspot.updateDependencies("jade.templates.related_companies_table")),t}.call(this),function(){var t=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="detailed-data">'),function(){if("number"==typeof secondary_properties.length)for(var e=0,t=secondary_properties.length;e<t;e++){var n=secondary_properties[e];n.rawvalue&&n.rawvalue!="null"&&n.rawvalue!="None"&&(buf.push('<div class="data-row">'),n.link?(buf.push('<div class="data-col">'+escape((interp=n.label)==null?"":interp)+'</div><div class="data-col"><a'),buf.push(attrs({href:""+n.link+"",target:"_blank","class":"external-link muted-link"},{href:!0,target:!0})),buf.push(">"+escape((interp=n.value)==null?"":interp)+'<i class="icon-external-link"></i></a></div>')):(buf.push('<div class="data-col">'+escape((interp=n.label)==null?"":interp)+'</div><div class="data-col readable">'+escape((interp=n.value)==null?"":interp)+'</div><div class="data-col writable">'),n.readonly?buf.push(""+escape((interp=n.value)==null?"":interp)+""):(buf.push("<input"),buf.push(attrs({type:"text",name:""+n.property+"",placeholder:""+(n.value?n.value:"Add "+n.label)+"",prefilled:!!n.value,"class":"editable-lead-data-field data-field"},{type:!0,name:!0,placeholder:!0,prefilled:!0})),buf.push('/><i class="icon-pencil pull-right data-row show-more-row"></i>')),buf.push("</div>")),buf.push("</div>"))}else{var t=0;for(var e in secondary_properties){t++;if(secondary_properties.hasOwnProperty(e)){var n=secondary_properties[e];n.rawvalue&&n.rawvalue!="null"&&n.rawvalue!="None"&&(buf.push('<div class="data-row">'),n.link?(buf.push('<div class="data-col">'+escape((interp=n.label)==null?"":interp)+'</div><div class="data-col"><a'),buf.push(attrs({href:""+n.link+"",target:"_blank","class":"external-link muted-link"},{href:!0,target:!0})),buf.push(">"+escape((interp=n.value)==null?"":interp)+'<i class="icon-external-link"></i></a></div>')):(buf.push('<div class="data-col">'+escape((interp=n.label)==null?"":interp)+'</div><div class="data-col readable">'+escape((interp=n.value)==null?"":interp)+'</div><div class="data-col writable">'),n.readonly?buf.push(""+escape((interp=n.value)==null?"":interp)+""):(buf.push("<input"),buf.push(attrs({type:"text",name:""+n.property+"",placeholder:""+(n.value?n.value:"Add "+n.label)+"",prefilled:!!n.value,"class":"editable-lead-data-field data-field"},{type:!0,name:!0,placeholder:!0,prefilled:!0})),buf.push('/><i class="icon-pencil pull-right data-row show-more-row"></i>')),buf.push("</div>")),buf.push("</div>"))}}}}.call(this),buf.push('</div><div class="data-row show-more-row"><div class="data-col"><a href="#" class="link show-more">More<i class="icon-caret-down"></i></a></div>'),has_dispute_ui&&buf.push('<div class="data-col action-col"><a href="#" class="link improve-data">Improve Data</a></div>'),buf.push("</div>")}return buf.join("")};return typeof define=="function"&&define.amd?define(["jade"],function(){return this.jade.templates||(this.jade.templates={}),this.jade.templates.secondary_properties=t,t}):(this.jade.templates||(this.jade.templates={}),this.jade.templates.secondary_properties=t,typeof hubspot=="object"&&hubspot.updateDependencies&&hubspot.updateDependencies("jade.templates.secondary_properties")),t}.call(this),function(){var t=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;activities&&activities.length>0&&(buf.push("<div"),buf.push(attrs({"class":"signals-activities-list link-list"+(is_user_profile?"":" contact-timeline-list")+""},{"class":!0})),buf.push(">"),function(){if("number"==typeof activities.length)for(var e=0,t=activities.length;e<t;e++){var n=activities[e];e<limit&&(buf.push("<div"),buf.push(attrs({"data-index":e,"data-contact-name":"#","data-domain":"#","data-linkedin-url":"#","class":"signals-activity banner-link three-line"},{"data-index":!0,"data-contact-name":!0,"data-domain":!0,"data-linkedin-url":!0})),buf.push(">"),is_user_profile?(buf.push('<div class="activity-bubble-avatar">'),n.computed_avatar_url?(buf.push("<img"),buf.push(attrs({src:""+n.computed_avatar_url+"","class":"contact-avatar"},{"class":!0,src:!0})),buf.push("/>")):(buf.push("<img"),buf.push(attrs({src:"//app.getsidekick.com/avatar/image/?email="+n.computed_email+"","class":"contact-avatar"},{"class":!0,src:!0})),buf.push("/>")),n.icon=="icon-envelope"?buf.push('<div class="activity-bubble emailopen-bubble"><i class="icon-envelope"></i></div>'):n.icon=="icon-link"?buf.push('<div class="activity-bubble linkclick-bubble"><i class="icon-linkis_"></i></div>'):n.icon=="icon-salesforce"?buf.push('<div class="activity-bubble salesforce-bubble"><i class="icon-salesforce"></i></div>'):n.icon=="icon-sprocket"?buf.push('<div class="activity-bubble hubspot-bubble"><i class="icon-sprocket"></i></div>'):n.icon=="icon-play"&&buf.push('<div class="activity-bubble hubspot-bubble"><i class="icon-play"></i></div>'),buf.push("</div>")):(buf.push('<div class="activity-bubble-container">'),n.icon=="icon-envelope"?buf.push('<div class="activity-bubble emailopen-bubble"><i class="icon-envelope"></i></div>'):n.icon=="icon-link"?buf.push('<div class="activity-bubble linkclick-bubble"><i class="icon-link"></i></div>'):n.icon=="icon-salesforce"?buf.push('<div class="activity-bubble salesforce-bubble"><i class="icon-salesforce"></i></div>'):n.icon=="icon-sprocket"?buf.push('<div class="activity-bubble hubspot-bubble"><i class="icon-sprocket"></i></div>'):n.icon=="icon-play"&&buf.push('<div class="activity-bubble hubspot-bubble"><i class="icon-play"></i></div>'),buf.push("</div>")),buf.push('<div class="activity-meta">'),is_user_profile?(n.computed_email?(buf.push("<a"),buf.push(attrs({href:"#",title:""+n.name+"",alt:""+n.name+"","data-name":n.name,"data-email":n.computed_email,"class":"contact-link external-link view-contact-action"},{href:!0,title:!0,alt:!0,"data-name":!0,"data-email":!0})),buf.push('><div class="contact-data"><span class="contact-name">'+escape((interp=n.name)==null?"":interp)+"</span></div></a>")):buf.push('<div class="contact-data"><span class="contact-name">'+escape((interp=n.name)==null?"":interp)+"</span></div>"),buf.push('<div class="link-subtext contact-title"><span class="owner-email">'+((interp=n.story)==null?"":interp)+'</span></div><div class="link-subtext third-line"><span class="record-date">'+escape((interp=moment(parseInt(n.created,10)).fromNow())==null?"":interp)+"</span></div>")):buf.push('<span class="contact-link view-linkedin-action"><div class="contact-data"><span class="activity-story">'+((interp=n.story)==null?"":interp)+'</span></div></span><div class="link-subtext"><span class="record-date">'+escape((interp=moment(parseInt(n.created,10)).fromNow())==null?"":interp)+"</span></div>"),buf.push("</div></div>"))}else{var t=0;for(var e in activities){t++;if(activities.hasOwnProperty(e)){var n=activities[e];e<limit&&(buf.push("<div"),buf.push(attrs({"data-index":e,"data-contact-name":"#","data-domain":"#","data-linkedin-url":"#","class":"signals-activity banner-link three-line"},{"data-index":!0,"data-contact-name":!0,"data-domain":!0,"data-linkedin-url":!0})),buf.push(">"),is_user_profile?(buf.push('<div class="activity-bubble-avatar">'),n.computed_avatar_url?(buf.push("<img"),buf.push(attrs({src:""+n.computed_avatar_url+"","class":"contact-avatar"},{"class":!0,src:!0})),buf.push("/>")):(buf.push("<img"),buf.push(attrs({src:"//app.getsidekick.com/avatar/image/?email="+n.computed_email+"","class":"contact-avatar"},{"class":!0,src:!0})),buf.push("/>")),n.icon=="icon-envelope"?buf.push('<div class="activity-bubble emailopen-bubble"><i class="icon-envelope"></i></div>'):n.icon=="icon-link"?buf.push('<div class="activity-bubble linkclick-bubble"><i class="icon-linkis_"></i></div>'):n.icon=="icon-salesforce"?buf.push('<div class="activity-bubble salesforce-bubble"><i class="icon-salesforce"></i></div>'):n.icon=="icon-sprocket"?buf.push('<div class="activity-bubble hubspot-bubble"><i class="icon-sprocket"></i></div>'):n.icon=="icon-play"&&buf.push('<div class="activity-bubble hubspot-bubble"><i class="icon-play"></i></div>'),buf.push("</div>")):(buf.push('<div class="activity-bubble-container">'),n.icon=="icon-envelope"?buf.push('<div class="activity-bubble emailopen-bubble"><i class="icon-envelope"></i></div>'):n.icon=="icon-link"?buf.push('<div class="activity-bubble linkclick-bubble"><i class="icon-link"></i></div>'):n.icon=="icon-salesforce"?buf.push('<div class="activity-bubble salesforce-bubble"><i class="icon-salesforce"></i></div>'):n.icon=="icon-sprocket"?buf.push('<div class="activity-bubble hubspot-bubble"><i class="icon-sprocket"></i></div>'):n.icon=="icon-play"&&buf.push('<div class="activity-bubble hubspot-bubble"><i class="icon-play"></i></div>'),buf.push("</div>")),buf.push('<div class="activity-meta">'),is_user_profile?(n.computed_email?(buf.push("<a"),buf.push(attrs({href:"#",title:""+n.name+"",alt:""+n.name+"","data-name":n.name,"data-email":n.computed_email,"class":"contact-link external-link view-contact-action"},{href:!0,title:!0,alt:!0,"data-name":!0,"data-email":!0})),buf.push('><div class="contact-data"><span class="contact-name">'+escape((interp=n.name)==null?"":interp)+"</span></div></a>")):buf.push('<div class="contact-data"><span class="contact-name">'+escape((interp=n.name)==null?"":interp)+"</span></div>"),buf.push('<div class="link-subtext contact-title"><span class="owner-email">'+((interp=n.story)==null?"":interp)+'</span></div><div class="link-subtext third-line"><span class="record-date">'+escape((interp=moment(parseInt(n.created,10)).fromNow())==null?"":interp)+"</span></div>")):buf.push('<span class="contact-link view-linkedin-action"><div class="contact-data"><span class="activity-story">'+((interp=n.story)==null?"":interp)+'</span></div></span><div class="link-subtext"><span class="record-date">'+escape((interp=moment(parseInt(n.created,10)).fromNow())==null?"":interp)+"</span></div>"),buf.push("</div></div>"))}}}}.call(this),buf.push("</div>"))}return buf.join("")};return typeof define=="function"&&define.amd?define(["jade"],function(){return this.jade.templates||(this.jade.templates={}),this.jade.templates.signals_activities_table=t,t}):(this.jade.templates||(this.jade.templates={}),this.jade.templates.signals_activities_table=t,typeof hubspot=="object"&&hubspot.updateDependencies&&hubspot.updateDependencies("jade.templates.signals_activities_table")),t}.call(this),function(){var t=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;social_properties&&(buf.push('<div class="data-row social-row">'),function(){if("number"==typeof social_properties.length)for(var e=0,t=social_properties.length;e<t;e++){var n=social_properties[e];n.iconname&&(n.email?(buf.push("<a"),buf.push(attrs({href:""+n.link+"","class":"muted-link external-link email-link"},{href:!0})),buf.push("><i"),buf.push(attrs({"class":""+n.iconname+""},{"class":!0})),buf.push("></i></a>")):(buf.push("<a"),buf.push(attrs({href:""+n.link+"",target:"_blank","class":"muted-link external-link social-link"},{href:!0,target:!0})),buf.push("><i"),buf.push(attrs({"class":""+n.iconname+""},{"class":!0})),buf.push("></i></a>")))}else{var t=0;for(var e in social_properties){t++;if(social_properties.hasOwnProperty(e)){var n=social_properties[e];n.iconname&&(n.email?(buf.push("<a"),buf.push(attrs({href:""+n.link+"","class":"muted-link external-link email-link"},{href:!0})),buf.push("><i"),buf.push(attrs({"class":""+n.iconname+""},{"class":!0})),buf.push("></i></a>")):(buf.push("<a"),buf.push(attrs({href:""+n.link+"",target:"_blank","class":"muted-link external-link social-link"},{href:!0,target:!0})),buf.push("><i"),buf.push(attrs({"class":""+n.iconname+""},{"class":!0})),buf.push("></i></a>")))}}}}.call(this),buf.push("</div>"))}return buf.join("")};return typeof define=="function"&&define.amd?define(["jade"],function(){return this.jade.templates||(this.jade.templates={}),this.jade.templates.social_properties=t,t}):(this.jade.templates||(this.jade.templates={}),this.jade.templates.social_properties=t,typeof hubspot=="object"&&hubspot.updateDependencies&&hubspot.updateDependencies("jade.templates.social_properties")),t}.call(this),function(){var t=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="stream-heading-container"><div data-stream-type="network" class="stream-heading hide"><i class="icon-people icon-fixed-width"></i></div><div data-stream-type="signals" class="stream-heading hide"><i class="icon-signals icon-fixed-width"></i></div><div data-stream-type="twitter" class="stream-heading hide"><i class="icon-twitter icon-fixed-width"></i></div><div class="other-social-links"></div></div><div class="stream-container"><div data-stream-type="network" class="social-stream hide"></div><div data-stream-type="signals" class="social-stream hide"></div><div data-stream-type="twitter" class="social-stream hide"></div></div>'
)}return buf.join("")};return typeof define=="function"&&define.amd?define(["jade"],function(){return this.jade.templates||(this.jade.templates={}),this.jade.templates.social_streams_container=t,t}):(this.jade.templates||(this.jade.templates={}),this.jade.templates.social_streams_container=t,typeof hubspot=="object"&&hubspot.updateDependencies&&hubspot.updateDependencies("jade.templates.social_streams_container")),t}.call(this),function(){var t=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="full-length-container invite-subtle-container"><div class="icon-remove-sign invite-social-cancel"></div><span class="invite-text">'),name?buf.push('<a href="#" class="invite-subtle-link"> \nInvite '+escape((interp=name)==null?"":interp)+" to Sidekick</a>"):buf.push('<a href="#" class="invite-subtle-link"> \nInvite to Sidekick</a>'),buf.push("</span></div>")}return buf.join("")};return typeof define=="function"&&define.amd?define(["jade"],function(){return this.jade.templates||(this.jade.templates={}),this.jade.templates.subtle_invite=t,t}):(this.jade.templates||(this.jade.templates={}),this.jade.templates.subtle_invite=t,typeof hubspot=="object"&&hubspot.updateDependencies&&hubspot.updateDependencies("jade.templates.subtle_invite")),t}.call(this),function(){var t=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push("<a"),buf.push(attrs({href:"https://twitter.com/"+twitter_name+"","data-screen-name":""+twitter_name+"","data-widget-id":""+widget_id+"","data-tweet-limit":""+limit+"","class":"twitter-timeline"},{"class":!0,href:!0,"data-screen-name":!0,"data-widget-id":!0,"data-tweet-limit":!0})),buf.push("></a>")}return buf.join("")};return typeof define=="function"&&define.amd?define(["jade"],function(){return this.jade.templates||(this.jade.templates={}),this.jade.templates.twitter_timeline=t,t}):(this.jade.templates||(this.jade.templates={}),this.jade.templates.twitter_timeline=t,typeof hubspot=="object"&&hubspot.updateDependencies&&hubspot.updateDependencies("jade.templates.twitter_timeline")),t}.call(this),function(){hubspot.require(["jQuery","sidekick.SidekickSidebar.views.base.App"],function(e,t){return e(function(){var n,r,i;return r=function(){Backbone.$=e,e.ajaxSetup({xhrFields:{withCredentials:!0}})},i=function(){var e,t;return t="https://9c023aa8377244bfb623eea87bf02fea@app.getsentry.com/37621",e={isSidebar:!0},Raven.config(t,e).install()},r(),i(),n=new t})})}.call(this),hns("hubspot.bender",{staticDomain:"//static.hsappstatic.net",staticDomainPrefix:"//static.hsappstatic.net",currentProject:"SidekickSidebar",currentProjectVersion:"static-1.279",depVersions:{HeadJS:"static-2.26",jasmine:"static-2.20",common_assets:"static-2.154",enviro:"static-3.54",PortalIdParser:"static-1.17",q:"static-3.11",moment:"static-2.3","moment-timezone":"static-3.11",FreemailDomains:"static-1.18",StyleGuideUI:"static-3.17",cssUtils:"static-1.46",LumberJack:"static-1.51",HapiJS:"static-4.2295",Mixen:"static-1.13",SpitfireClient:"static-3.1323",planout:"static-3.39",hublabs:"static-1.61",SidekickSidebar:"static-1.279"},depPathPrefixes:{HeadJS:"/HeadJS/static-2.26",jasmine:"/jasmine/static-2.20",common_assets:"/common_assets/static-2.154",enviro:"/enviro/static-3.54",PortalIdParser:"/PortalIdParser/static-1.17",q:"/q/static-3.11",moment:"/moment/static-2.3","moment-timezone":"/moment-timezone/static-3.11",FreemailDomains:"/FreemailDomains/static-1.18",StyleGuideUI:"/StyleGuideUI/static-3.17",cssUtils:"/cssUtils/static-1.46",LumberJack:"/LumberJack/static-1.51",HapiJS:"/HapiJS/static-4.2295",Mixen:"/Mixen/static-1.13",SpitfireClient:"/SpitfireClient/static-3.1323",planout:"/planout/static-3.39",hublabs:"/hublabs/static-1.61",SidekickSidebar:"/SidekickSidebar/static-1.279"}}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};hubspot.define("sidekick.SidekickSidebar.collections.CompanyEmployees",["sidekick.SidekickSidebar.models.contact.Employee","sidekick.SidekickSidebar.models.contact.DepartmentTypes","sidekick.SidekickSidebar.models.contact.ContactSources"],function(e,n,r){var i;return i=function(i){function s(){return s.__super__.constructor.apply(this,arguments)}return t(s,i),s.prototype.model=e,s.prototype.comparator="displayPriority",s.prototype.initialize=function(e,t){return this.environment=t.environment,s.__super__.initialize.call(this,e,t)},s.prototype.add=function(e,t){var n;return n=this._getDuplicateEmployees(e.toJSON()),n.length&&e.isMutualConnection()?(this.dedupeMutualConnection(n,e),this):s.__super__.add.call(this,e,t)},s.prototype._getDuplicateEmployees=function(e){var t;return t=this.filter(function(t){var n,r,i;return i=t.get("lastName")&&t.get("firstName")===e.firstName&&t.get("lastName")===e.lastName,n=t.get("email")&&t.get("email")===e.email,r=t.get("mostLikelyEmail")&&t.get("mostLikelyEmail")===e.email,i||n||r})},s.prototype.fillCRMData=function(e){var t,n,i,s;t=this._getDuplicateEmployees(e);for(i=0,s=t.length;i<s;i++)n=t[i],n.setCRMData(e),n.addSources([r.CRM]);return!1},s.prototype.dedupeMutualConnection=function(e,t){var n,r,i,s;s=[];for(r=0,i=e.length;r<i;r++)n=e[r],n.setMutualConnectionData(t.getMutualConnectionData()),s.push(n.addSources(t.get("sources")));return s},s.prototype.hasDepartments=function(){var e;return e=18,this.size()>e},s.prototype.setMutualConnections=function(e){return this.mutualConnections=e},s.prototype.getEmployeesByDepartment=function(){var e,t,r,i,s,o,u,a,f,l;this.companyDepartments={};if(this.hasDepartments()){f=this.getNonMutualConnections();for(u=0,a=f.length;u<a;u++){r=f[u];for(t in n)e=n[t],i="",r.get("department")?i=r.get("department"):r.get("snippet")&&(i=r.get("snippet")),s=t===n.OTHER.type&&!r.get("hasDepartment"),o=(l=e.keywords)!=null?l.some(function(e){var t;return i.indexOf("Past.")>=0&&(i=i.slice(0,i.indexOf("Past."))),i.toLowerCase().indexOf(e.toLowerCase())>=0||((t=r.get("title"))!=null?t.toLowerCase().indexOf(e.toLowerCase()):void 0)>=0}):void 0,(s||o)&&this.addEmployeeToDepartment(t,r)}}else this.companyDepartments[n.ALL.type]=n.ALL,this.companyDepartments[n.ALL.type].employees=this.getNonMutualConnections();return this.companyDepartments},s.prototype.getNonMutualConnections=function(){return this.filter(function(e){return!e.isMutualConnection()})},s.prototype.addEmployeeToDepartment=function(e,t){this.companyDepartments[e]==null&&(this.companyDepartments[e]=n[e],this.companyDepartments[e].employees=[]),t.set("hasDepartment",!0),this.companyDepartments[e].employees.push(t)},s.prototype.getMutualConnections=function(){return this.filter(function(e){return e.isMutualConnection()})},s.prototype.triggerCRMRecords=function(){this.sort(),this.trigger("complete:mutualConnections"),this.trigger("complete:companyEmployees")},s.prototype.triggerMutualConnections=function(){this.sort(),this.trigger("complete:mutualConnections"),this.trigger("complete:companyEmployees")},s.prototype.triggerCompanyEmployees=function(){this.trigger("complete:companyEmployees")},s.prototype.setCRMBaseUrl=function(e){this.each(function(t){return t.set("crm_base_url",e)})},s}(Backbone.Collection),i.get=_.once(function(){return new this}),i})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};hubspot.define("sidekick.SidekickSidebar.collections.Connectors",["sidekick.SidekickSidebar.models.contact.Connector"],function(e){var n;return n=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.model=e,r}(Backbone.Collection),n.get=_.once(function(){return new this}),n})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};hubspot.define("sidekick.SidekickSidebar.experiments.blurredStreamNamespace",["hublabs.Experiment","hublabs.Namespace"],function(e,n){var r,i,s;return i=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.setup=function(){return this.setName("BlurredStream")},n.prototype.setupExperiments=function(){return this.addExperiment("BlurredStream",r,5),this.removeExperiment("BlurredStream"),this.addExperiment("BlurredStreamV2",s,25)},n}(n),s=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.setup=function(){return this.version="v2",this.setName("Blurred Stream V2"),this.setAutoExposureLogging(!1)},n.prototype.assign=function(e,t){return e.set("streamType",this.choose(["control","Learn More","See your notifications"]))},n}(e),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.setup=function(){return this.version="v1",this.setName("Blurred Stream"),this.setAutoExposureLogging(!1)},n.prototype.assign=function(e,t){return e.set("streamType",this.choose(["control","Learn More","See your notifications"]))},n}(e),new i({app:"sidekick"})})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};hubspot.define("sidekick.SidekickSidebar.experiments.graphExperimentsNamespace",["hublabs.Experiment","hublabs.Namespace"],function(e,n){var r,i,s;return r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.setup=function(){return this.setName("GraphExperiments")},n.prototype.setupExperiments=function(){return this.addExperiment("ShowRequestUpdatedInfoButton",i,25),this.addExperiment("ShowRequestUpdatedInfoButtonWithExperimentCriteria",s,25)},n.prototype.allowedOverride=function(){var e;return(e=this.inputs.email)==="garidor@hubspot.com"||e==="dwolchonok@hubspot.com"||e==="gvargas@hubspot.com"||e==="mball@hubspot.com"||e==="dgreco@hubspot.com"||e==="mgrace@hubspot.com"||e==="abarry@hubspot.com"||e==="chong@hubspot.com"},n.prototype.getOverrides=function(){return{hasRequestUpdatedInfoButton:{experimentName:"ShowRequestUpdatedInfoButton",value:!0}}},n}(n),i=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.setup=function(){return this.version="v1",this.setName("ShowRequestUpdatedInfoButton"),this.setAutoExposureLogging(!1)},n.prototype.assign=function(e,t){return e.set("hasRequestUpdatedInfoButton",!0)},n}(e),s=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.setup=function(){return this.version="v1",this.setName("ShowRequestUpdatedInfoButtonWithExperimentCriteria"),this.setAutoExposureLogging(!1)},n.prototype.assign=function(e,t){return e.set("showViralInviteButton",this.choose(["invite","network"]))},n}(e),new r({app:"sidekick"})})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};hubspot.define("sidekick.SidekickSidebar.experiments.SidebarInvite2",["hublabs.Experiment"],function(e){var n;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.setup=function(){return this.version="v4",this.setName("SidebarInviteV2"),this.setAutoExposureLogging(!1)},n.prototype.assign=function(e,t){return e.set("invitePosition",this.choose(["header","social"])),e.set("inviteText",this.choose(["selfish","altruistic"]))},n}(e)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};hubspot.define("sidekick.SidekickSidebar.experiments.SidebarInvite3",["hublabs.Experiment"],function(e){var n;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.setup=function(){return this.version="v1",this.setName("SidebarInviteV3"),this.setAutoExposureLogging(!1)},n.prototype.assign=function(e,t){return e.set("invitePosition",this.choose(["header","social"])),e.set("inviteText",this.choose(["selfish","altruistic"]))},n}(e)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};hubspot.define("sidekick.SidekickSidebar.experiments.viralNamespace",["sidekick.SidekickSidebar.experiments.SidebarInvite2","sidekick.SidekickSidebar.experiments.SidebarInvite3","hublabs.Namespace"],function(e,n,r){var i;return i=function(r){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,r),i.prototype.setup=function(){return this.setName("ViralExperiments")},i.prototype.setupExperiments=function(){return this.addExperiment("SidebarInviteV2",e,30),this.removeExperiment("SidebarInviteV2"),this.addExperiment("SidebarInviteV3",n,30),this.removeExperiment("SidebarInviteV3")},i}(r),new i({app:"sidekick"})})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},r=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};hubspot.define("sidekick.SidekickSidebar.models.base.Environment",["jQuery","sidekick.SidekickSidebar.utils.HubSpotApi","sidekick.SidekickSidebar.models.base.User","sidekick.SidekickSidebar.models.base.Stats","sidekick.SidekickSidebar.models.biden.BidenPropertyList"],function(t,i,s,o,u){var a;return a=function(a){function f(){return this.retrieveFreemailDomains=e(this.retrieveFreemailDomains,this),this.registerHubSpotStatuses=e(this.registerHubSpotStatuses,this),this.retrieveHubSpotStatuses=e(this.retrieveHubSpotStatuses,this),f.__super__.constructor.apply(this,arguments)}function l(e){return decodeURI((RegExp(e+"="+"(.+?)(&|$)").exec(location.search)||[,null])[1])}return n(f,a),f.prototype.initializeUser=function(e){var t=this;return this.retrieveData()["finally"](function(){return t.createUser(e)["finally"](function(){return t.user().get("use_hscrm")&&!t.get("isLocal")&&t.retrieveHubSpotStatuses(),t.resetStats(),t.watchSidekickOpen()})})},f.prototype._parseURLParameter=function(e,t,n){var r;return t==null&&(t=null),n==null&&(n=null),r=l(e),r==="true"?!0:r==="false"?!1:r==="null"?n:t!==null?t:r},f.prototype._parseTemplateParameter=function(e,n){var r,i,s;return n==null&&(n=null),r=t('input[name="'+e+'"]'),(r!=null?(i=r.val())!=null?i.toLowerCase():void 0:void 0)==="false"?!1:(r!=null?(s=r.val())!=null?s.toLowerCase():void 0:void 0)==="true"?!0:n!==null?n:(r!=null?r.val():void 0)!=null?r.val():!1},f.prototype.retrieveData=function(){var e,t,n;return this.set("is_user_profile",!1),this.set("user_hash",this._parseURLParameter("user_hash")),this.set("is_gmail",this._parseURLParameter("gmail",e=!1,t=!1)),this.set("gmail_email",this._parseURLParameter("gmail_email",e=null,t=!1)),this.set("isCollapsed",this._parseURLParameter("is_collapsed")),this.has("isLocal")||(n=location.host.indexOf("local")!==-1,this.set("isLocal",this._parseURLParameter("local")||n)),this.set("initial_contact_email",this._parseURLParameter("email")),this.set("initial_contact_name",this._parseURLParameter("name")),this.set("initial_company_domain",this._parseURLParameter("domain")),this.get("initial_contact_email")||this.set("initial_contact_email",this._parseTemplateParameter("contact_email")),this.get("initial_company_domain")||this.set("initial_company_domain",this._parseTemplateParameter("domain")),this.set("is_contact",this.get("initial_contact_email")),this.set("bidenPropertyList",new u({},{environment:this})),Q.all([this.retrieveFreemailDomains(),this.bidenPropertyList().createBidenPropertyList()])},f.prototype.retrieveHubSpotStatuses=function(){var e,t,n=this;this.hubSpotApi=new i,e={},e.type="GET",e.query={isLive:!1},t="companies/v1/properties/hs_lead_status",this.hubSpotApi.apiRequest(this,t,e).then(function(e){return n.registerHubSpotStatuses(e)})["catch"](function(e){return console.error(e)})},f.prototype.registerHubSpotStatuses=function(e){e.error?this.set("hubspotStatuses",[{label:"New",value:"NEW"},{label:"Open",value:"OPEN"},{label:"In Progress",value:"IN_PROGRESS"},{label:"Unqualified",value:"UNQUALIFIED"}]):this.set("hubspotStatuses",e.options),this.set("hubspotLifecycleStages",[{label:"Lead",value:"lead"},{label:"Subscriber",value:"subscriber"},{label:"Marketing Qualified Lead",value:"marketingqualifiedlead"},{label:"Sales Qualified Lead",value:"salesqualifiedlead"},{label:"Opportunity",value:"opportunity"},{label:"Customer",value:"customer"},{label:"Evangelist",value:"evangelist"},{label:"Other",value:"other"}])},f.prototype.createUser=function(e){var t,n=this;return e==null&&(e={}),t=new s(e,{environment:this}),this.set("user",t),t.retrieveUserData().then(function(){return t.registerRavenUser()})},f.prototype.resetStats=function(){return this.set("stats",new o({open:this.open,isCollapsed:this.get("isCollapsed")},{environment:this}))},f.prototype.setCollapsed=function(e){return this.set("isCollapsed",e),this.stats().setCollapsed(e)},f.prototype.watchSidekickOpen=function(){var e=this;t("html").bind("DOMSubtreeModified",function(){if(t("html").width()===245)return t("html").unbind("DOMSubtreeModified"),e.open=!0,e.stats().toggleSidebarOpen()})},f.prototype.staticDomainPrefix=function(){return this.get("isLocal")?location.host.indexOf("qa")!==-1?"//local.getsidekickqa.com":"//local.getsidekick.com":hubspot.bender.staticDomainPrefix},f.prototype.freemailDomainUrl=function(){return""+this.staticDomainPrefix()+"/FreemailDomains/static-1.18/freemail_domains.json"},f.prototype.retrieveFreemailDomains=function(){var e,t,n=this;return t=function(e,t,r){return n.set("freemail_domains",e.FREEMAIL_DOMAINS)},e=function(e,t,r){return n.set("freemail_domains",[])},this.getJSONP({url:this.freemailDomainUrl(),callback:"freemailDomains",success:t,error:e})},f.prototype.getWebappUrl=function(e){var t,n,i;return this.get("user_hash")&&(r.call(e,"?")>=0?n="&":n="?",e=""+e+n+"user_hash="+l("user_hash")),e[0]==="/"&&(e=e.slice(1)),this.get("isLocal")?t=location.host:location.host.indexOf("qa")!==-1?t="app.getsidekickqa.com":t="app.getsidekick.com",i="//"+t+"/"+e,i},f.prototype.getApiUrl=function(e,t){var n,r,i;return r="",location.host.indexOf("qa")!==-1?(t&&(r="hapikey=allowed"),n="api.getsidekickqa.com"):n="api.getsidekick.com",e[0]==="/"&&(e=e.slice(1)),i="//"+n+"/"+e+"?"+r,i},f.prototype.ajax=function(e){var n,i,s,o,u,a,f,l,c,h,p,d,v=this;return u=e.method,p=e.url,i=e.dataType,n=e.data,l=e.success,s=e.error,h=e.suppress_sentry_status_codes,a=e.options,f=Q.defer(),h||(h=[]),o=function(e,t,i){var o,u;return o=new Error("Exit: "+i+" at: "+p+" | "+JSON.stringify(n)),(u=e.status,r.call(h,u)<0)&&i&&(Raven.captureException(o,{extra:{url:p,errorThrown:i,data:n,jqXHR:e}}),console.error(o)),s&&s(e,t,i),f.reject({error:o,statusCode:e!=null?e.status:void 0})},c=function(e,t,n){return l?f.resolve(l(e,t,n)):f.resolve()},d={type:u,dataType:i,url:p,xhrFields:{withCredentials:!0},crossDomain:!0,data:n,success:c,error:o},_.extend(d,a),t.ajax(d),f.promise},f.prototype.headJSON=function(e){var t,n,r,i,s,o;return o=e.url,t=e.data,i=e.success,n=e.error,s=e.suppress_sentry_status_codes,r=e.options,this.ajax({method:"HEAD",url:o,dataType:"json",data:t,success:i,error:n,suppress_sentry_status_codes:s,options:r})},f.prototype.getJSON=function(e){var t,n,r,i,s,o;return o=e.url,t=e.data,i=e.success,n=e.error,s=e.suppress_sentry_status_codes,r=e.options,this.ajax({method:"GET",url:o,dataType:"json",data:t,success:i,error:n,suppress_sentry_status_codes:s,options:r})},f.prototype.getJSONP=function(e){var t,n,r,i,s,o,u;return u=e.url,n=e.data,t=e.callback,s=e.success,r=e.error,o=e.suppress_sentry_status_codes,i=e.options,i||(i={}),i.jsonpCallback||(i.jsonpCallback=t),this.ajax({method:"GET",url:u,dataType:"jsonp",data:n,success:s,error:r,suppress_sentry_status_codes:o,options:i})},f.prototype.postJSON=function(e){var t,n,r,i,s,o;return o=e.url,t=e.data,i=e.success,n=e.error,s=e.suppress_sentry_status_codes,r=e.options,this.ajax({method:"POST",url:o,dataType:"json",data:t,success:i,error:n,suppress_sentry_status_codes:s,options:r})},f.prototype.post=function(e){var t,n,r,i,s,o;return o=e.url,t=e.data,i=e.success,n=e.error,s=e.suppress_sentry_status_codes,r=e.options,this.ajax({method:"POST",url:o,dataType:"text",data:t,success:i,error:n,suppress_sentry_status_codes:s,options:r})},f.prototype.user=function(){return this.get("user")},f.prototype.bidenPropertyList=function(){return this.get("bidenPropertyList")},f.prototype.stats=function(){return this.get("stats")},f.prototype.trackAction=function(e,t){return t==null&&(t={}),this.stats().trackAction(e,t)},f.prototype.trackSidekickAction=function(e,t){return t==null&&(t={}),this.stats().trackSidekickAction(e,t)},f.prototype.postMessage=function(e,t){return window.postMessage({sender:"SIGNALS_WEBAPP",type:e,data:t},"*")},f}(Backbone.Model)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};hubspot.define("sidekick.SidekickSidebar.models.base.Lead",["jQuery","sidekick.SidekickSidebar.utils.HubSpotApi","sidekick.SidekickSidebar.models.recordset.HSCRMRecordSet","sidekick.SidekickSidebar.models.recordset.SalesforceRecordSet","sidekick.SidekickSidebar.models.contact.Invite"],function(t,r,i,s,o){var u;return u=function(r){function u(){return this.isExistingRecord=e(this.isExistingRecord,this),this.getRecordUrl=e(this.getRecordUrl,this),this.getHubspotUrl=e(this.getHubspotUrl,this),this.retrieveCompanySalesforceRecords=e(this.retrieveCompanySalesforceRecords,this),this.getInviteModel=e(this.getInviteModel,this),u.__super__.constructor.apply(this,arguments)}return n(u,r),u.prototype.defaults={status:null,add_lead_state:null,salesforce_instance_url:null,salesforce_error_message:null,can_add_leads:null,is_existing_record:null,is_user_contact:null,dataRetrieved:!1},u.prototype.initialize=function(e,t){return this.environment=t.environment,u.__super__.initialize.call(this,e,t)},u.prototype.reset=function(){return this.set("record_url",null),this.set("is_existing_record",null)},u.prototype.retrieveData=function(){return this.set("dataRetrieved",!0)},u.prototype.getInviteModel=function(){return new o({email:this.get("email")},{environment:this.environment})},u.prototype.retrieveCompanySalesforceRecords=function(){var e,t,n=this;return t=this.environment.getWebappUrl("/sidebar/companies/"+this.get("domain")+"/lead_status.json"),e=function(e,t,r){return n.registerLeadStatus(e)},this.environment.getJSON({url:t,success:e})},u.prototype.getHubspotUrl=function(){return this.get("crm_base_url")+"/"+this.get("id")},u.prototype.getRecordUrl=function(){return this.get("record_url")?this.get("record_url"):this.getHubspotUrl()},u.prototype.isExistingRecord=function(){return this.get("is_existing_record")},u.prototype.registerHSCRMStatus=function(e){var t,n,r,s,o,u,a,f,l,c,h,p,d,v,m,g,y;this.set("hubspot_base_url",e.hubspot_base_url),this.set("crm_base_url",e.hubspot_base_url),s=new i({},{environment:this.environment});if(e.companySet){d=e.companySet;for(o=0,l=d.length;o<l;o++){t=d[o],this.get("is_existing_record")||(this.set("id","company/"+t.companyId),this.set("is_existing_record",!0)),t.crm_base_url=e.hubspot_base_url,s.addCompany(t);if(t.dealSet&&t.dealSet.deals){v=t.dealSet.deals;for(u=0,c=v.length;u<c;u++)r=v[u],r.crm_base_url=e.hubspot_base_url,s.addDeal(r)}if(t.contactSet&&t.contactSet.contacts){m=t.contactSet.contacts;for(a=0,h=m.length;a<h;a++)n=m[a],n.crm_base_url=e.hubspot_base_url,s.addContact(n)}}}else if(e.contactSet&&e.contactSet.contacts){g=e.contactSet.contacts;for(f=0,p=g.length;f<p;f++)n=g[f],n.crm_base_url=e.hubspot_base_url,s.addContact(n),((y=n["properties"]["email"])!=null?y.value.toLowerCase():void 0)===this.get("email").toLowerCase()&&(this.set("id","contact/"+n.vid),this.set("is_existing_record",!0))}this.get("is_existing_record")||this.set("is_existing_record",!1),this.set("existing_records",s)},u.prototype.removeRecords=function(){var e,t,n,r,i,s,o,u,a,f;e=this.get("existing_records");if(e&&e.toJSON()){while(t=(n=e.get("object_primary"))!=null?n.first():void 0)t.set("id",null),t.destroy();(r=e.get("object_primary"))!=null&&r.reset();while(t=(i=e.get("object_secondary"))!=null?i.first():void 0)t.set("id",null),t.destroy();(s=e.get("object_secondary"))!=null&&s.reset();while(t=(o=e.get("object_tertiary"))!=null?o.first():void 0)t.set("id",null),t.destroy();(u=e.get("object_tertiary"))!=null&&u.reset();while(t=(a=e.get("object_quaternary"))!=null?a.first():void 0)t.set("id",null),t.destroy();(f=e.get("object_quaternary"))!=null&&f.reset()}return this.set("existing_records",null)},u.prototype.registerLeadStatus=function(e){var n,r,i,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T=this;this.set("add_lead_state",e.input_lead_status),this.set("salesforce_instance_url",e.salesforce_instance_url),this.set("can_add_leads",e.can_add_leads),window.localStorage.can_add_leads=e.can_add_leads;try{this.set("salesforce_error_message",t.parseJSON(e.error))}catch(N){this.set("salesforce_error_message",[{error:!0,message:e.error}])}this.set("status",e.lead_status),i=new s({salesforce_instance_url:e.salesforce_instance_url},{environment:this.environment});if(e.existing_records){if(e.existing_records.leads){g=e.existing_records.leads;for(f=0,p=g.length;f<p;f++)o=g[f],i.addLead(o)}if(e.existing_records.opportunities){y=e.existing_records.opportunities;for(l=0,d=y.length;l<d;l++)u=y[l],i.addOpportunity(u)}if(e.existing_records.accounts){b=e.existing_records.accounts;for(c=0,v=b.length;c<v;c++)n=b[c],i.addAccount(n)}if(e.existing_records.contacts){e.existing_records.contacts>0&&(a=this.model),w=e.existing_records.contacts;for(h=0,m=w.length;h<m;h++)r=w[h],i.addContact(r)}!a&&this.get("companyObject")&&((E=this.get("companyObject").get("existing_records"))!=null?E.get("contacts"):void 0)!=null&&(a=this.get("companyObject")),a&&(S=a.get("existing_records"))!=null&&(x=S.get("contacts"))!=null&&x.each(function(e){var t,n;if((e!=null?(t=e.get("email"))!=null?t.toLowerCase():void 0:void 0)===((n=T.get("email"))!=null?n.toLowerCase():void 0))return T.existing_record=e.getSalesforceUrl(),T.set("is_existing_record",!0)})}return this.get("is_existing_record")||this.set("is_existing_record",!1),this.set("existing_records",i),this.trigger("change:existing_records"),this.trigger("change")},u}(Backbone.Model)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};hubspot.define("sidekick.SidekickSidebar.models.base.Property",[],function(){var e;return e=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(e,t){this.parent=t.parent,this.set("interpreted_value",this.parent.get(e.property))},n.prototype.label=function(){return this.get("label")},n.prototype.isEditable=function(){return!this.get("readonly")},n.prototype.isReadable=function(){return!this.get("editonly")},n.prototype.isLink=function(){return this.has("link")},n.prototype.hasValue=function(){return this.get("value")!==void 0&&this.get("value")!==null&&this.get("rawvalue")!==!1},n}(Backbone.Model)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};hubspot.define("sidekick.SidekickSidebar.models.base.Stats",[],function(){var e;return e=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.defaults={track_complete:!1,open:null,track_view_url:"/track/sidebar/view",track_action_url:"/track/json",static_version:hubspot.bender.currentProjectVersion.replace("static-",""),is_collapsed:null},n.prototype.initialize=function(e,t){var n,r;return this.environment=t.environment,this.properties={open:this.get("open"),is_gmail:this.environment.get("is_gmail")},this.optionalProperties={is_collapsed:this.environment.get("isCollapsed"),static_version:this.get("static_version"),email:this.environment.user().email(),is_freemail:this.environment.user().get("is_freemail"),pro_authorized:this.environment.user().get("pro_authorized"),in_first_week:this.environment.user().get("in_first_week"),subdomain:window.location.host.split(".")[0]},r={has_contact_socialintel_data:null,has_contact_stream_data:null,is_contact:!0},n={has_contacts:null,has_company_data:null},this.environment.user().isLoggedIn()?(this.properties.is_logged_in=!0,this.environment.get("is_contact")===!0?_.extend(this.properties,r):_.extend(this.properties,n)):this.properties.is_logged_in=!1,this.environment.has("gmail_email")&&(this.properties.gmail_email=this.environment.get("gmail_email")),this},n.prototype.toggleSidebarOpen=function(){return this.properties.open=!0,this.postStats()},n.prototype.setCollapsed=function(e){return this.optionalProperties.is_collapsed=e},n.prototype.setHasContacts=function(e){return this.properties.has_contacts=e,this.postStats()},n.prototype.setHasCompanyData=function(e){return this.properties.has_company_data=e,this.postStats()},n.prototype.setHasContactSocialIntelData=function(e){return this.properties.has_contact_socialintel_data=e,this.postStats()},n.prototype.setHasContactStreamData=function(e){return this.properties.has_contact_stream_data=e,this.postStats()},n.prototype.postStats=function(){var e;if(!this.environment.get("is_user_profile")&&!this.get("track_complete")&&_.every(_.values(this.properties),function(e){return e!=null}))return this.get("is_gmail")?console.debug("INSIGHTS: View in Gmail"):console.debug("INSIGHTS: View"),this.set("track_complete",!0),e=this.properties,_.extend(e,this.optionalProperties),this.environment.post({url:this.environment.getWebappUrl(this.get("track_view_url")),data:e}).done()},n.prototype.trackSidekickAction=function(e,t){var n,r,i;return t==null&&(t={}),r={action:e},_.extend(r,this.optionalProperties),_.extend(r,t),i=this.environment.getWebappUrl(this.get("track_action_url")),n=JSON.stringify(r),this.environment.post({url:i,data:n,options:{processData:!1}}).done()},n.prototype.trackAction=function(e,t){var n,r,i,s;return t==null&&(t={}),r={action:e},_.extend(r,this.optionalProperties),_.extend(r,t),i=this.environment.getWebappUrl(this.get("track_action_url")),n=JSON.stringify(r),(s=window.mixpanel)!=null&&s.track(e,_.clone(this.optionalProperties)),this.environment.post({url:i,data:n,options:{processData:!1}}).done()},n}(Backbone.Model)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};hubspot.define("sidekick.SidekickSidebar.models.base.User",["jQuery","hublabs.ExperimentSetup"],function(t,r){var i;return i=function(t){function i(){return this.isLoggedIn=e(this.isLoggedIn,this),this._setUserNotLoggedIn=e(this._setUserNotLoggedIn,this),this.toggleCRM=e(this.toggleCRM,this),i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.defaults={is_logged_in:!0},i.prototype.initialize=function(e,t){return this.environment=t.environment},i.prototype.url=function(){return this.environment.getWebappUrl("/sidebar/user/properties.json")},i.prototype.email=function(){return this.get("email")},i.prototype.getDomain=function(){var e,t;return e=this.get("email"),e?(t=e.split("@"))!=null?t[1]:void 0:null},i.prototype.retrieveUserData=function(){var e,t,n=this;return t=function(e,t,r){return n.registerUserData(e)},e=function(e,t,r){if(e.status===401
)return n._setUserNotLoggedIn()},this.environment.getJSON({url:this.url(),success:t,error:e,suppress_sentry_status_codes:[401]})},i.prototype.registerUserData=function(e){var t,n,i;r.registerUser(e.tracking_key),r.registerArbitraryProps("email",e.email),e.has_java_stream=!this.environment.get("isLocal"),e.use_hscrm=e.has_hubspot&&(e.hscrm_preferred||!e.has_salesforce),e.use_salesforce=e.has_salesforce&&!e.use_hscrm,i=[];for(t in e)n=e[t],this.has(t)?i.push(void 0):i.push(this.set(t,n));return i},i.prototype.registerRavenUser=function(){return Raven.setUser({id:this.get("user_key"),email:this.email()})},i.prototype.toggleCRM=function(){var e,t,n=this;return t=this.environment.getWebappUrl("/user/hscrm/toggle"),e=function(e,t,r){return n.set("hscrm_preferred",e.hscrm_preferred),n.set("use_hscrm",e.hscrm_preferred),n.set("use_salesforce",!e.hscrm_preferred),n.environment.trigger("refreshAll")},this.environment.postJSON({url:t,success:e})},i.prototype._setUserNotLoggedIn=function(){var e;return e={is_logged_in:!1,has_java_stream:!0,has_hubspot:!1,has_salesforce:!1,use_hscrm:!1,use_salesforce:!1,is_logged_in:!1,has_dispute_ui:!1},this.set(e)},i.prototype.isLoggedIn=function(){return this.get("is_logged_in")},i}(Backbone.Model)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};hubspot.define("sidekick.SidekickSidebar.models.biden.BidenPropertyList",["jQuery"],function(e){var n;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.defaults={properties:[],property_mapping:[{sidekickProperty:"company_name",bidenProperty:"name"},{sidekickProperty:"twitter_name",bidenProperty:"twitterusername"},{sidekickProperty:"facebook_url",bidenProperty:"facebookpageurl"},{sidekickProperty:"linkedin_url",bidenProperty:"linkedinurl"},{sidekickProperty:"blogurl",bidenProperty:"blogurl"},{sidekickProperty:"zipcode",bidenProperty:"zipcode"},{sidekickProperty:"address1",bidenProperty:"address1"},{sidekickProperty:"address2",bidenProperty:"address2"},{sidekickProperty:"address",bidenProperty:"address"},{sidekickProperty:"city",bidenProperty:"city"},{sidekickProperty:"country",bidenProperty:"country"},{sidekickProperty:"revenue",bidenProperty:"revenue"},{sidekickProperty:"employees",bidenProperty:"employees"},{sidekickProperty:"founded",bidenProperty:"foundedyear"},{sidekickProperty:"state",bidenProperty:"state"},{sidekickProperty:"phone_number",bidenProperty:"phonenumber"},{sidekickProperty:"industry",bidenProperty:"industry"},{sidekickProperty:"industrycode",bidenProperty:"industrycode"}]},n.prototype.initialize=function(e,t){this.environment=t.environment,this.url=this.environment.getApiUrl("biden/v1/properties",!0)},n.prototype.createBidenPropertyList=function(){var e,t,n=this;t=function(){var e,t;return t=function(e,t,r){return n.set("properties",e)},e=function(e,t,r){return n.set("properties",[])},n.environment.getJSON({url:n.url,success:t,error:e})},e=function(){return _.each(n.get("property_mapping"),function(e){var t;return(t=n._findPropertyByBidenName(e.bidenProperty))!=null?t.sidekickPropertyName=e.sidekickProperty:void 0})},t().then(function(){return e()})},n.prototype._findPropertyBySidekickName=function(e){return _.findWhere(this.get("properties"),{sidekickPropertyName:e})},n.prototype._findPropertyByBidenName=function(e){return _.findWhere(this.get("properties"),{name:e})},n.prototype.getPropertyBidenName=function(e){var t;return(t=this._findPropertyBySidekickName(e))!=null?t.name:void 0},n.prototype.getPropertyOptions=function(e){var t;return(t=this._findPropertyBySidekickName(e))!=null?t.options:void 0},n.prototype.getPropertyList=function(){return this.get("properties")},n}(Backbone.Model)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};hubspot.define("sidekick.SidekickSidebar.models.biden.Dispute",[],function(){var e;return e=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.defaults={source:"SIDEKICK_SIDEBAR_USER"},n.prototype.initialize=function(e,t){return this.environment=t.environment,this.set("disputedBy",this.environment.user().get("email"))},n}(Backbone.Model)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};hubspot.define("sidekick.SidekickSidebar.models.biden.Disputes",["jQuery","sidekick.SidekickSidebar.models.biden.Dispute"],function(t,r){var i;return i=function(t){function i(){return this.save=e(this.save,this),i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.model=r,i.prototype.initialize=function(e,t){return this.environment=t.environment,this.domain=t.domain},i.prototype.url=function(){return this.environment.getApiUrl("/biden/v1/disputes/"+this.domain+"/batch",!0)},i.prototype.save=function(){var e,t=this;return e=function(){return t.environment.trackAction('Sidekick: "Submitted Dispute"')},this.environment.postJSON({url:this.url(),data:JSON.stringify(this.toJSON()),success:e,options:{contentType:"application/json"}})},i}(Backbone.Collection)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};hubspot.define("sidekick.SidekickSidebar.models.company.Company",["jQuery","sidekick.SidekickSidebar.models.base.Lead","sidekick.SidekickSidebar.models.contact.Employee","sidekick.SidekickSidebar.models.contact.ContactSources","sidekick.SidekickSidebar.collections.CompanyEmployees"],function(t,r,i,s,o){var u;return u=function(r){function u(){return this.setLocalTime=e(this.setLocalTime,this),this.registerCompanyData=e(this.registerCompanyData,this),this.registerRelatedCompanies=e(this.registerRelatedCompanies,this),this.registerEmployees=e(this.registerEmployees,this),this.registerCompanyConnectionData=e(this.registerCompanyConnectionData,this),this.retrieveCompanyConnectionData=e(this.retrieveCompanyConnectionData,this),this.addEmployee=e(this.addEmployee,this),this.addMutualConnection=e(this.addMutualConnection,this),this.retrieveCompanyData=e(this.retrieveCompanyData,this),this.retrieveCompanyHSCRMRecords=e(this.retrieveCompanyHSCRMRecords,this),this.retrieveCompanySalesforceRecords=e(this.retrieveCompanySalesforceRecords,this),this.fillCRMContactData=e(this.fillCRMContactData,this),this.retrieveData=e(this.retrieveData,this),u.__super__.constructor.apply(this,arguments)}return n(u,r),u.prototype.initialize=function(e,t){var n;return u.__super__.initialize.call(this,e,t),this.environment=t.environment,this.set("type","company"),this.set("source_id_name","sourceId"),n=new o(null,t),this.set("companyEmployees",n),this},u.prototype.retrieveData=function(){var e;return u.__super__.retrieveData.apply(this,arguments),e=[this.retrieveCompanyData(),this.retrieveCompanyConnectionData()],this.environment.user().get("use_hscrm")?e.push(this.retrieveCompanyHSCRMRecords()):this.environment.user().get("use_salesforce")&&e.push(this.retrieveCompanySalesforceRecords()),Q.all(e)},u.prototype.fillCRMContactData=function(){var e,t,n=this;return(e=this.get("existing_records"))!=null&&(t=e.get("contacts"))!=null&&t.each(function(e){var t;return t=e.pick(s.CRM.propertyNames),n.get("companyEmployees").fillCRMData(t)}),this.get("companyEmployees").triggerCRMRecords()},u.prototype.retrieveCompanySalesforceRecords=function(){var e=this;return u.__super__.retrieveCompanySalesforceRecords.call(this).then(function(){return e.fillCRMContactData()})},u.prototype.retrieveCompanyHSCRMRecords=function(){var e,t,n=this;return t=this.environment.getWebappUrl("/sidebar/companies/"+this.get("domain")+"/hscrm/records.json"),e=function(e,t,r){return n.registerHSCRMStatus(e),n.get("companyEmployees").setCRMBaseUrl(n.get("crm_base_url"))},this.environment.getJSON({url:t,success:e})},u.prototype.registerHSCRMStatus=function(e){u.__super__.registerHSCRMStatus.call(this,e),this.fillCRMContactData()},u.prototype.retrieveCompanyData=function(){var e,t,n,r=this;return this.set("company_data_status","loading"),n=this.environment.getApiUrl("biden/v1/companies/"+this.get("domain"),!0),t=function(e,t,n){return e&&typeof e=="object"&&Object.keys(e).length?r.registerCompanyData(e):r.registerCompanyData({error:!0})},e=function(e,t,n){return r.registerCompanyData({error:!0})},this.environment.getJSON({url:n,success:t,error:e,suppress_sentry_status_codes:[404,401]})},u.prototype.addMutualConnection=function(e){var t;return this.addEmployee(e,t=[s.GRAPH])},u.prototype.addEmployee=function(e,t){var n;return t==null&&(t=[s.BIDEN]),_.extend(e,{domain:this.get("domain"),company_name:this.get("company_name"),companyObject:this,crm_base_url:this.get("crm_base_url"),sources:t}),e.phone_number||(e.phone_number=this.get("phone_number")),n=new i(e,{environment:this.environment}),this.get("companyEmployees").add(n),this.trigger("change:companyEmployees"),n},u.prototype.retrieveCompanyConnectionData=function(){var e,t,n=this;return this.environment.user().get("has_inbox_connected")?(t=this.environment.getApiUrl("/graph/v1/companies/"+this.get("domain")+"/connections/connectors/count",!1),e=function(e,t,r){return n.registerCompanyConnectionData(e)},this.environment.getJSON({url:t,success:e,suppress_sentry_status_codes:[404]})):this.registerCompanyConnectionData(null)},u.prototype.registerCompanyConnectionData=function(e){var t,n,r;if((e!=null?e.length:void 0)>0)for(n=0,r=e.length;n<r;n++)t=e[n],this.addMutualConnection(t);this.get("companyEmployees").triggerMutualConnections()},u.prototype.registerEmployees=function(e){var t,n,r;for(n=0,r=e.length;n<r;n++)t=e[n],this.addEmployee(t);this.get("companyEmployees").triggerCompanyEmployees(),this.environment.stats().setHasContacts(e.length>0)},u.prototype.registerRelatedCompanies=function(e){return this.set("related_companies",e)},u.prototype.registerCompanyData=function(e){var n,r,i,s,o,u,a;if(e.error){this.set("company_data_status","error"),this.set("company_contacts","none"),this.set("related_companies",[]);return}this.set("domain",e.domain);if(e.properties){a=this.environment.bidenPropertyList().getPropertyList();for(o=0,u=a.length;o<u;o++)i=a[o],s=i.sidekickPropertyName!=null?i.sidekickPropertyName:i.name,e.properties[i.name]&&this.set(s,e.properties[i.name]);e.properties.timezone!=null&&this.setLocalTime(e.properties.timezone),this.set("overview",t("<div/>").html(e.properties.overview).text())}this.registerEmployees(e.contacts),this.registerRelatedCompanies(e.relatedCompanies),this.set("company_data_status","loaded"),this.get("is_user_contact")||(n=12,r=e.properties&&Object.keys(e.properties).length>n,this.environment.stats().setHasCompanyData(r))},u.prototype.setLocalTime=function(e){var t,n,r=this;n=function(){r.set("local_time",moment().tz(e).format("h:mm A"))},n(),t=6e4,window.setInterval(n,t)},u}(r)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};hubspot.define("sidekick.SidekickSidebar.models.contact.Connector",["jQuery"],function(e){var n;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(e,t){return this.environment=t.environment},n.prototype.getAvatarUrl=function(){return this.get("connectorAvatarURL").length>0?this.get("connectorAvatarURL")[0]:""+hubspot.bender.staticDomainPrefix+"/SidekickSidebar/static-1.279/img/avatar.png"},n}(Backbone.Model)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},r=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};hubspot.define("sidekick.SidekickSidebar.models.contact.Contact",["jQuery","sidekick.SidekickSidebar.utils.HubSpotApi","sidekick.SidekickSidebar.models.base.Lead","sidekick.SidekickSidebar.models.contact.Connector","sidekick.SidekickSidebar.collections.Connectors"],function(t,i,s,o,u){var a;return a=function(t){function s(){return this.sendUpdateInfoRequest=e(this.sendUpdateInfoRequest,this),this.retrieveUpdateInfoRequest=e(this.retrieveUpdateInfoRequest,this),this.registerConnectionData=e(this.registerConnectionData,this),this.retrieveConnectionData=e(this.retrieveConnectionData,this),this.formatGAEActivityData=e(this.formatGAEActivityData,this),this.formatJavaActivityData=e(this.formatJavaActivityData,this),this.formatActivityData=e(this.formatActivityData,this),this.retrieveStreamData=e(this.retrieveStreamData,this),this.registerSocialIntel=e(this.registerSocialIntel,this),this.retrieveSocialIntel=e(this.retrieveSocialIntel,this),this.registerContactHSMCRMData=e(this.registerContactHSMCRMData,this),this.retrieveCompanyHSCRMData=e(this.retrieveCompanyHSCRMData,this),this.retrieveContactHSCRMData=e(this.retrieveContactHSCRMData,this),this.retrieveData=e(this.retrieveData,this),s.__super__.constructor.apply(this,arguments)}return n(s,t),s.prototype.initialize=function(e,t){var n;return s.__super__.initialize.call(this,e,t),this.set("type","contact"),this.set("source_id_name","source-id"),this.set("avatar_url",this.getAvatarUrl()),e.email!=null&&this.set("email",decodeURIComponent((n=e.email)!=null?n.toLowerCase():void 0)),this._resetFullName(),this.SUPPORTED_ACTIVITY_TYPES=["EMAIL_OPEN","EMAIL_CLICK","HUBSPOT_REVISIT","SALESFORCE","PRESENTATION_REVISIT"],t.domain&&this.set("domain",t.domain),!e.domain&&e.email&&this.set("domain",e.email.split("@")[1]),this.set("no-reply",this.isNoReplyEmail()),this},s.prototype._resetFullName=function(){var e;this.get("first_name")&&(this.set("firstName",this.get("first_name")),this.unset("first_name")),this.get("last_name")&&(this.set("lastName",this.get("last_name")),this.unset("last_name")),this.get("name")&&!this.hasFullName()?(e=this.get("name").split(" "),this.set("firstName",e[0]),this.set("lastName",e[e.length-1])):!this.has("name")&&this.hasFullName()&&this.set("name",this.get("firstName")+" "+this.get("lastName"))},s.prototype.hasFullName=function(){return this.get("firstName")&&this.get("lastName")},s.prototype.isNoReplyEmail=function(){var e,t,n,r=this;return e=["noreply","no-reply","donotreply","do-not-reply","support@","info@","daemon@"],t=(n=this.get("email"))!=null?n.replace(/-/g,""):void 0,_.some(e,function(e){return(t!=null?t.toLowerCase().indexOf(e):void 0)>-1})},s.prototype.setNoReplyData=function(){this.set("name",null),this.set("title","No contact information.")},s.prototype.getAvatarUrl=function(){return"//api.hubapi.com/socialintel/v1/avatars?email="+this.get("email")},s.prototype.retrieveData=function(){var e;return s.__super__.retrieveData.apply(this,arguments),e=[],this.get("no-reply")?e.push(this.setNoReplyData()):(e.push(this.retrieveSocialIntel()),this.environment.user().isLoggedIn()&&(this.environment.user().get("use_hscrm")?(e.push(this.retrieveContactHSCRMData()),e.push(this.retrieveCompanyHSCRMData())):this.environment.user().get("use_salesforce")&&e.push(this.retrieveCompanySalesforceRecords()),this.get("email")&&e.push(this.retrieveStreamData())),this.has("companyObject")&&(this.get("companyObject").get("dataRetrieved")||e.push(this.get("companyObject").retrieveData()))),Q.all(e)},s.prototype.retrieveContactHSCRMData=function(){var e,t,n=this;this.hubSpotApi=new i,e={},e.type="POST",e.data=JSON.stringify({offset:0,count:50,filterGroups:[{filters:[{property:"email",value:this.get("email"),propertySuffix:"raw",operator:"EQ"}]}]}),t="contacts/search/v1/search/contacts",this.hubSpotApi.apiRequest(this.environment,t,e).then(function(e){return n.registerContactHSMCRMData(e)})["catch"](function(e){return console.error(e)})},s.prototype.retrieveCompanyHSCRMData=function(){var e,t,n=this;return t=this.environment.getWebappUrl("/sidebar/contacts/"+this.get("email")+"/hscrm/records.json"),e=function(e,t,r){return n.registerHSCRMStatus(e)},this.environment.getJSON({url:t,success:e})},s.prototype.registerContactHSMCRMData=function(e){var t,n,r,i,s,o,u;if(!e||e.total<1){this.set("hscrm-properties",!1);return}t=e.contacts[0].properties,this.set("hscrm-properties",t),((n=t.jobtitle)!=null?n.value:void 0)&&this.set("title",t.jobtitle.value),((r=t.firstname)!=null?r.value:void 0)&&((i=t.lastname)!=null?i.value:void 0)&&(this.set("firstname",t.firstname.value),this.set("lastname",t.lastname.value),this.set("name",""+t.firstname.value+" "+t.lastname.value)),((s=t.lifecyclestage)!=null?s.value:void 0)&&this.set("lifecycle_stage",t.lifecyclestage.value),((o=t.phone)!=null?o.value:void 0)&&this.set("phone_number",t.phone.value),((u=t.website)!=null?u.value:void 0)&&this.set("website",t.website.value)},s.prototype.retrieveSocialIntel=function(){var e,t,n=this;return t=this.environment.getWebappUrl("/sidebar/contacts/"+this.get("email")+"/socialintel.json"),e=function(e,t,r){return n.registerSocialIntel(e)},this.environment.getJSON({url:t,success:e})},s.prototype.registerSocialIntel=function(e){var t,n,r,i,s,o,u,a,f;i=[{typeid:"email",typename:"email",iconname:"icon-envelope",url:""+this.get("email"),email:!0}],e.facebookDetails&&(e.facebookDetails.gender&&this.set("gender",e.facebookDetails.gender),e.facebookDetails.name&&this.set("name",e.facebookDetails.name),e.facebookDetails.url&&this.set("facebook_url",e.facebookDetails.url),e.facebookDetails.username&&this.set("facebook_username",e.facebookDetails.username));if(e.fullcontactDetails){e.fullcontactDetails.contactinfo&&(e.fullcontactDetails.contactinfo.fullname&&!this.get("name")&&this.set("name",e.fullcontactDetails.contactinfo.fullname),e.fullcontactDetails.contactinfo.websites&&!this.get("website")&&e.fullcontactDetails.contactinfo.websites[0]&&this.set("website",e.fullcontactDetails.contactinfo.websites[0].url)),e.fullcontactDetails.demographics&&(e.fullcontactDetails.demographics.age&&!this.get("age")&&this.set("age",e.fullcontactDetails.demographics.age),e.fullcontactDetails.demographics.locationgeneral&&!this.get("location")&&this.set("location",e.fullcontactDetails.demographics.locationgeneral),e.fullcontactDetails.demographics.gender&&!this.get("gender")&&this.set("gender",e.fullcontactDetails.demographics.gender)),e.fullcontactDetails.organizations&&(this.set("organizations",e.fullcontactDetails.organizations),e.fullcontactDetails.organizations[0]&&(e.fullcontactDetails.organizations[0].title&&!this.get("title")&&this.set("title",e.fullcontactDetails.organizations[0].title),e.fullcontactDetails.organizations[0].name&&!this.get("company_name")&&this.set("company_name",e.fullcontactDetails.organizations[0].name)));if(e.fullcontactDetails.socialprofiles){a=e.fullcontactDetails.socialprofiles;for(n=o=0,u=a.length;o<u;n=++o){r=a[n];if((f=r.typeid)==="twitter"||f==="linkedin"||f==="facebook"||f==="digg"||f==="foursquare"||f==="youtube")r.iconname="icon-"+r.typeid,r.typeid==="youtube"&&(r.iconname="icon-youtube-play"),r.typeid==="twitter"&&(this.get("twitter_name")||this.set("twitter_name",r.username)),i.push(r);!this.get("description")&&r.bio&&(s=document.createElement("div"),s.innerHTML=r.bio,this.set("description",s.innerText))}}}e.twitterDetails&&(e.twitterDetails.name&&!this.get("name")&&this.set("name",e.twitterDetails.name),e.twitterDetails.url&&this.set("twitter_url",e.twitterDetails.url),e.twitterDetails.screenname&&(this.get("twitter_name")||this.set("twitter_name",e.twitterDetails.screenname)),e.twitterDetails.description&&(this.set("twitter_description",e.twitterDetails.description),this.set("description",e.twitterDetails.description)),e.twitterDetails.location&&this.set("location",e.twitterDetails.location)),this.set("social_profiles",i),this._resetFullName(),this.get("is_user_contact")||(t=this.has("socialprofiles")||this.has("title")||this.has("description"),this.environment.stats().setHasContactSocialIntelData(t===!0))},s.prototype.retrieveStreamData=function(e){var t,n,r,i=this;if(!e){if(this.environment.get("is_user_profile")||this.get("email")===this.environment.user().get("email")){this.set("activities",[]);return}r=this.environment.getApiUrl("/signals/v1/activities/index/SECONDARY/"+this.get("email"),!0)}else r=this.environment.getWebappUrl("/aggregate-stream.json?email="+this.get("email"));return n=function(e,t,n){return e.activities&&e.activities.length>0?(i.set("activities",i.formatActivityData(e)),i.environment.stats().setHasContactStreamData(!0)):(i.set("activities",[]),i.environment.stats().setHasContactStreamData(!1))},t=function(t,n,r){if(!e)return typeof console!="undefined"&&console!==null&&console.error("Error accessing "+window.api_base+" for stream. Using GAE stream instead."),i.retrieveStreamData(e=!0)},this.environment.getJSON({url:r,success:n,error:t})},s.prototype.formatActivityData=function(e){return e.after!=null?this.formatJavaActivityData(e.activities):this.formatGAEActivityData(e.activities)},s.prototype.formatJavaActivityData=function(e){var t,n,i,s,o,u,a,f;n=function(e){var t,n,r,i,s,o;if(e.object_link){t="",n="";if((i=e.source)!=null?i.email:void 0)t=e.source.email;((s=e.source)!=null?s.name:void 0)&&((o=e.source)!=null?o.is_exact:void 0)&&(n=e.source.name),r=""+e.verb+" <a class='activity-link view-contact-action' data-email='"+t+"' data-name='"+n+"' href='"+e.object_link+"' target='_blank'>"+e.object+"</a>"}else r=""+e.verb+" "+e.object;return r},i=[];for(s=0,o=e.length;s<o;s++)t=e[s],!t.deleted&&(u=t.type,r.call(this.SUPPORTED_ACTIVITY_TYPES,u)>=0)&&(t.computed_email=(a=t.source)!=null?a.email:void 0,t.computed_avatar_url=t.avatar_url,t.computed_avatar_url||(t.computed_avatar_url="//api.hubapi.com/socialintel/v1/avatars?email="+t.computed_email),t.name=(f=t.source)!=null?f.name:void 0,t.name||(t.name=t.computed_email),t.created||(t.created=t.timestamp),t.type==="EMAIL_OPEN"?(t.verb="Opened",t.icon="icon-envelope"):t.type==="EMAIL_CLICK"?(t.verb="Clicked",t.icon="icon-link"):t.type==="HUBSPOT_REVISIT"?(t.verb="Visited",t.icon="icon-sprocket"):t.type==="SALESFORCE"?(t.verb="Became",t.icon="icon-salesforce"):t.type==="PRESENTATION_REVISIT"&&(t.verb="Viewed",t.icon="icon-play"),t.story||(t.story=n(t)),i.push(t));return i},s.prototype.formatGAEActivityData=function(e){var t,n,r,i;n=[];for(r=0,i=e.length;r<i;r++)t=e[r],t.stream_display&&(t.activity_type==="EMAILOPEN"?t.icon="icon-envelope":t.activity_type==="EMAILCLICK"?t.icon="icon-link":t.activity_type==="HUBSPOT_REVISIT"?t.icon="icon-sprocket":t.activity_type==="SALESFORCE"?t.icon="icon-salesforce":t.formatted_activity_type=t.activity_type,n.push(t));return n},s.prototype.retrieveConnectionData=function(){var e,t,n,r=this;return n=this.environment.getApiUrl("/graph/v1/companies/connections/"+this.get("email")+"/connectors/profiles",!1),t=function(e,t,n){return r.registerConnectionData(e)},e=function(e,t,n){},this.environment.getJSON({url:n,success:t,error:e,suppress_sentry_status_codes:[404]})},s.prototype.registerConnectionData=function(e){var t,n,r,i,s,a,f;if((e!=null?e.connectorProfiles:void 0)!=null){r=new u,f=e.connectorProfiles;for(s=0,a=f.length;s<a;s++)t=f[s],n={connectorName:t.name,connectorEmail:t.email,connectorTitle:t.jobTitle,lastContactDate:this.getLastTouchDate(t.last_interaction),connectorAvatarURL:t.avatarUrls},i=new o(n,{environment:this.environment}),r.add(i,{environment:this.environment})}this.set("connectors",r)},s.prototype.getLastTouchDate=function(e){return e?moment(e).format("MM-DD-YYYY"):null},s.prototype.retrieveUpdateInfoRequest=function(){var e,t,n,r=this;return n=this.environment.getApiUrl("graph/v1/profiles/"+this.get("email")+"/update-requests",!1),t=function(e,t,n){return r.set("hasPendingUpdateInfoRequest",!0)},e=function(e,t,n){return r.set("hasPendingUpdateInfoRequest",!1)},this.environment.headJSON({url:n,success:t,error:e,suppress_sentry_status_codes:[404]})},s.prototype.sendUpdateInfoRequest=function(e,t){var n;return n=this.environment.getApiUrl("graph/v1/profiles/"+this.get("email")+"/update-requests",!1),this.environment.postJSON({url:n,success:e,error:t})},s}(s)})}.call(this),function(){hubspot.define("sidekick.SidekickSidebar.models.contact.ContactSources",[],function(){var e,t;return t=3,e={USER:{type:"USER",displayPriority:0},CRM:{type:"CRM",displayPriority:1,propertyNames:["id","firstName","lastName","email","phone_number","title","crm_base_url","company_name"]},GRAPH:{type:"GRAPH",displayPriority:2,propertyNames:["last_received","last_sent","last_touch","owner_email","email","connectors_count","connectors"]},BIDEN:{type:"BIDEN",displayPriority:t}}})}.call(this),function(){hubspot.define("sidekick.SidekickSidebar.models.contact.DepartmentTypes",[],function(){var e;return e={EXECUTIVE:{type:"EXECUTIVE",label:"Executive",displayOrder:0,keywords:["VP","founder","founding","executive","CEO","CTO","CMO","CFO","officer","director","president","general manager"]},MARKETING:{type:"MARKETING",label:"Marketing",displayOrder:1,keywords:["marketing","marketer","inbound","growth","advertising","advertiser","content","blog"]},SALES:{type:"SALES",label:"Sales",displayOrder:2,keywords:["sales","representative","business","account"]},ENGINEERING:{type:"ENGINEERING",label:"Engineering",displayOrder:3,keywords:["IT","web","programmer","engineer","product","programming","content","blog","software","tech","UX","UI","design","architect"]},HR:{type:"HR",label:"HR",displayOrder:4,keywords:["HR ","recruit","wellness","human resource"]},FINANCE:{type:"FINANCE",label:"Finance",displayOrder:5,keywords:["finance","financial","accounting","payroll"]},OTHER:{type:"OTHER",label:"Other",displayOrder:6,keywords:[]},ALL:{type:"ALL",label:"All",displayOrder:7,keywords:[]}}})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},r=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};hubspot.define("sidekick.SidekickSidebar.models.contact.Employee",["jQuery","sidekick.SidekickSidebar.models.contact.Contact","sidekick.SidekickSidebar.models.contact.ContactSources","sidekick.SidekickSidebar.models.contact.Connector","sidekick.SidekickSidebar.collections.Connectors"],function(t,i,s,o,u){var a;return a=function(t){function i(){return this.retrieveContactEmail=e(this.retrieveContactEmail,this),this.guessContactEmail=e(this.guessContactEmail,this),i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.initialize=function(e,t){return i.__super__.initialize.call(this,e,t),this.set("connectors",new u),this._resetEmailStatus(),this._resetDisplayPriority(),this},i.prototype._resetEmailStatus=function(){this.environment.user().get("has_leadpeek")||this.isMutualConnection()||this.isCRMRecord()?this.get("email")?this.set("emailStatus","VERIFIED"):this.get("mostLikelyEmail")&&this.set("emailStatus","MOSTLIKELY"):this.set("email",null)},i.prototype._resetDisplayPriority=function(){var e,t,n;t=0,((n=this.get("sources"))!=null?n.length:void 0)?(e=_.min(_.pluck(this.get("sources"),"displayPriority")),this.set("displayPriority",e)):this.set("displayPriority",t)},i.prototype.getCRMData=function(){return this.pick(s.CRM.propertyNames)},i.prototype.setCRMData=function(e){var t,n,r;r=_.pick(e,s.CRM.propertyNames);for(t in r)n=r[t],n&&this.set(t,n)},i.prototype.getMutualConnectionData=function(){return this.pick(s.GRAPH.propertyNames)},i.prototype.setMutualConnectionData=function(e){var t,n,r;r=_.pick(e,s.GRAPH.propertyNames);for(t in r)n=r[t],n&&this.set(t,n)},i.prototype.addSources=function(e){var t;t=_.union(this.get("sources"),e),this.set("sources",t),this._resetEmailStatus(),this._resetDisplayPriority(),this._resetFullName()},i.prototype.isMutualConnection=function(){var e;return(e=s.GRAPH,r.call(this.get("sources"),e)>=0)?!0:!1},i.prototype.isCRMRecord=function(){var e;return(e=s.CRM,r.call(this.get("sources"),e)>=0)?!0:!1},i.prototype.guessContactEmail=function(e,t,n){e==null&&(e=!1),t==null&&(t=!1),n==null&&(n=1);if(this.get("emailStatus")==null&&!this.environment.user().get("has_leadpeek")){this.set("emailStatus","UPGRADE");return}if(this.get("email")!=null)return;if(this.get("emailStatus")==="MOSTLIKELY"){this.set("email",this.get("mostLikelyEmail")),this.set("emailStatus","GUESSED"),this.environment.trackAction('Sidekick: "Guessed Email"',{success:!0});return}this.set("emailStatus","GUESSING");if(!this.hasFullName())return;return this.retrieveContactEmail(e,t,n)},i.prototype.retrieveContactEmail=function(e,t){var n,r,i,s,o=this;return s=this.environment.getWebappUrl("/sidebar/contacts/email.json"),r="first="+this.get("firstName")+"&last="+this.get("lastName")+"&domain="+this.get("domain"),i=function(n,r,i){var s,u,a;return s=function(){return o.retrieveContactEmail(e,t+=1)},!n.has_email&&t<5?setTimeout(s,1e3):(((u=n.valid_emails)!=null?(a=u[0])!=null?a.length:void 0:void 0)>0?(o.set("email",n.valid_emails[0]),o.set("emailStatus","VERIFIED")):n.most_likely_email?(o.set("email",n.most_likely_email),o.set("emailStatus","GUESSED"),o.environment.trackAction('Sidekick: "Guessed Email"',{success:!0}),e&&o.retrieveSocialIntel()):(o.set("emailStatus","ERROR"),o.environment.trackAction('Sidekick: "Guessed Email"',{success:!1})),o.trigger("change:email"))},n=function(n,r,i){var s;if(!s)return o.retrieveContactEmail(e,s=!0,t=t)},this.environment.getJSON({url:s,data:r,success:i,error:n})},i}(i)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};hubspot.define("sidekick.SidekickSidebar.models.contact.Invite",[],function(){var t;return t=function(t){function r(){return this.url=e(this.url,this),r.__super__.constructor.apply(this,arguments)}return n(r,t),r.prototype.defaults={email:null,show_invite:!1},r.prototype.initialize=function(e,t){return r.__super__.initialize.call(this,e,t),this.environment=t.environment},r.prototype.url=function(){var e;return e="/sidebar/contacts/invite/"+this.get("email"),this.environment.getWebappUrl(e)},r.prototype.sendInvite=function(e,t,n){return e.utm_id="sidebar-one-click",this.environment.postJSON({method:"POST",url:this.environment.getWebappUrl("/invites"),data:JSON.stringify(e),success:t,error:n})},r}(Backbone.Model)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},n=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};hubspot.define("sidekick.SidekickSidebar.models.contact.PrimaryContact",["jQuery","sidekick.SidekickSidebar.models.contact.Contact","sidekick.SidekickSidebar.models.company.Company","sidekick.SidekickSidebar.models.contact.Connector","sidekick.SidekickSidebar.collections.Connectors"],function(e,r,i,s,o){var u;return u=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.initialize=function(e,t){return r.__super__.initialize.call(this,e,t),this.createChildCompany(e,t),this.get("email")&&(this.retrieveConnectionData(),this.retrieveUpdateInfoRequest()),this},r.prototype.createChildCompany=function(e,t){var r,s,o;(o=this.get("domain"),n.call(this.environment.get("freemail_domains"),o)>=0)||(r=_.clone(e),r.domain=this.get("domain"),s=new i(r,t),this.set("companyObject",s),this.trigger("change:companyObject"))},r}(r)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};hubspot.define("sidekick.SidekickSidebar.models.recordset.HSCRMRecordSet",["sidekick.SidekickSidebar.models.recordset.RecordSet","sidekick.SidekickSidebar.models.recordset.collections.HSCRM.HSCRMCompanies"
,"sidekick.SidekickSidebar.models.recordset.collections.HSCRM.HSCRMDeals","sidekick.SidekickSidebar.models.recordset.collections.HSCRM.HSCRMContacts"],function(e,n,r,i){var s;return s=function(e){function s(){return s.__super__.constructor.apply(this,arguments)}return t(s,e),s.prototype.initialize=function(e,t){var s,o,u;this.set("record_set_type","HubSpot"),s=new n,u=new r,o=new i,this.set("companies",s),this.set("deals",u),this.set("contacts",o),this.set("object_primary",this.get("companies")),this.set("object_secondary",this.get("deals")),this.set("object_tertiary",this.get("contacts"))},s.prototype.addCompany=function(e){var t;t=this.get("companies"),t.add(e),this.set("companies",t)},s.prototype.addDeal=function(e){var t;t=this.get("deals"),t.add(e),this.set("deals",t)},s.prototype.addContact=function(e){var t;t=this.get("contacts"),t.add(e),this.set("contacts",t)},s}(e)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};hubspot.define("sidekick.SidekickSidebar.models.recordset.collections.HSCRM.HSCRMCompanies",["sidekick.SidekickSidebar.models.recordset.records.HSCRM.HSCRMCompany"],function(e){var n;return n=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.model=e,r.prototype.url=null,r}(Backbone.Collection)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};hubspot.define("sidekick.SidekickSidebar.models.recordset.collections.HSCRM.HSCRMContacts",["sidekick.SidekickSidebar.models.recordset.records.HSCRM.HSCRMContact"],function(e){var n;return n=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.model=e,r.prototype.url=null,r}(Backbone.Collection)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};hubspot.define("sidekick.SidekickSidebar.models.recordset.collections.HSCRM.HSCRMDeals",["sidekick.SidekickSidebar.models.recordset.records.HSCRM.HSCRMDeal"],function(e){var n;return n=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.model=e,r.prototype.url=null,r}(Backbone.Collection)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};hubspot.define("sidekick.SidekickSidebar.models.recordset.collections.salesforce.SalesforceAccounts",["sidekick.SidekickSidebar.models.recordset.records.salesforce.SalesforceAccount"],function(e){var n;return n=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.model=e,r}(Backbone.Collection)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};hubspot.define("sidekick.SidekickSidebar.models.recordset.collections.salesforce.SalesforceContacts",["sidekick.SidekickSidebar.models.recordset.records.salesforce.SalesforceContact"],function(e){var n;return n=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.model=e,r}(Backbone.Collection)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};hubspot.define("sidekick.SidekickSidebar.models.recordset.collections.salesforce.SalesforceLeads",["sidekick.SidekickSidebar.models.recordset.records.salesforce.SalesforceLead"],function(e){var n;return n=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.model=e,r}(Backbone.Collection)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};hubspot.define("sidekick.SidekickSidebar.models.recordset.collections.salesforce.SalesforceOpportunities",["sidekick.SidekickSidebar.models.recordset.records.salesforce.SalesforceOpportunity"],function(e){var n;return n=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.model=e,r}(Backbone.Collection)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};hubspot.define("sidekick.SidekickSidebar.models.recordset.RecordSet",[],function(){var e;return e=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.defaults={object_primary:null,object_secondary:null,object_tertiary:null,object_quaternary:null},n.prototype.initialize=function(e,t){return n.__super__.initialize.call(this,e,t),this.environment=t.environment},n}(Backbone.Model)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};hubspot.define("sidekick.SidekickSidebar.models.recordset.records.HSCRM.HSCRMCompany",["sidekick.SidekickSidebar.models.recordset.records.HSCRM.HSCRMRecord"],function(e){var n;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(e,t){var r;return n.__super__.initialize.call(this,e,t),e["company-id"]?r=e["company-id"]:r=e.companyId,this.set("id","company/"+r+"/"),this.set("hubspot_company_id",r),e.properties.name?(this.set("company_name",e.properties.name.value),this.set("name",""+e.properties.name.value)):(this.set("company_name",e.properties.domain.value),this.set("name",""+e.properties.domain.value)),this.setRecordType("company")},n}(e)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};hubspot.define("sidekick.SidekickSidebar.models.recordset.records.HSCRM.HSCRMContact",["sidekick.SidekickSidebar.models.recordset.records.HSCRM.HSCRMRecord"],function(e){var n;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(e,t){var r,i,s;return n.__super__.initialize.call(this,e,t),e.vid&&(this.set("id","contact/"+e.vid+"/"),((r=e["associated-company"])!=null?r["company-id"]:void 0)&&this.set("hubspot_company_id",e["associated-company"]["company-id"]),((i=e["associated-company"])!=null?(s=i.properties)!=null?s.name:void 0:void 0)&&this.set("company_name",e["associated-company"].properties.name.value)),e.properties.verified_email&&this.set("email",e.properties.verified_email.value),this.setRecordType("contact")},n}(e)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};hubspot.define("sidekick.SidekickSidebar.models.recordset.records.HSCRM.HSCRMDeal",["sidekick.SidekickSidebar.models.recordset.records.HSCRM.HSCRMRecord"],function(e){var n;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(e,t){return n.__super__.initialize.call(this,e,t),e.dealId&&(this.set("id","deal/"+e.dealId+"/"),this.set("hubspot_company_id",e.associations.associatedCompanyIds[0])),e.properties.dealname&&(this.set("company_name",e.properties.dealname.value),this.set("name",""+e.properties.dealname.value)),this.setRecordType("deal")},n}(e)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};hubspot.define("sidekick.SidekickSidebar.models.recordset.records.HSCRM.HSCRMRecord",["sidekick.SidekickSidebar.models.recordset.records.Record"],function(t){var r;return r=function(t){function r(){return this.getHubspotUrl=e(this.getHubspotUrl,this),r.__super__.constructor.apply(this,arguments)}return n(r,t),r.prototype.initialize=function(e,t){r.__super__.initialize.call(this,e,t),e.properties.company&&this.set("company_name",e.properties.company.value),e.properties.firstname&&this.set("firstName",e.properties.firstname.value),e.properties.lastname&&this.set("lastName",e.properties.lastname.value),e.properties.jobtitle&&this.set("title",e.properties.jobtitle.value),e.properties.email&&this.set("email",e.properties.email.value),e.properties.phone&&this.set("phone_number",e.properties.phone.value),e.hubspot_owner&&(this.set("owner_name",e.hubspot_owner.firstName+" "+e.hubspot_owner.lastName),this.set("owned_by_queue",!1)),e.Id&&(this.set("id",e.Id),this.set("salesforce_id",e.Id)),e.crm_base_url&&this.set("crm_base_url",e.crm_base_url),e.properties.createdate&&this.set("date",moment(parseInt(e.properties.createdate.value,10)).format("YYYY-MM-DD"))},r.prototype.getHubspotUrl=function(){return this.getCRMUrl()},r}(t)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};hubspot.define("sidekick.SidekickSidebar.models.recordset.records.Record",[],function(){var t;return t=function(t){function r(){return this.setRecordType=e(this.setRecordType,this),this.getCRMUrl=e(this.getCRMUrl,this),r.__super__.constructor.apply(this,arguments)}return n(r,t),r.prototype.initialize=function(e,t){this.environment=t.environment},r.prototype.getCRMUrl=function(){return this.get("crm_base_url")+"/"+this.get("id")},r.prototype.setRecordType=function(e){this.set("record_type",e),e&&this.set("formatted_record_type",e[0].toUpperCase()+e.slice(1))},r}(Backbone.Model)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};hubspot.define("sidekick.SidekickSidebar.models.recordset.records.salesforce.SalesforceAccount",["sidekick.SidekickSidebar.models.recordset.records.salesforce.SalesforceRecord"],function(e){var n;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(e,t){return n.__super__.initialize.call(this,e,t),this.setRecordType("account")},n}(e)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};hubspot.define("sidekick.SidekickSidebar.models.recordset.records.salesforce.SalesforceContact",["sidekick.SidekickSidebar.models.recordset.records.salesforce.SalesforceRecord"],function(e){var n;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(e,t){return n.__super__.initialize.call(this,e,t),this.setRecordType("contact")},n}(e)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};hubspot.define("sidekick.SidekickSidebar.models.recordset.records.salesforce.SalesforceLead",["sidekick.SidekickSidebar.models.recordset.records.salesforce.SalesforceRecord"],function(t){var r;return r=function(t){function r(){return this.claimLead=e(this.claimLead,this),r.__super__.constructor.apply(this,arguments)}return n(r,t),r.prototype.initialize=function(e,t){return r.__super__.initialize.call(this,e,t),this.setRecordType("lead")},r.prototype.claimLead=function(e){var t=this;$.post(this.environment.getWebappUrl("/contacts/salesforce/leads/claim.json"),{Id:this.get("salesforce_id")},function(n,r,i){return t.set("claimed",!0),e(n)},"json")},r}(t)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};hubspot.define("sidekick.SidekickSidebar.models.recordset.records.salesforce.SalesforceOpportunity",["sidekick.SidekickSidebar.models.recordset.records.salesforce.SalesforceRecord"],function(e){var n;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(e,t){return n.__super__.initialize.call(this,e,t),this.setRecordType("opportunity")},n}(e)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};hubspot.define("sidekick.SidekickSidebar.models.recordset.records.salesforce.SalesforceRecord",["sidekick.SidekickSidebar.models.recordset.records.Record"],function(t){var r;return r=function(t){function r(){return this.getSalesforceUrl=e(this.getSalesforceUrl,this),r.__super__.constructor.apply(this,arguments)}return n(r,t),r.prototype.initialize=function(e,t){r.__super__.initialize.call(this,e,t),e.Company&&this.set("company_name",e.Company),e.Name&&this.set("name",e.Name),e.FirstName&&this.set("firstName",e.FirstName),e.LastName&&this.set("lastName",e.LastName),e.Title&&this.set("title",e.Title),e.Email&&this.set("email",e.Email),e.Phone&&this.set("phone_number",e.Phone),e.Owner&&(this.set("owner_name",e.Owner.Name),this.set("owned_by_queue",e.Owner.IsQueue)),e.Id&&(this.set("id",e.Id),this.set("salesforce_id",e.Id)),e.LastActivityDate?this.set("date",e.LastActivityDate.substring(0,10)):e.CreatedDate&&this.set("date",e.CreatedDate.substring(0,10)),this._resetFullName()},r.prototype.getSalesforceUrl=function(){return this.getCRMUrl()},r.prototype._resetFullName=function(){var e;this.get("name")&&!this._hasFullName()?(e=this.get("name").split(" "),this.set("firstName",e[0]),this.set("lastName",e[e.length-1])):!this.has("name")&&this._hasFullName()&&this.set("name",this.get("firstName")+" "+this.get("lastName"))},r.prototype._hasFullName=function(){return this.get("firstName")&&this.get("lastName")},r}(t)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};hubspot.define("sidekick.SidekickSidebar.models.recordset.SalesforceRecordSet",["sidekick.SidekickSidebar.models.recordset.RecordSet","sidekick.SidekickSidebar.models.recordset.collections.salesforce.SalesforceLeads","sidekick.SidekickSidebar.models.recordset.collections.salesforce.SalesforceOpportunities","sidekick.SidekickSidebar.models.recordset.collections.salesforce.SalesforceAccounts","sidekick.SidekickSidebar.models.recordset.collections.salesforce.SalesforceContacts","sidekick.SidekickSidebar.models.recordset.records.salesforce.SalesforceLead","sidekick.SidekickSidebar.models.recordset.records.salesforce.SalesforceOpportunity","sidekick.SidekickSidebar.models.recordset.records.salesforce.SalesforceAccount","sidekick.SidekickSidebar.models.recordset.records.salesforce.SalesforceContact"],function(e,n,r,i,s,o,u,a,f){var l;return l=function(e){function l(){return l.__super__.constructor.apply(this,arguments)}return t(l,e),l.prototype.initialize=function(e,t){return l.__super__.initialize.call(this,e,t),this.set("record_set_type","Salesforce"),this.set("leads",new n([],{environment:this.environment})),this.set("opportunities",new r([],{environment:this.environment})),this.set("accounts",new i([],{environment:this.environment})),this.set("contacts",new s([],{environment:this.environment})),this.set("object_primary",this.get("accounts")),this.set("object_secondary",this.get("opportunities")),this.set("object_tertiary",this.get("leads")),this.set("object_quaternary",this.get("contacts"))},l.prototype.addLead=function(e){var t;e.crm_base_url=this.get("salesforce_instance_url"),t=this.get("leads"),t.add(new o(e,{environment:this.environment})),this.set("leads",t)},l.prototype.addOpportunity=function(e){var t;e.crm_base_url=this.get("salesforce_instance_url"),t=this.get("opportunities"),t.add(new u(e,{environment:this.environment})),this.set("opportunities",t)},l.prototype.addAccount=function(e){var t;e.crm_base_url=this.get("salesforce_instance_url"),t=this.get("accounts"),t.add(new a(e,{environment:this.environment})),this.set("accounts",t)},l.prototype.addContact=function(e){var t;e.crm_base_url=this.get("salesforce_instance_url"),t=this.get("contacts"),t.add(new f(e,{environment:this.environment})),this.set("contacts",t)},l}(e)})}.call(this),function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};hubspot.define("sidekick.SidekickSidebar.utils.HubSpotApi",["jQuery"],function(t){var n;return n=function(){function n(){}return n.prototype.envSuffix="",n.prototype.haveForced=!1,n.prototype.apiRequest=function(e,n,r){var i,s,o,u,a,f,l=this;return this.envSuffix=location.host.indexOf("qa")!==-1?"qa":"",s={type:"GET",contentType:"application/json",dataType:"json",processData:!0,traditional:!0},a=_.extend({},s,r),n="https://api.hubapi"+this.envSuffix+".com/"+n,f=a.success,o=a.error,i=a.complete,delete a.success,delete a.error,delete a.complete,u=function(e){var r,i;return i=l.buildXhrConnectionOptions(n,e,a),r=Q(t.ajax(i)),f!=null&&r.then(f),r.then(null,function(e,t,n){if(e.status===401)return l.buildAuthSigning(!0,e).then(u);if(o!=null)return o()})},this.buildAuthSigning().then(u)},n.prototype.buildAuthSigning=function(e,t){var n=this;return e==null&&(e=!1),t==null&&(t=null),e?this.refreshAuthToken(e,t):this.getStoredToken().then(function(t){return t.expires>=(new Date).getTime()?{access_token:t.access_token}:n.refreshAuthToken(e)},function(t){return n.refreshAuthToken(e).then(function(e){if(e.expires>=(new Date).getTime())return{access_token:e.access_token}})})},n.prototype.refreshAuthToken=function(e,n){var r,i,s,o=this;e==null&&(e=!1),n==null&&(n=null);if(e&&this.haveForced)throw r="Can't authorize user",Raven.captureMessage(r,{extra:{response:JSON.stringify(n)}}),new Error(r);return i={url:"https://api.getsidekick"+this.envSuffix+".com/signals/v1/user/access-token",type:"GET",dataType:"json",xhrFields:{withCredentials:!0}},this.haveForced=e,s=Q(t.ajax(i)),s.then(this.setStoredToken,function(e){return o.removeStoredToken()})},n.prototype.getStoredToken=function(){var e;return e=Q.defer(),e.resolve({access_token:localStorage.hubspotAccessToken,expires:localStorage.hubspotAccessTokenExpiry}),e.promise},n.prototype.setStoredToken=function(e){var t;return t=Q.defer(),localStorage.hubspotAccessToken=e.token,localStorage.hubspotAccessTokenExpiry=e.expires_at,this.haveForced=!1,t.resolve({access_token:e.token,expires:e.expires_at}),t.promise},n.prototype.removeStoredToken=function(){return localStorage.removeItem("hubspotAccessToken"),localStorage.removeItem("hubspotAccessTokenExpiry")},n.prototype.buildXhrConnectionOptions=function(t,n,r){var i,s,o;return i=this.buildQueryString(r,n),i!==""&&(t=t.replace(/#.*$/,""),s=e.call(t,"?")>=0?"&":"?",t+=s+i),o=_.extend({},r,{url:t}),this.useDataInQuery(r)&&delete o.data,o},n.prototype.useDataInQuery=function(e){return e.type==="GET"&&e.processData},n.prototype.buildQueryString=function(e,t){var n,r;return t&&(t=_.pick(t,"access_token")),r=_.extend({},t),this.useDataInQuery(e)&&(_.isString(e.data)?n=e.data:_.extend(r,e.data)),_.extend(r,e.query),_.compact([n,this.objToQueryString(r,!0,e.traditional)]).join("&")},n.prototype.objToQueryString=function(e,n,r){var i,s;n==null&&(n=!0),r==null&&(r=!0);for(i in e)e[i]==null&&delete e[i];return s=t.param(e,r),n?s.replace(/\+/g,"%20"):s},n}()})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};hubspot.define("sidekick.SidekickSidebar.views.base.App",["jQuery","sidekick.SidekickSidebar.models.base.Environment","sidekick.SidekickSidebar.models.contact.PrimaryContact","sidekick.SidekickSidebar.models.company.Company","sidekick.SidekickSidebar.views.mainview.AppBar","sidekick.SidekickSidebar.views.mainview.login.LoginView","sidekick.SidekickSidebar.views.mainview.LeadView","sidekick.SidekickSidebar.views.mainview.DummyViewContainer"],function(t,r,i,s,o,u,a,f){var l;return l=function(l){function c(){return this.clickedViewContact=e(this.clickedViewContact,this),this.updateAppConfig=e(this.updateAppConfig,this),this.newContact=e(this.newContact,this),this.refreshSidekick=e(this.refreshSidekick,this),this.refresh=e(this.refresh,this),this.changeLeadView=e(this.changeLeadView,this),this.render=e(this.render,this),this.createInitialLead=e(this.createInitialLead,this),this.initMessageListener=e(this.initMessageListener,this),this.initInitialView=e(this.initInitialView,this),c.__super__.constructor.apply(this,arguments)}return n(c,l),c.prototype.el="body",c.prototype.events={"click .back-container":"previousLeadView","click .signals-activity a.view-contact-action":"clickedViewContact"},c.prototype.initialize=function(e){var t=this;this.environment=new r,this.environment.initializeUser().then(function(){t.environment.get("initial_contact_email")==="hello@getsidekick.com"?t.leadView=new f({model:t.createInitialLead()},{environment:t.environment}):t.leadView=new a({model:t.createInitialLead()},{environment:t.environment}),t.environment.postMessage("getStream"),t.environment.get("is_user_profile")?t.environment.postMessage("insightsLoaded",{stream_loaded:!0}):t.environment.postMessage("insightsLoaded",{contact_loaded:!0})}).fail(function(e){(e!=null?e.statusCode:void 0)===401&&(t.leadView=new u({environment:t.environment}))})["finally"](function(){t.appBar=new o(null,{environment:t.environment}),t.initInitialView()}).done()},c.prototype.initInitialView=function(){this.render(),this.initMessageListener(),this.environment.listenTo(this.environment,"refreshAll",this.refreshSidekick)},c.prototype.initMessageListener=function(){var e=this;window.addEventListener("message",function(t){t.data.newContact!=null&&e.environment.user().isLoggedIn()&&(e.environment.resetStats(),e.environment.setCollapsed(t.data.newContact.isCollapsed),e.changeLeadView(e.newContact(t.data.newContact),!0,!1),e.environment.postMessage("insightsLoaded",{contact_loaded:!0})),t.data.stream!=null&&e.environment.get("is_user_profile")&&e.leadView.model.set("activities",e.model.formatActivityData({activities:t.data.stream})),t.data.rapportiveData!=null&&(console.debug("Rapportive Data"),console.debug(t.data));if(t.data==="updateStream")return e.leadView.model.retrieveStreamData()})},c.prototype.createInitialLead=function(){var e;return this.environment.get("is_contact")?e=new i({email:this.environment.get("initial_contact_email"),name:this.environment.get("initial_contact_name")},{environment:this.environment}):e=new s({domain:this.environment.get("initial_company_domain")},{environment:this.environment}),e.get("dataRetrieved")||e.retrieveData().done(),e},c.prototype.render=function(){return this.$el.append(this.appBar.render().el),this.$el.append(this.leadView.render().el),this.$el},c.prototype.changeLeadView=function(e,t,n){t==null&&(t=!1),n==null&&(n=!1),this.environment.resetStats(),this.environment.set("is_contact",t),this.environment.set("is_user_profile",n),this.environment.get("is_gmail")===!0&&this.environment.stats().toggleSidebarOpen(),this.leadView.unattach(),e.get("email")==="hello@getsidekick.com"?this.leadView=new f({model:e},{environment:this.environment}):this.leadView=new a({model:e},{environment:this.environment}),this.refresh()},c.prototype.refresh=function(){this.$el.append(this.leadView.render().$el.hide().fadeIn("fast"))},c.prototype.refreshSidekick=function(){var e;(e=this.leadView)!=null&&e.unattach(),this.initialize()},c.prototype.newContact=function(e){var t,n;if(e.email==="user"||e.email===this.environment.user().get("email")||e.email===null)return;return this.updateAppConfig(e),n={email:e.email,name:e.name},t=new i(n,{environment:this.environment}),t.retrieveData().done(),t},c.prototype.updateAppConfig=function(e){return this.environment.set("is_contact",e.email!==this.environment.user().get("email")),this.environment.set("is_user_profile",e.email===this.environment.user().get("email"))},c.prototype.clickedViewContact=function(e){var n,r;n=t(e.currentTarget),r={email:n.data("email"),name:n.data("name")},r.email&&(this.environment.resetStats(),this.environment.set("is_contact",!0),this.changeLeadView(this.newContact(r),!0,!1))},c}(Backbone.View)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};hubspot.define("sidekick.SidekickSidebar.views.base.Back",["jQuery"],function(t){var r;return r=function(t){function r(){return this.slideDown=e(this.slideDown,this),this.slideUp=e(this.slideUp,this),this.update=e(this.update,this),this.render=e(this.render,this),r.__super__.constructor.apply(this,arguments)}return n(r,t),r.prototype.className="back-container",r.prototype.template=jade.templates.back_container,r.prototype.initialize=function(e){this.previous_domain=""},r.prototype.render=function(e){return e==null&&(e=!1),this.$el.html(this.template({previous_domain:this.previous_domain})),e||this.$el.hide(),this.$el},r.prototype.update=function(e){return this.previous_domain=e,this.render(!0)},r.prototype.slideUp=function(){return this.$el.slideUp("fast")},r.prototype.slideDown=function(){return this.$el.slideDown("fast")},r}(Backbone.View)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};hubspot.define("sidekick.SidekickSidebar.views.base.Banner",["jQuery"],function(t){var r;return r=function(t){function r(){return this.updateLeadStatus=e(this.updateLeadStatus,this),this.render=e(this.render,this),r.__super__.constructor.apply(this,arguments)}return n(r,t),r.prototype.className="banner-container",r.prototype.template=jade.templates.banner_container,r.prototype.initialize=function(e){this.model.listenTo(this.model,"change:status",this.updateLeadStatus)},r.prototype.render=function(){return this.$el.html(this.template()),this.$el},r.prototype.updateLeadStatus=function(){return this.$("a.banner-button").hide(),this.model.get("status")==="existing-lead"&&this.$("a.banner-button.existing").slideDown("slow"),this.$("a.banner.existing").attr("href",this.model.get("salesforce_url"))},r}(Backbone.View)})}.call(this),function(){}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};hubspot.define("sidekick.SidekickSidebar.views.company.CompanyConnectionsTable",["jQuery","sidekick.SidekickSidebar.views.shared.AddHubSpotRecordDetail","sidekick.SidekickSidebar.views.shared.AddLeadDetail"],function(t,r,i){var s;return s=function(s){function o(){return this.clearSearch=e(this.clearSearch,this),this.clickedAddContact=e(this.clickedAddContact,this),this.clickedViewContact=e(this.clickedViewContact,this),this.clickedRevealEmail=e(this.clickedRevealEmail,this),this.clickedSaveRecord=e(this.clickedSaveRecord,this),this.viewedCRMRecord=e(this.viewedCRMRecord,this),this.showConnections=e(this.showConnections,this),this.clickedViewConnections=e(this.clickedViewConnections,this),this.clickedExpand=e(this.clickedExpand,this),this.scrollUp=e(this.scrollUp,this),this.scrollDown=e(this.scrollDown,this),this.render=e(this.render,this),this.getMutualConnections=e(this.getMutualConnections,this),o.__super__.constructor.apply(this,arguments)}return n(o,s),o.prototype.className="company-connections-table",o.prototype.template=jade.templates.company_connections_table,o.prototype.events={"click .link-list a.expand-link":"clickedExpand","click .company-contact a.add-contact-button":"clickedAddContact","click .company-contact a.cancel-add-contact-link":"clickedAddContact","click .view-contact-button":"viewedCRMRecord","click .company-connections-list a.save-record":"clickedSaveRecord","click .company-contact a.email-action":"clickedRevealEmail","click .view-linkedin-action":"clickedViewContact"},o.prototype.initialize=function(e,t){this.environment=t.environment,this.model.listenTo(this.model,"change:can_add_leads",this.render),this.model.listenTo(this.model.get("companyEmployees"),"complete:mutualConnections",this.getMutualConnections),this.company_connection_models=[],this.limited=!0,this.searching=!1},o.prototype.getMutualConnections=function(){return this.mutualConnections=this.model.get("companyEmployees").getMutualConnections(),this.hasMutualConnections=this.mutualConnections.length>0,this.render()},o.prototype.render=function(){var e,n,r,i;return n=this.model.get("domain"),this.limited?r=3:r=1e3,this.model.get("can_add_leads")==null?window.localStorage["can_add_leads"]!=null?e=window.localStorage.can_add_leads==="true":e=!1:e=this.model.get("can_add_leads"),i=this.environment.user().get("has_salesforce")===!0&&e===!0,this.searching||(this.mutualConnections!=null?this.contactsDisplayed=this.mutualConnections:this.contactsDisplayed=[]),this.$el.html(this.template({contactsDisplayed:this.contactsDisplayed,hasMutualConnections:this.hasMutualConnections,domain:n,userDomain:this.environment.user().getDomain(),company_name:this.model.get("company_name"),limited:this.limited,limit:r,has_salesforce:this.environment.user().get("has_salesforce"),inbox_connected:this.environment.user().get("has_inbox_connected"),use_salesforce:i,use_hscrm:this.environment.user().get("use_hscrm"),defaultImgUrl:""+hubspot.bender.staticDomainPrefix+"/SidekickSidebar/static-1.279/img/avatar.png"})),t(".company-connections-list",this.$el).show(),this.$(".tippable").tooltip(),this.$el},o.prototype.scrollDown=function(){t(".company-connections-list",this.$el).slideDown(),this.$el.addClass("visible")},o.prototype.scrollUp=function(){t(".company-connections-list",this.$el).slideUp(),this.$el.removeClass("visible")},o.prototype.clickedExpand=function(e){this.limited&&this.environment.trackAction('Sidekick: "Clicked Show All"',{location_in_sidebar:"company_connections"});if(this.$(e.currentTarget).parents(".view-connectors").length>0)return this.clickedViewConnections(e);this.limited=!this.limited,this.render()},o.prototype.clickedViewConnections=function(e){var n,r,i,s,o=this;r=this.$(e.currentTarget).parents(".view-connectors").siblings(".connector-rows")[0],s=this.$(e.currentTarget).parents(".company-contact").attr("cid"),n=t(r),n.hasClass("hide")?(this.environment.trackAction('Sidekick: "Expanded View Connections"'),i=this.model.get("companyEmployees").get(s),i.retrieveConnectionData().then(function(){return o.model.get("companyEmployees").triggerMutualConnections(),o.showConnections(s)})):(n.toggleClass("hide"),t(e.currentTarget).children(".expand-text").toggleClass("hide"))},o.prototype.showConnections=function(e){var n,r,i,s,o,u,a,f,l,c;c=t(".company-contact");for(u=0,f=c.length;u<f;u++){n=c[u];if(t(n).attr("cid")===e){s=t(n).children(".connector-rows")[0],t(s).toggleClass("hide"),o=t(s).siblings(".view-connectors")[0],i=t(o)
.children(".expand-link").children(".expand-text");for(a=0,l=i.length;a<l;a++)r=i[a],t(r).toggleClass("hide")}}},o.prototype.viewedCRMRecord=function(){this.environment.trackAction('Sidekick: "Viewed CRM Record"',{type:"contact",location_in_sidebar:"company_connections"})},o.prototype.clickedSaveRecord=function(e){var n;n=t(e.currentTarget).parents(".edit-lead-detail").prev(".company-contact"),n.addClass("saving-record")},o.prototype.clickedRevealEmail=function(e){var n,r,i,s,o,u,a,f;e.preventDefault(),u=(a=t(e.currentTarget).parents(".company-contact"))!=null?a.attr("cid"):void 0,o=this.model.get("companyEmployees").get(u),n=t(e.currentTarget),n.parents(".connector-rows").length>0?(i=(f=n.parents(".link-actions"))!=null?f.attr("cid"):void 0,r=o.get("connectors").get(i),s=r.get("connectorEmail"),this.environment.trackAction('Sidekick: "Clicked Name To Email"',{location_in_sidebar:"company_connections",type:"connector"})):(s=o.get("email"),this.environment.trackAction('Sidekick: "Clicked Name To Email"',{location_in_sidebar:"company_connections",type:"contact"})),this.environment.get("is_gmail")?this.environment.postMessage("emailGmail",{email:s}):window.open("mailto:"+s)},o.prototype.clickedViewContact=function(){this.environment.trackAction('Sidekick: "Clicked Contact Link (Google LinkedIn)"',{location_in_sidebar:"company_connections"})},o.prototype.clickedAddContact=function(e){var n,s,o,u,a,f;e.preventDefault(),n=t(e.currentTarget).parents(".company-contact"),f=n.attr("cid"),a=this.model.get("companyEmployees").get(f),o=t(e.currentTarget).parents(".company-contact").children(".contact-row"),o[0].style.width===""?o[0].style.width="80%":o[0].style.width="",s=o.children(".contact-data"),s[0].style.width===""?s[0].style.width="72%":s[0].style.width="",this.$(".edit-lead-detail").slideUp(),n.hasClass("highlight")?this.$(".company-contact").removeClass("highlight"):(this.environment.trackAction('Sidekick: "Expanded Add Record Form"',{type:"contact",location_in_sidebar:"company_connections"}),this.$(".company-contact").removeClass("highlight"),this.environment.user().get("use_hscrm")?u=new r({model:a,type:"contact",location:"company_connections"},{environment:this.environment}):u=new i({model:a,type:"contact",location:"company_connections"},{environment:this.environment}),n.after(u.render().hide()),u.scrollDown())},o.prototype.searchContacts=function(e){var t;this.searching=!0,t=new RegExp(e,"i"),this.contactsDisplayed=_.filter(this.mutualConnections,function(e){return t.test(e.get("name"))||t.test(""+e.get("firstName")+" "+e.get("lastName"))||t.test(e.get("firstName"))||t.test(e.get("lastName"))})},o.prototype.clearSearch=function(e){this.searching=!1,e&&(this.mutualConnections!=null?this.contactsDisplayed=this.mutualConnections:this.contactsDisplayed=[])},o}(Backbone.View)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};hubspot.define("sidekick.SidekickSidebar.views.company.CompanyContactsTable",["jQuery","sidekick.SidekickSidebar.views.shared.AddHubSpotRecordDetail","sidekick.SidekickSidebar.views.shared.AddLeadDetail","sidekick.SidekickSidebar.models.contact.DepartmentTypes","sidekick.SidekickSidebar.models.contact.ContactSources"],function(t,r,i,s,o){var u,a,f;return f=3,a=1e3,u=function(o){function u(){return this.clearSearch=e(this.clearSearch,this),this.clickedViewContact=e(this.clickedViewContact,this),this.clickedAddContact=e(this.clickedAddContact,this),this.clickedContactEmail=e(this.clickedContactEmail,this),this.clickedGuessEmail=e(this.clickedGuessEmail,this),this.viewedCRMRecord=e(this.viewedCRMRecord,this),this.clickedSaveRecord=e(this.clickedSaveRecord,this),this.clickedExpand=e(this.clickedExpand,this),this.filteredContacts=e(this.filteredContacts,this),this.scrollUp=e(this.scrollUp,this),this.scrollDown=e(this.scrollDown,this),this.render=e(this.render,this),this.getDepartments=e(this.getDepartments,this),u.__super__.constructor.apply(this,arguments)}return n(u,o),u.prototype.className="company-contacts-table",u.prototype.template=jade.templates.company_contacts_table,u.prototype.events={"click .link-list-header a.expand-link":"clickedExpand","click .link-list a.expand-link":"clickedExpand","click .company-contact a.add-contact-button":"clickedAddContact","click .company-contact a.cancel-add-contact-link":"clickedAddContact","click .view-contact-button":"viewedCRMRecord","click .company-contact a.email-action":"clickedGuessEmail","click .company-contact a.email-link":"clickedContactEmail","click .company-contacts-list a.save-record":"clickedSaveRecord","click .view-linkedin-action":"clickedViewContact","change select.filter-type":"filteredContacts"},u.prototype.initialize=function(e,t){this.environment=t.environment,this.model.listenTo(this.model.get("companyEmployees"),"complete:companyEmployees",this.getDepartments),this.model.listenTo(this.model,"change:can_add_leads",this.render),this.company_contact_models=[],this.limited=!0,this.hasDepartments=!1,this.searching=!1,this.selectedDepartmentType="",this.hasEmailGuessing=this.environment.user().get("has_leadpeek")},u.prototype.getDepartments=function(){this.departments=this.model.get("companyEmployees").getEmployeesByDepartment(),this.hasDepartments=this.model.get("companyEmployees").hasDepartments(),this.hasEmployees=this.model.get("companyEmployees").size()>0,this.hasDepartments?this.defaultDepartmentType=s.EXECUTIVE.type:this.defaultDepartmentType=s.ALL.type;if(this.hasEmployees)return this.render()},u.prototype.render=function(){var e,t,n,r,i;return this.limited?t=f:t=a,this.model.get("can_add_leads")==null?window.localStorage["can_add_leads"]!=null?e=window.localStorage.can_add_leads==="true":e=!1:e=this.model.get("can_add_leads"),n=this.environment.user().get("has_salesforce")===!0&&e===!0,this.selectedDepartmentType?this.currentDepartmentType=this.selectedDepartmentType:this.currentDepartmentType=this.defaultDepartmentType,this.searching||(((r=this.departments)!=null?(i=r[this.currentDepartmentType])!=null?i.employees:void 0:void 0)?this.contactsDisplayed=this.departments[this.currentDepartmentType].employees:this.contactsDisplayed=[]),this.$el.html(this.template({hasDepartments:this.hasDepartments,hasEmployees:this.hasEmployees,contactsDisplayed:this.contactsDisplayed,searching:this.searching,departments:this.departments,domain:this.model.get("domain"),limited:this.limited,limit:t,initialLimit:f,has_avatars:!1,hasEmailGuessing:this.hasEmailGuessing,company_name:this.model.get("company_name"),selectedDepartmentType:this.selectedDepartmentType,currentDepartmentType:this.currentDepartmentType,use_salesforce:n,use_hscrm:this.environment.user().get("use_hscrm")})),this.$(".tippable").tooltip(),this.$el},u.prototype.scrollDown=function(){t(".company-contacts-list",this.$el).slideDown(),this.$el.addClass("visible")},u.prototype.scrollUp=function(){t(".company-contacts-list",this.$el).slideUp(),this.$el.removeClass("visible")},u.prototype.filteredContacts=function(e){this.selectedDepartmentType=this.$("select.filter-type").val(),this.limited=!this.selectedDepartmentType,this.contactsDisplayed=this.departments[this.selectedDepartmentType].employees,this.render()},u.prototype.clickedExpand=function(){this.limited&&this.environment.trackAction('Sidekick: "Clicked Show All"',{location_in_sidebar:"company_contacts"}),this.limited=!this.limited,this.render()},u.prototype.clickedSaveRecord=function(e){var n;n=t(e.currentTarget).parents(".edit-lead-detail").prev(".company-contact"),n.addClass("saving-record")},u.prototype.viewedCRMRecord=function(){this.environment.trackAction('Sidekick: "Viewed CRM Record"',{type:"contact",location_in_sidebar:"company_contacts"})},u.prototype.clickedGuessEmail=function(e){var n,r,i;e.preventDefault(),r=(i=t(e.currentTarget).parents(".company-contact"))!=null?i.attr("cid"):void 0,n=this.model.get("companyEmployees").get(r),this.model.listenTo(n,"change:emailStatus",this.render),n.guessContactEmail()},u.prototype.clickedContactEmail=function(e){var n;e.preventDefault(),n=t(e.currentTarget).text(),this.environment.get("is_gmail")?this.environment.postMessage("emailGmail",{email:n}):window.open("mailto:"+n)},u.prototype.clickedAddContact=function(e){var n,s,o,u;e.preventDefault(),n=t(e.currentTarget).parents(".company-contact"),u=n.attr("cid"),o=this.model.get("companyEmployees").get(u),this.$(".edit-lead-detail").slideUp(),n.hasClass("highlight")?this.$(".company-contact").removeClass("highlight"):(this.environment.trackAction('Sidekick: "Expanded Add Record Form"',{type:"contact",location_in_sidebar:"company_contacts"}),this.$(".company-contact").removeClass("highlight"),this.environment.user().get("use_hscrm")?s=new r({model:o,type:"contact",location:"company_contacts"},{environment:this.environment}):s=new i({model:o,type:"contact",location:"company_contacts"},{environment:this.environment}),n.after(s.render().hide()),s.scrollDown())},u.prototype.clickedViewContact=function(){this.environment.trackAction('Sidekick: "Clicked Contact Link (Google LinkedIn)"',{location_in_sidebar:"company_contacts"})},u.prototype.searchContacts=function(e){var t;this.searching=!0,t=new RegExp(e,"i"),this.contactsDisplayed=_.filter(this.departments[this.currentDepartmentType].employees,function(e){return t.test(e.get("name"))||t.test(""+e.get("firstName")+" "+e.get("lastName"))||t.test(e.get("firstName"))||t.test(e.get("lastName"))})},u.prototype.clearSearch=function(e){var t,n;this.searching=!1,e&&(((t=this.departments)!=null?(n=t[this.currentDepartmentType])!=null?n.employees:void 0:void 0)?this.contactsDisplayed=this.departments[this.currentDepartmentType].employees:this.contactsDisplayed=[])},u}(Backbone.View)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};hubspot.define("sidekick.SidekickSidebar.views.company.CompanyDataTable",["jQuery","sidekick.SidekickSidebar.views.datatable.DataTable","sidekick.SidekickSidebar.views.shared.AddHubSpotRecordDetail","sidekick.SidekickSidebar.views.shared.AddLeadDetail"],function(t,r,i,s){var o;return o=function(r){function o(){return this.clickedViewRecord=e(this.clickedViewRecord,this),this.clickedAddLead=e(this.clickedAddLead,this),this.render=e(this.render,this),this.update=e(this.update,this),this.refreshProperties=e(this.refreshProperties,this),this.getProperties=e(this.getProperties,this),this.updateTime=e(this.updateTime,this),o.__super__.constructor.apply(this,arguments)}return n(o,r),o.prototype.initialize=function(e,t){o.__super__.initialize.call(this,e,t),this.environment=t.environment,this.model.listenTo(this.model,"change:revenue",this.update),this.model.listenTo(this.model,"change:employees",this.update),this.model.listenTo(this.model,"change:state",this.update),this.model.listenTo(this.model,"change:existing_records",this.update),this.model.listenTo(this.model,"change:overview",this.update),this.model.listenTo(this.model,"change:local_time",this.updateTime),this.model.listenTo(this.model,"change:company_data_status",this.update),this.model.listenTo(this.model,"change:can_add_leads",this.update),this.model.listenTo(this.model,"change:last_touch_date",this.update),this.environment.user().get("use_hscrm")?this.addCRMDetailTable=new i({model:this.model,type:"company",location:"company_header"},{environment:this.environment}):this.addCRMDetailTable=new s({model:this.model,type:"company",location:"company_header"},{environment:this.environment})},o.prototype.updateTime=function(){this.$('.data-row[data-row-type="Local Time"] .data-col-value').text(this.model.get("local_time"))},o.prototype.getProperties=function(){return t.extend(!0,{},o.__super__.getProperties.call(this),{primary_properties:this.primary_properties,secondary_properties:this.secondary_properties,has_secondary_properties:this.has_secondary_properties,has_dispute_ui:this.environment.user().get("has_dispute_ui"),overview:this.model.get("overview"),is_existing_record:this.model.isExistingRecord()})},o.prototype.refreshProperties=function(){var e,t=this;return e=null,this.model.get("state")&&this.model.get("state")!=="null"?e=""+this.model.get("state")+", "+this.model.get("country"):this.model.get("country")&&this.model.get("country")!=="null"&&(e=this.model.get("country")),this.primary_properties=[{label:"Name",value:this.model.get("company_name"),property:"company_name",editonly:!0},{label:"Industry",value:this.model.get("industry"),property:"industrycode"},{label:"Employees",value:this.model.get("employees"),property:"employees"},{label:"Revenue",value:this.model.get("revenue"),property:"revenue"},{label:"Headquarters",value:e,property:"state",readonly:!0},{label:"Local Time",value:this.model.get("local_time"),property:"local_time",readonly:!0},{label:"Founded",value:this.model.get("founded"),property:"founded"},{label:"Last Contacted",value:this.model.get("last_touch_date"),property:"last_touch_date",readonly:!0}],this.secondary_properties=[{label:"Facebook",value:this.model.get("company_name"),property:"facebook_url",link:this.model.get("facebook_url"),rawvalue:!!this.model.get("facebook_url")},{label:"Twitter",value:"@"+this.model.get("twitter_name"),property:"twitter_name",link:"http://twitter.com/"+this.model.get("twitter_name"),rawvalue:!!this.model.get("twitter_name")},{label:"Blog",value:""+this.model.get("company_name")+" Blog",property:"blogurl",link:this.model.get("blogurl"),rawvalue:!!this.model.get("blog_url"),readonly:!0},{label:"Phone",value:this.model.get("phone_number"),property:"phone_number"},{label:"Address",value:this.model.get("address1"),property:"address1"},{label:"Addr. Line 2",value:this.model.get("address2"),property:"address2"},{label:"ZIP/Postal",value:this.model.get("zipcode"),property:"zipcode"},{label:"City",value:this.model.get("city"),property:"city"},{label:"Country",value:this.model.get("country"),property:"country"}],_.each(this.secondary_properties,function(e){"rawvalue"in e||(e.rawvalue=e.value);if(!e.readonly)return e.options=t.environment.bidenPropertyList().getPropertyOptions(e.property)}),_.each(this.primary_properties,function(e){if(!e.readonly)return e.options=t.environment.bidenPropertyList().getPropertyOptions(e.property)}),this.has_secondary_properties=_.some(this.secondary_properties,function(e){return e.rawvalue}),this.getProperties()},o.prototype.update=function(){return o.__super__.update.call(this,this.refreshProperties())},o.prototype.render=function(){return o.__super__.render.call(this,this.refreshProperties())},o.prototype.clickedAddLead=function(){o.__super__.clickedAddLead.apply(this,arguments),this.environment.trackAction('Sidekick: "Expanded Add Record Form"',{type:"company",location_in_sidebar:"company_header"})},o.prototype.clickedViewRecord=function(){o.__super__.clickedViewRecord.apply(this,arguments),this.environment.trackAction('Sidekick: "Viewed CRM Record"',{type:"company",location_in_sidebar:"company_header"})},o}(r)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};hubspot.define("sidekick.SidekickSidebar.views.company.ContactsHeader",["jQuery","sidekick.SidekickSidebar.views.company.CompanyContactsTable","sidekick.SidekickSidebar.views.company.CompanyConnectionsTable"],function(t,r,i){var s;return s=function(t){function s(){return this.unattach=e(this.unattach,this),this.clearSearch=e(this.clearSearch,this),this.searchContacts=e(this.searchContacts,this),this.keyupSearchName=e(this.keyupSearchName,this),this.clickedIntoSearch=e(this.clickedIntoSearch,this),this.render=e(this.render,this),s.__super__.constructor.apply(this,arguments)}return n(s,t),s.prototype.className="contacts-header",s.prototype.template=jade.templates.contacts_header,s.prototype.events={"click .name-search-term":"clickedIntoSearch","keyup .name-search-term":"keyupSearchName","click .clear-search-button":"clearSearch"},s.prototype.initialize=function(e,t){this.environment=t.environment,this.departments=!0,this.hasEmployees=!0,this.searching=!1,this.sub_views=[],this.companyContactsTable=new r({model:this.model},{environment:this.environment}),this.companyConnectionsTable=new i({model:this.model},{environment:this.environment}),this.sub_views.push(this.companyContactsTable),this.sub_views.push(this.companyConnectionsTable)},s.prototype.render=function(){return this.$el.html(this.template({hasEmployees:this.hasEmployees,searching:this.searching,departments:this.departments})),this.$el.append(this.companyConnectionsTable.render()),this.companyConnectionsTable.delegateEvents(),this.$el.append(this.companyContactsTable.render()),this.companyContactsTable.delegateEvents(),this.$el},s.prototype.clickedIntoSearch=function(){this.environment.trackAction('Sidekick: "Clicked Into Search Bar"')},s.prototype.keyupSearchName=function(e){return this.$(".name-search-term").val().length>0?this.searchContacts():this.clearSearch()},s.prototype.searchContacts=function(){var e;this.searching=!0,e=this.$(".name-search-term").val(),this.companyContactsTable.searchContacts(e),this.companyConnectionsTable.searchContacts(e),this.render(),this.$(".name-search-term").val(e),this.$(".name-search-term").focus()},s.prototype.clearSearch=function(){var e;this.searching=!1,e=this.$(".name-search-term").val().length>0,this.companyContactsTable.clearSearch(e),this.companyConnectionsTable.clearSearch(e),this.render(),e||this.$(".name-search-term").focus()},s.prototype.unattach=function(){var e,t,n,r,i,s=this;e=function(e){var t;return(t=s.model)!=null&&t.off(null,null,e),e.undelegateEvents(),e.$el.removeData().unbind(),e.remove(),Backbone.View.prototype.remove.call(e)},i=this.sub_views;for(n=0,r=i.length;n<r;n++)t=i[n],e(t);e(this)},s}(Backbone.View)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};hubspot.define("sidekick.SidekickSidebar.views.company.ExistingRecordsTable",["jQuery","sidekick.SidekickSidebar.views.shared.AddLeadDetail"],function(t,r){var i;return i=function(i){function s(){return this.updateExistingRecordModels=e(this.updateExistingRecordModels,this),this.clickedEditAccountRecord=e(this.clickedEditAccountRecord,this),this.clickedEditOpportunityRecord=e(this.clickedEditOpportunityRecord,this),this.clickedEditLeadRecord=e(this.clickedEditLeadRecord,this),this.clickedRecord=e(this.clickedRecord,this),this.clickedClaimLeadRecord=e(this.clickedClaimLeadRecord,this),this.clickedSaveRecord=e(this.clickedSaveRecord,this),this.clickedViewRecord=e(this.clickedViewRecord,this),this.clickedExpand=e(this.clickedExpand,this),this.scrollDown=e(this.scrollDown,this),this.scrollUp=e(this.scrollUp,this),this.formatExistingRecords=e(this.formatExistingRecords,this),this.render=e(this.render,this),s.__super__.constructor.apply(this,arguments)}return n(s,i),s.prototype.className="existing-records-table",s.prototype.template=jade.templates.existing_records_table,s.prototype.events={"click .link-list a.expand-link":"clickedExpand","click .lead-record.existing-record a.edit-record-action":"clickedEditLeadRecord","click .opportunity-record.existing-record a.edit-record-action":"clickedEditOpportunityRecord","click .account-record.existing-record a.edit-record-action":"clickedEditAccountRecord","click .lead-record.existing-record a.claim-record-action":"clickedClaimLeadRecord","click .existing-records-list a.save-record":"clickedSaveRecord","click .view-record-action":"clickedViewRecord"},s.prototype.initialize=function(e,t){this.environment=t.environment,this.model.listenTo(this.model,"change:salesforce_instance_url",this.render),this.model.listenTo(this.model,"change:existing_records",this.render),this.model.listenTo(this.model,"change:salesforce_error_message",this.render),this.model.listenTo(this.model,"change:company_name",this.render),this.existing_records_models=[],this.existing_records=null,this.limited=!0},s.prototype.render=function(){var e,t,n,r,i,s;return this.limited?n=4:n=1e3,this.existing_records=this.model.get("existing_records"),i=null,this.model.get("salesforce_error_message")&&(typeof console!="undefined"&&console!==null&&console.log(this.model.get("salesforce_error_message")),i=this.model.get("salesforce_error_message")[0].message),s=this.formatExistingRecords(n),t=s[0],r=s[1],this.environment.user().get("use_hscrm")?e=this.model.get("hubspot_base_url"):this.environment.user().get("use_salesforce")&&(e=this.model.get("salesforce_instance_url")),this.$el.html(this.template({existing_records:this.existing_records,formatted_existing_records:t,num_total_records:r,crm_base_url:e,salesforce_error_message:i,salesforceSettingsUrl:this.environment.getWebappUrl("/settings#salesforce"),company_name:this.model.get("company_name"),limited:this.limited,limit:n})),r<1?this.$el.hide():this.$el.show(),this.$(".tippable").tooltip(),this.$el},s.prototype.formatExistingRecords=function(e){var t,n,r,i,s,o,u,a,f,l;s={object_primary:"lead",object_secondary:"opportunity",object_tertiary:"account",object_quaternary:"contact"};if(this.existing_records){t={},i=0,r=0;for(u in s){a=s[u],t[a]=[];if(this.existing_records.get(u)){n=this.existing_records.get(u).toJSON(),r+=n.length;for(f=0,l=n.length;f<l;f++){o=n[f];if(!(i<e))continue;i++,t[a].push(o)}}}}return[t,r]},s.prototype.scrollUp=function(){this.$el.slideUp()},s.prototype.scrollDown=function(){this.render(),this.$el.slideDown()},s.prototype.clickedExpand=function(){this.environment.trackAction('Sidekick: "Existing Records Table Action"',{trigger:"Clicked Expand Existing Records"}),this.limited=!this.limited,this.render()},s.prototype.clickedViewRecord=function(e){e.preventDefault(),this.environment.trackAction('Sidekick: "Existing Records Table Action"',{trigger:"Clicked View Existing Record"}),window.open(t(e.currentTarget).attr("data-record-url"))},s.prototype.clickedSaveRecord=function(e){var n;n=t(e.currentTarget).parents(".edit-lead-detail").prev(".existing-record"),n.addClass("saving-record")},s.prototype.clickedClaimLeadRecord=function(e){var n,r;e.preventDefault(),n=t(e.currentTarget).parents(".existing-record"),r=this.existing_records.get("leads").get(n.data("id")),r.set("add_lead_state",this.model.get("add_lead_state")),n.addClass("claiming"),r.claimLead(function(e){return n.removeClass("claiming"),n.addClass("claimed"),e.success?n.addClass("claim-success"):(typeof console!="undefined"&&console!==null&&console.error("ERROR: "+e.error),n.addClass("claim-error"),Raven.captureMessage("Error claiming lead.",{extra:{message:JSON.stringify(e.error)}}))})},s.prototype.clickedRecord=function(e,t){var n;this.$(".edit-lead-detail").slideUp(),e.hasClass("highlight")?this.$(".existing-record").removeClass("highlight"):(this.$(".existing-record").removeClass("highlight"),this.existing_records_models.push(t),this.model.listenTo(this.model,"change:add_lead_state",this.updateExistingRecordModels),n=new r({model:t},{environment:this.environment}),e.after(n.render().hide()),n.scrollDown())},s.prototype.clickedEditLeadRecord=function(e){var n,r;return e.preventDefault(),this.environment.trackAction('Sidekick: "Existing Records Table Action"',{trigger:"Clicked Edit Lead"}),n=t(e.currentTarget).parents(".existing-record"),r=this.existing_records.get("leads").get(n.data("id")),r.set("add_lead_state",this.model.get("add_lead_state")),this.clickedRecord(n,r)},s.prototype.clickedEditOpportunityRecord=function(e){var n,r;return e.preventDefault(),this.environment.trackAction('Sidekick: "Existing Records Table Action"',{trigger:"Clicked Edit Opportunity"}),n=t(e.currentTarget).parents(".existing-record"),r=this.existing_records.get("opportunities").get(n.data("id")),r.set("add_lead_state",this.model.get("add_lead_state")),this.clickedRecord(n,r)},s.prototype.clickedEditAccountRecord=function(e){var n,r;return e.preventDefault(),this.environment.trackAction('Sidekick: "Existing Records Table Action"',{trigger:"Clicked Edit Account"}),n=t(e.currentTarget).parents(".existing-record"),r=this.existing_records.get("accounts").get(n.data("id")),r.set("add_lead_state",this.model.get("add_lead_state")),this.clickedRecord(n,r)},s.prototype.updateExistingRecordModels=function(){var e,t,n,r,i;r=this.existing_record_models,i=[];for(t=0,n=r.length;t<n;t++)e=r[t],i.push(e.set("add_lead_state",this.model.get("add_lead_state")));return i},s}(Backbone.View)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};hubspot.define("sidekick.SidekickSidebar.views.company.RelatedCompaniesTable",["jQuery"],function(t){var r;return r=function(r){function i(){return this.clickedRelatedCompany=e(this.clickedRelatedCompany,this),this.clickedHeader=e(this.clickedHeader,this),this.scrollUp=e(this.scrollUp,this),this.scrollDown=e(this.scrollDown,this),this.render=e(this.render,this),i.__super__.constructor.apply(this,arguments)}return n(i,r),i.prototype.className="related-companies-table",i.prototype.template=jade.templates.related_companies_table,i.prototype.events={"click .link-list-header a.expand-link":"clickedHeader","click a.related-company-link":"clickedRelatedCompany"},i.prototype.initialize=function(e,t){this.environment=t.environment,this.model.on("change:related_companies",this.render)},i.prototype.render=function(){var e;return e=this.model.get("related_companies"),this.$el.html(this.template({related_companies:e,company_name:this.model.get("company_name"),has_salesforce:this.environment.user().get("has_salesforce")})),t(".related_companies-list",this.$el).show(),e&&e.length>0&&t(".view-related_companies",this.$el).fadeIn("fast"),this.$(".tippable").tooltip(),this.$el},i.prototype.scrollDown=function(){t(".related_companies-list",this.$el).slideDown(),this.$el.addClass("visible")},i.prototype.scrollUp=function(){t(".related_companies-list",this.$el).slideUp(),this.$el.removeClass("visible")},i.prototype.clickedHeader=function(){this.$(".link-list-header").toggleClass("expanded"),this.$(".link-list").toggleClass("expanded")},i.prototype.clickedRelatedCompany=function(e){var n,r;return e.preventDefault(),this.environment.trackAction('Sidekick: "Clicked Related Company Link"',{location_in_sidebar:"related_companies"}),n=t(e.currentTarget).parents(".related-company"),r="http://"+n.data("domain")+"?insights=true",window.open(r,"_blank")},i}(Backbone.View)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};hubspot.define("sidekick.SidekickSidebar.views.contact.BlurredActivitiesTable",["jQuery","sidekick.SidekickSidebar.experiments.blurredStreamNamespace"],function(t,r){var i;return i=function(t){function i(){return this.render=e(this.render,this),this.redirectToStream=e(this.redirectToStream,this),this.registerParam=e(this.registerParam,this),i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.className="signals-blurred-activities-table",i.prototype.template=jade.templates.blurred_activities_table,i.prototype.events={"click a.blurred-stream-cta":"redirectToStream"},i.prototype.initialize=function(e,t){this.environment=t.environment,this.metadata={}},i.prototype.registerParam=function(e,t){return this.metadata[e]=t},i.prototype.redirectToStream=function(e){var t;return e.preventDefault(),this.environment.trackAction("Clicked to go to stream from Blurred Sidebar"),t=this.environment.getWebappUrl("stream"),window.open(t,"_blank")},i.prototype.render=function(){return this.metadata.streamType!=null&&(r._experiment._exposureLogged||r.logExposure(),this.$el.html(this.template({blurred:this.metadata.streamType}))),this.$(".tippable").tooltip(),this.$el},i}(Backbone.View)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};hubspot.define("sidekick.SidekickSidebar.views.contact.ContactDataTable",["jQuery","_","sidekick.SidekickSidebar.views.datatable.DataTable","sidekick.SidekickSidebar.views.shared.AddHubSpotRecordDetail","sidekick.SidekickSidebar.views.shared.AddLeadDetail","sidekick.SidekickSidebar.experiments.graphExperimentsNamespace"],function(t,r,i,s,o,u){var a;return a=function(i){function a(){return this.clickedViewRecord=e(this.clickedViewRecord,this),this.clickedAddLead=e(this.clickedAddLead,this),this.render=e(this.render,this),this.update=e(this.update,this),this.updateFromInvite=e(this.updateFromInvite,this),this.renderRequestedUpdateContactInfo=e(this.renderRequestedUpdateContactInfo,this),this.refreshProperties=e(this.refreshProperties,this),this.getProperties=e(this.getProperties,this),this.logExposure=e(this.logExposure,this),a.__super__.constructor.apply(this,arguments)}return n(a,i),a.prototype.initialize=function(e,t){var n=this;a.__super__.initialize.call(this,e,t),this.environment=t.environment,this.model.listenTo(this.model,"change:description",this.update),this.model.listenTo(this.model,"change:hasPendingUpdateInfoRequest",this.update),this.model.get("companyObject")&&this.model.listenTo(this.model.get("companyObject"),"change:existing_records",this.update),this.environment.user().get("showViralInviteButton")==="network"&&(this.inviteModel=this.model.getInviteModel(),this.listenTo(this.inviteModel,"sync",this.updateFromInvite),r.defer(function(){return n.inviteModel.fetch()})),this.environment.user().get("disableRequestUpdatedInfoButton")||this.logExposure(),this.environment.user().get("use_hscrm")?this.addCRMDetailTable=new s({model:this.model,type:"contact",location:"contact_profile_view"},{environment:this.environment}):this.addCRMDetailTable=new o({model:this.model,type:"contact",location:"contact_profile_view"},{environment:this.environment})},a.prototype.logExposure=function(){if(!u._experiment._exposureLogged)return u.logExposure()},a.prototype.getProperties=function(){return t.extend(!0,{},a.__super__.getProperties.call(this),{primary_properties:this.primary_properties,secondary_properties:this.secondary_properties,has_secondary_properties:!1,has_dispute_ui:this.environment.user().get("has_dispute_ui"),overview:this.model.get("description"),is_existing_record:this.model.isExistingRecord(),phone_number:this.model.get("phone_number")})},a.prototype.refreshProperties=function(){var e,t,n,r,i,s,o,u=this;return this.primary_properties=[{label:"Last Contacted",value:this.model.get("last_touch_date")},{label:"Lifecycle Stage",value:this.model.get("lifecycle_stage")}],this.environment.user().get("use_salesforce")&&(((t=this.model.get("existing_records"))!=null?t.get("contacts"):void 0)!=null&&((n=this.model.get("existing_records"))!=null?(r=n.get("contacts"))!=null?r.length:void 0:void 0)>0?e=this.model:this.model.get("companyObject")&&((i=this.model.get("companyObject").get("existing_records"))!=null?i.get("contacts"):void 0)!=null&&(e=this.model.get("companyObject")),e&&(this.model.set("is_existing_record",!1),(s=e.get("existing_records"))!=null&&(o=s.get("contacts"))!=null&&o.each(function(e){var t,n;if((e!=null?(t=e.get("email"))!=null?t.toLowerCase():void 0:void 0)===((n=u.model.get("email"))!=null?n.toLowerCase():void 0))return u.model.set("record_url",e.getSalesforceUrl()),u.model.set("is_existing_record",!0)}))),this.getProperties()},a.prototype.renderRequestedUpdateContactInfo=function(){if(this.model.get("hasPendingUpdateInfoRequest")===!1)return this.$(".request-updated-info-button-and-subtext").removeClass("hide");if(!this.$(".request-updated-info-button-and-subtext").hasClass("hide"))return this.$(".request-updated-info-button-and-subtext").addClass("hide")},a.prototype.updateFromInvite=function(){return this.logExposure(),this.environment.trackAction
("Viewed Requested To Invite CTA",{variation:"ShowRequestUpdatedInfoButtonWithExperimentCriteria"}),this.update()},a.prototype.update=function(){return this.environment.user().get("disableRequestUpdatedInfoButton")?this.environment.user().get("showViralInviteButton")==="network"&&this.inviteModel.get("show_invite")&&this.renderRequestedUpdateContactInfo():this.renderRequestedUpdateContactInfo(),this.$(".show-more-row").addClass("hide"),a.__super__.update.call(this,this.refreshProperties())},a.prototype.render=function(){return this.environment.user().get("disableRequestUpdatedInfoButton")?this.environment.user().get("showViralInviteButton")==="network"&&this.inviteModel.get("show_invite")&&(this.logExposure(),this.environment.trackAction("Viewed Requested To Update Contact Info CTA",{variation:"ShowRequestUpdatedInfoButtonWithExperimentCriteria"}),this.renderRequestedUpdateContactInfo()):(this.renderRequestedUpdateContactInfo(),this.environment.trackAction("Viewed Requested To Update Contact Info CTA",{variation:"hasRequestUpdatedInfoButton"})),this.$(".show-more-row").addClass("hide"),a.__super__.render.call(this,this.refreshProperties())},a.prototype.clickedAddLead=function(){a.__super__.clickedAddLead.apply(this,arguments),this.environment.trackAction('Sidekick: "Expanded Add Record Form"',{type:"contact",location_in_sidebar:"contact_profile_view"})},a.prototype.clickedViewRecord=function(){a.__super__.clickedViewRecord.apply(this,arguments),this.environment.trackAction('Sidekick: "Viewed CRM Record"',{type:"contact",location_in_sidebar:"contact_profile_view"})},a}(i)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};hubspot.define("sidekick.SidekickSidebar.views.contact.InviteView",["jQuery","_","sidekick.SidekickSidebar.experiments.graphExperimentsNamespace"],function(t,r,i){var s;return s=function(t){function s(){return this.clickedCancelInvite=e(this.clickedCancelInvite,this),this.clickedInvite=e(this.clickedInvite,this),this.render=e(this.render,this),this.getButtonText=e(this.getButtonText,this),this.getInviteText=e(this.getInviteText,this),this.getFirstName=e(this.getFirstName,this),this.blackListUser=e(this.blackListUser,this),this.getBlackListedUsers=e(this.getBlackListedUsers,this),this.initialize=e(this.initialize,this),s.__super__.constructor.apply(this,arguments)}return n(s,t),s.prototype.template=jade.templates.invite,s.prototype.className="invite-contact",s.prototype.events={"click a.invite-link":"clickedInvite","click .invite-cancel":"clickedCancelInvite"},s.prototype.initialize=function(e,t){var n=this;return this.environment=t.environment,this.localStorageKey="sidekick_no_show_invites",this.model.listenTo(this.model,"change:name",this.render),this.inviteModel=this.model.getInviteModel(),this.listenTo(this.inviteModel,"sync",this.render),r.defer(function(){return n.inviteModel.fetch()})},s.prototype.getBlackListedUsers=function(){var e;return e=window.localStorage.getItem(this.localStorageKey),e!=null&&(e=JSON.parse(e)),e},s.prototype.blackListUser=function(e){var t;return t=this.getBlackListedUsers(),t==null?t=[e]:t.push(e),window.localStorage.setItem(this.localStorageKey,JSON.stringify(t))},s.prototype.getFirstName=function(){var e;return e=this.model.get("name"),e!=null&&(e=e.split(" ")[0]),e},s.prototype.getInviteText=function(e){return"Get"},s.prototype.getButtonText=function(e){return e!=null&&e.length<10?"Invite "+e:"Invite"},s.prototype.render=function(){var e,t,n;return this.inviteModel.get("show_invite")&&(t=this.getFirstName(),e=this.getBlackListedUsers(),n=!0,e!=null&&e.indexOf(this.model.get("email"))>-1&&(n=!1),n?(this.environment.get("user").get("showViralInviteButton")==="invite"&&(i._experiment._exposureLogged||i.logExposure()),this.environment.trackSidekickAction("Sidekick: Viewed Invite CTA in Sidebar"),this.$el.html(this.template({inviteText:this.getInviteText(t),buttonText:this.getButtonText(t)})),this.$el.show()):this.$el.hide()),this.$el},s.prototype.clickedInvite=function(e){var t,n,r,i=this;return e.preventDefault(),this.$(".invite-text").html("Sending invite"),t={invitee_emails:this.model.get("email")},this.environment.trackSidekickAction("Sidekick: Clicked to invite user through Sidebar"),r=function(e){return e.failed.length?(i.environment.trackSidekickAction("Sidekick: Invited user through Sidebar Failed"),i.$(".invite-text").html("Invite failed to send :(")):(i.environment.trackSidekickAction("Sidekick: Successfully Invited user through Sidebar"),i.$(".invite-text").html("Invite Successfully Sent!"))},n=function(e){return i.environment.trackSidekickAction("Sidekick: Invited user through Sidebar Failed"),i.$(".invite-text").html("Invite failed to send :(")},this.inviteModel.sendInvite(t,r,n)},s.prototype.clickedCancelInvite=function(e){return e.preventDefault(),this.blackListUser(this.model.get("email")),this.environment.trackSidekickAction("Sidekick: Hid sidebar invite"),this.render()},s}(Backbone.View)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};hubspot.define("sidekick.SidekickSidebar.views.contact.MutualConnectionsTable",["jQuery","sidekick.SidekickSidebar.models.contact.Connector"],function(t,r){var i;return i=function(r){function o(){return this.clickedExpand=e(this.clickedExpand,this),this.clickedEmail=e(this.clickedEmail,this),this.render=e(this.render,this),o.__super__.constructor.apply(this,arguments)}var i,s;return n(o,r),o.prototype.className="mutual-connections-table",o.prototype.template=jade.templates.mutual_connections_table,o.prototype.events={"click a.contact-link":"clickedEmail","click .link-list a.expand-link":"clickedExpand"},s=8,i=50,o.prototype.initialize=function(e,t){this.environment=t.environment,this.model.listenTo(this.model,"change:mutualConnections",this.update),this.limited=!0},o.prototype.render=function(){var e,t;return this.limited?e=s:e=i,this.connectors=(t=this.model)!=null?t.get("connectors"):void 0,this.$el.html(this.template({hasConnectors:this.connectors!=null,connectors:this.connectors,userDomain:this.environment.user().getDomain(),limited:this.limited,limit:e,defaultImgUrl:""+hubspot.bender.staticDomainPrefix+"/SidekickSidebar/static-1.279/img/avatar.png"})),this.$el},o.prototype.clickedEmail=function(e){var n,r,i,s;e.preventDefault(),r=(s=t(e.currentTarget).parents(".connector-row"))!=null?s.attr("cid"):void 0,n=this.model.get("connectors").get(r),i=n.get("connectorEmail"),this.environment.trackAction('Sidekick: "Clicked Name To Email"',{location_in_sidebar:"contact_profile_view",type:"connector"}),this.environment.get("is_gmail")?this.environment.postMessage("emailGmail",{email:i}):window.open("mailto:"+i)},o.prototype.clickedExpand=function(){this.limited&&this.environment.trackAction('Sidekick: "Clicked Show All"',{location_in_sidebar:"contact_profile_view",type:"connector"}),this.limited=!this.limited,this.render()},o}(Backbone.View)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};hubspot.define("sidekick.SidekickSidebar.views.contact.SignalsActivitiesTable",["jQuery","sidekick.SidekickSidebar.experiments.blurredStreamNamespace"],function(t,r){var i;return i=function(r){function i(){return this.clickedThread=e(this.clickedThread,this),this.render=e(this.render,this),i.__super__.constructor.apply(this,arguments)}return n(i,r),i.prototype.className="signals-activities-table",i.prototype.template=jade.templates.signals_activities_table,i.prototype.events={"click a.activity-link":"clickedThread"},i.prototype.initialize=function(e,t){this.environment=t.environment,this.metadata={},this.model.listenTo(this.model,"change:activities",this.render),this.limited=!0},i.prototype.render=function(){var e;return this.activities=this.model.get("activities"),this.limited?this.environment.get("is_user_profile")?e=20:e=6:e=1e3,this.$el.html(this.template({activities:this.activities,limited:this.limited,limit:e,is_user_profile:this.environment.get("is_user_profile")})),this.$(".tippable").tooltip(),this.$el},i.prototype.clickedThread=function(e){var n,r;e.preventDefault(),this.environment.trackAction('Sidekick: "Clicked Sidekick History Event"'),n=t(e.currentTarget).attr("href"),r=n.split("#"),r.length>1&&this.environment.get("is_gmail")?(typeof console!="undefined"&&console!==null&&console.log(r[1]),this.environment.postMessage("threadGmail",{message_hash:r[1]})):(e.stopPropagation(),window.open(n,"_blank"))},i}(Backbone.View)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};hubspot.define("sidekick.SidekickSidebar.views.contact.SocialStreamsContainer",["jQuery","sidekick.SidekickSidebar.views.contact.MutualConnectionsTable","sidekick.SidekickSidebar.views.contact.SignalsActivitiesTable","sidekick.SidekickSidebar.views.contact.TwitterTimeline","sidekick.SidekickSidebar.experiments.blurredStreamNamespace","sidekick.SidekickSidebar.views.contact.BlurredActivitiesTable"],function(t,r,i,s,o,u){var a;return a=function(a){function f(){return this.remove=e(this.remove,this),this.clickedSocialLink=e(this.clickedSocialLink,this),this.clickedEmail=e(this.clickedEmail,this),this.selectStream=e(this.selectStream,this),this.switchStream=e(this.switchStream,this),this.update=e(this.update,this),this.render=e(this.render,this),f.__super__.constructor.apply(this,arguments)}return n(f,a),f.prototype.className="social-streams-container",f.prototype.template=jade.templates.social_streams_container,f.prototype.events={"click .stream-heading":"selectStream","click a.email-link":"clickedEmail","click a.social-link":"clickedSocialLink"},f.prototype.initialize=function(e,t){this.environment=t.environment,this.model.listenTo(this.model,"change:connectors",this.update),this.model.listenTo(this.model,"change:activities",this.update),this.model.listenTo(this.model,"change:twitter_name",this.update),this.model.listenTo(this.model,"change:social_profiles",this.update),this.mutualConnectionsTable=new r({model:this.model},{environment:this.environment}),this.signalsActivitiesTable=new i({model:this.model},{environment:this.environment}),this.twitterTimeline=new s({model:this.model},{environment:this.environment}),this.blurredActivitiesTable=new u({model:this.model},{environment:this.environment}),this.blurred=o.get("streamType")},f.prototype.render=function(e){return this.rendered||(this.rendered=!0,this.$el.html(this.template(e))),this.update(e),this.$el},f.prototype.update=function(e){var t,n,r,i,s,u;this.environment.user().get("disable_mutual_connections_in_gmail")?this.environment.user().get("is_overlimit")&&this.blurred!=null&&this.blurred!=="control"?(this.blurredActivitiesTable.registerParam("streamType",this.blurred),this.$('.stream-heading[data-stream-type="signals"]').removeClass("hide"),this.$('.social-stream[data-stream-type="signals"]').html(this.blurredActivitiesTable.render()),this.blurredActivitiesTable.delegateEvents(),this.selected_stream||(this.current_stream="signals",this.switchStream()),this.model.get("twitter_name")&&(this.$('.stream-heading[data-stream-type="twitter"]').removeClass("hide"),this.$('.social-stream[data-stream-type="twitter"]').html(this.twitterTimeline.render()))):(this.blurred!=null&&this.blurred==="control"&&this.environment.user().get("is_overlimit")&&(o._experiment._exposureLogged||o.logExposure()),this.model.get("activities")&&(this.model.get("activities").length>0&&(this.$('.stream-heading[data-stream-type="signals"]').removeClass("hide"),this.$('.social-stream[data-stream-type="signals"]').html(this.signalsActivitiesTable.render()),this.signalsActivitiesTable.delegateEvents(),this.selected_stream||(this.current_stream="signals",this.switchStream())),this.model.get("twitter_name")&&(this.$('.stream-heading[data-stream-type="twitter"]').removeClass("hide"),this.$('.social-stream[data-stream-type="twitter"]').html(this.twitterTimeline.render()),!this.selected_stream&&this.model.get("activities").length===0&&(this.current_stream="twitter",this.switchStream())))):(this.$('.stream-heading[data-stream-type="network"]').removeClass("hide"),this.$('.social-stream[data-stream-type="network"]').html(this.mutualConnectionsTable.render()),this.mutualConnectionsTable.delegateEvents(),this.selected_stream||(this.current_stream="network",this.switchStream()),this.model.get("activities")&&(this.model.get("activities").length>0&&(this.$('.stream-heading[data-stream-type="signals"]').removeClass("hide"),this.$('.social-stream[data-stream-type="signals"]').html(this.signalsActivitiesTable.render()),this.signalsActivitiesTable.delegateEvents()),this.model.get("twitter_name")&&(this.$('.stream-heading[data-stream-type="twitter"]').removeClass("hide"),this.$('.social-stream[data-stream-type="twitter"]').html(this.twitterTimeline.render()))));if(this.model.get("social_profiles")){i=[];if(r=this.model.get("social_profiles"))for(s=0,u=r.length;s<u;s++)n=r[s],n.typeid!=="twitter"&&(n.username?t=n.username:t=""+n.typename+" Page",i.push({label:n.typename,iconname:n.iconname,value:t,link:n.url,rawvalue:n.url,email:n.email!=null&&n.email}));return this.$(".other-social-links").html(jade.templates.social_properties({social_properties:i}))}},f.prototype.switchStream=function(){return this.$(".stream-heading").removeClass("active"),this.$(".stream-heading[data-stream-type="+this.current_stream+"]").addClass("active"),this.$(".social-stream").addClass("hide"),this.$(".social-stream[data-stream-type="+this.current_stream+"]").removeClass("hide")},f.prototype.selectStream=function(e){return this.selected_stream=t(e.currentTarget).data("stream-type"),this.environment.trackAction("Contact Profile Feed Toggled",{toggledFrom:this.current_stream,toggledTo:this.selected_stream}),this.current_stream=this.selected_stream,this.switchStream()},f.prototype.clickedEmail=function(e){var n;return e.preventDefault(),e.stopPropagation(),n=t(e.currentTarget).attr("href"),this.environment.postMessage("emailGmail",{email:n})},f.prototype.clickedSocialLink=function(){this.environment.trackAction("Contact Profile Social Button Clicked")},f.prototype.remove=function(){this.MutualConnectionsTable&&(this.MutualConnectionsTable.undelegateEvents(),this.MutualConnectionsTable.$el.removeData().unbind(),this.MutualConnectionsTable.remove(),Backbone.View.prototype.remove.call(this.mutualConnectionsTable)),this.signalsActivitiesTable&&(this.signalsActivitiesTable.undelegateEvents(),this.signalsActivitiesTable.$el.removeData().unbind(),this.signalsActivitiesTable.remove(),Backbone.View.prototype.remove.call(this.signalsActivitiesTable)),this.twitterTimeline&&(this.twitterTimeline.undelegateEvents(),this.twitterTimeline.$el.removeData().unbind(),this.twitterTimeline.remove(),Backbone.View.prototype.remove.call(this.twitterTimeline)),this.$el.remove()},f}(Backbone.View)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};hubspot.define("sidekick.SidekickSidebar.views.contact.TwitterTimeline",["jQuery"],function(t){var r;return r=function(r){function i(){return this.initializeTwitterWidget=e(this.initializeTwitterWidget,this),this.isRendered=e(this.isRendered,this),this.scrollUp=e(this.scrollUp,this),this.scrollDown=e(this.scrollDown,this),this.update=e(this.update,this),this.render=e(this.render,this),i.__super__.constructor.apply(this,arguments)}return n(i,r),i.prototype.className="twitter-time-line",i.prototype.template=jade.templates.twitter_timeline,i.prototype.initialize=function(e,t){this.widget_id="504028277741060096",this.limit=3},i.prototype.render=function(){return this.update(),this.$el},i.prototype.update=function(){return!this.rendered&&this.model.get("twitter_name")&&(this.rendered=!0,this.$el.html(this.template({twitter_name:this.model.get("twitter_name"),widget_id:this.widget_id,limit:this.limit})),this.initializeTwitterWidget(),this.$(".tippable").tooltip()),this.$el},i.prototype.scrollDown=function(){t(".twitter-time-line",this.$el).slideDown(),this.$el.addClass("visible")},i.prototype.scrollUp=function(){t(".twitter-time-line",this.$el).slideUp(),this.$el.removeClass("visible")},i.prototype.isRendered=function(){return this.rendered},i.prototype.initializeTwitterWidget=function(){var e,t;t=function(e,t,n){var r,i,s;i=void 0,r=e.getElementsByTagName(t)[0],s=/^http:/.test(e.location)?"http":"https",i=e.createElement(t),i.id=n,i.src=s+"://platform.twitter.com/widgets.js",r.parentNode.insertBefore(i,r)},e=Math.floor(Math.random()*1e4),t(document,"script",this.model.get("twitter_name")+e)},i}(Backbone.View)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};hubspot.define("sidekick.SidekickSidebar.views.datatable.DataTable",["jQuery","sidekick.SidekickSidebar.models.biden.Dispute","sidekick.SidekickSidebar.models.biden.Disputes","sidekick.SidekickSidebar.views.datatable.PropertyRows"],function(t,r,i,s){var o;return o=function(o){function u(){return this.typedCorrection=e(this.typedCorrection,this),this.hideDisputeSuccessText=e(this.hideDisputeSuccessText,this),this.showDisputeSuccessText=e(this.showDisputeSuccessText,this),this.closeDispute=e(this.closeDispute,this),this.clickedSubmitDispute=e(this.clickedSubmitDispute,this),this.clickedToggleCRM=e(this.clickedToggleCRM,this),this.clickedCallRecord=e(this.clickedCallRecord,this),this.clickedViewRecord=e(this.clickedViewRecord,this),this.clickedSaveRecord=e(this.clickedSaveRecord,this),this.clickedCancelDispute=e(this.clickedCancelDispute,this),this.clickedImproveData=e(this.clickedImproveData,this),this.clickedRequestUpdatedInfo=e(this.clickedRequestUpdatedInfo,this),this.clickedShowMore=e(this.clickedShowMore,this),this.clickedCancelAddLead=e(this.clickedCancelAddLead,this),this.clickedAddLead=e(this.clickedAddLead,this),this.expandedItem=e(this.expandedItem,this),this.scrollDown=e(this.scrollDown,this),this.scrollUp=e(this.scrollUp,this),this.getProperties=e(this.getProperties,this),this.update=e(this.update,this),this.render=e(this.render,this),u.__super__.constructor.apply(this,arguments)}return n(u,o),u.prototype.className="data-table",u.prototype.template=jade.templates.data_table,u.prototype.events={"click .expandable":"expandedItem","click a.banner-button.add-to-crm":"clickedAddLead","click a.cancel":"clickedCancelAddLead","click a.show-more":"clickedShowMore","click a.request-updated-info-button":"clickedRequestUpdatedInfo","click a.improve-data":"clickedImproveData","click a.cancel-dispute":"clickedCancelDispute","click a.save-record":"clickedSaveRecord","click a.crm-toggle-link":"clickedToggleCRM","click a.call-in-crm":"clickedCallRecord","click a.view-in-crm":"clickedViewRecord","click a.submit-dispute":"clickedSubmitDispute","keyup input.editable-lead-data-field":"typedCorrection"},u.prototype.rendered=!1,u.prototype.initialize=function(e,t){this.environment=t.environment,this.primaryPropertyRows=new s(null,{environment:this.environment,parent:this.model}),this.secondaryPropertyRows=new s({hidden:!0},{environment:this.environment,parent:this.model})},u.prototype.render=function(e){var t,n=this;return t=function(){var e;return n.model.get("can_add_leads")==null?window.localStorage["can_add_leads"]!=null?e=window.localStorage.can_add_leads==="true":e=!1:e=n.model.get("can_add_leads"),n.environment.user().get("use_salesforce")===!0&&e===!0||!!n.environment.user().get("use_hscrm")?n.$el.removeClass("no-salesforce"):n.$el.addClass("no-salesforce")},this.rendered||(this.rendered=!0,this.$el.html(this.template(e)),this.$(".crm-controls").hide(),this.$(".primary-properties").html(this.primaryPropertyRows.render()),this.$(".secondary-properties").html(this.secondaryPropertyRows.render()),this.$(".link-list").after(this.addCRMDetailTable.render()),t()),this.update(e),this.$el},u.prototype.update=function(e){var t,n,r;(e!=null?e.primary_properties:void 0)&&this.primaryPropertyRows.update(e.primary_properties),(e!=null?e.secondary_properties:void 0)&&this.secondaryPropertyRows.update(e.secondary_properties),(e!=null?!e.has_secondary_properties:!void 0)?this.$("a.show-more").hide():this.$("a.show-more").show();if((n=this.$(".overview a.lead-overview"))!=null?n.hasClass("expanded"):void 0)t=!0;(e!=null?e.overview:void 0)!=null&&e.overview!=="None"&&e.overview!==""&&(this.$(".overview").html(jade.templates.overview(e)),t&&(r=this.$(".overview a.lead-overview"))!=null&&r.addClass("expanded")),(e!=null?e.is_existing_record:void 0)!==null&&(e.is_existing_record?(this.$("a.add-to-crm").addClass("hide"),e.phone_number!=null&&(this.$("a.call-in-crm").removeClass("hide"),this.$("a.view-in-crm").addClass("secondary-crm-button").addClass("button-block").removeClass("input-block-level")),this.$("a.view-in-crm").removeClass("hide"),this.$(".crm-controls").fadeIn()):(this.$("a.view-in-crm").addClass("hide"),this.$("a.add-to-crm").removeClass("hide"),this.$(".crm-controls").fadeIn()))},u.prototype.getProperties=function(){return{company_name:this.model.get("company_name"),use_salesforce:this.environment.user().get("use_salesforce"),use_hscrm:this.environment.user().get("use_hscrm"),has_both_crms:this.environment.user().get("has_salesforce")&&this.environment.user().get("has_hubspot")}},u.prototype.scrollUp=function(){this.$el.addClass("hidden"),this.$el.slideUp()},u.prototype.scrollDown=function(){this.$el.slideDown()},u.prototype.expandedItem=function(e){t(e.currentTarget).toggleClass("expanded")},u.prototype.clickedAddLead=function(){this.$("a.button.add-to-crm").fadeOut(),this.addCRMDetailTable.scrollDown()},u.prototype.clickedCancelAddLead=function(){this.$("a.button.add-to-crm").fadeIn(),this.addCRMDetailTable.clickedCancel()},u.prototype.clickedShowMore=function(){this.$("a.show-more").hide(),this.secondaryPropertyRows.scrollDown()},u.prototype.clickedRequestUpdatedInfo=function(){var e,t,n,r=this;t=!0,n=function(){return r.$(".request-updated-info-submitted").removeClass("hide"),r.$(".request-updated-info-button-and-subtext").addClass("hide")},e=function(){return r.$(".request-updated-info-failed").removeClass("hide"),r.$(".request-updated-info-button-and-subtext").addClass("hide"),t=!1},this.environment.user().get("disableRequestUpdatedInfoButton")?this.environment.trackAction('Sidekick: "Clicked Request Updated Contact Info"',{recipientEmail:this.model.get("email"),success:t,variation:"ShowRequestUpdatedInfoButtonWithExperimentCriteria"}):this.environment.trackAction('Sidekick: "Clicked Request Updated Contact Info"',{recipientEmail:this.model.get("email"),success:t,variation:"hasRequestUpdatedInfoButton"}),this.model.sendUpdateInfoRequest(n,e)},u.prototype.clickedImproveData=function(){this.environment.trackAction('Sidekick: "Clicked Improve Data"'),this.hideDisputeSuccessText(),this.$(".show-more-row, .crm-controls").slideUp(),this.$(".correction-subtext").slideDown(),this.$(".data-controls").slideDown(),this.secondaryPropertyRows.scrollDown(),this.primaryPropertyRows.setEditable(!0),this.secondaryPropertyRows.setEditable(!0),this.$el.addClass("editable"),this.$(".editable-lead-details").addClass("edit-lead-detail")},u.prototype.clickedCancelDispute=function(){this.closeDispute()},u.prototype.clickedSaveRecord=function(){this.addCRMDetailTable.clickedSaveRecord()},u.prototype.clickedViewRecord=function(e){e.preventDefault(),e.stopPropagation(),window.open(this.model.getRecordUrl(),"_blank")},u.prototype.clickedCallRecord=function(e){e.preventDefault(),e.stopPropagation(),this.environment.trackAction('Sidekick: "Clicked Call CRM Record"'),window.open(""+this.model.getRecordUrl()+"#call","_blank")},u.prototype.clickedToggleCRM=function(){return this.use_hscrm?this.environment.trackAction('Sidekick: "Clicked Use Salesforce Instead"'):this.environment.trackAction('Sidekick: "Clicked Use Hubspot Instead"'),this.model.removeRecords(),this.environment.user().toggleCRM().done()},u.prototype.clickedSubmitDispute=function(){var e,n,s,o,u,a,f;this.environment.trackAction('Sidekick: "Attempted to Submit Dispute"'),n=new i(null,{domain:this.model.get("domain"),environment:this.environment}),a=_.filter(this.$(".editable-lead-data-field"),function(e){return t(e).val()});for(o=0,u=a.length;o<u;o++)s=a[o],e=t(s),((f=e.data("interpreted-value"))!=null?f.toString():void 0)!==e.val().toString()&&n.add(new r({property:this.environment.bidenPropertyList().getPropertyBidenName(e.attr("name")),suggestedValue:e.val()},{environment:this.environment}));n.save(),this.closeDispute(),this.showDisputeSuccessText()},u.prototype.closeDispute=function(){this.$(".correction-subtext").slideUp(),this.$(".data-controls").slideUp(),this.$(".show-more-row, .crm-controls").slideDown(),this.$("a.show-more").hide(),this.$el.removeClass("editable"),this.$(".editable-lead-details").removeClass("edit-lead-detail"),this.primaryPropertyRows.setEditable(!1),this.secondaryPropertyRows.setEditable(!1)},u.prototype.showDisputeSuccessText=function(){var e;e=8e3,this.$(".correction-submitted-subtext").slideDown(),setTimeout(this.hideDisputeSuccessText,e)},u.prototype.hideDisputeSuccessText=function(){this.$(".correction-submitted-subtext").slideUp()},u.prototype.typedCorrection=function(e){var n;n=t(e.currentTarget),n.val()?n.parent().addClass("edited"):n.parent().removeClass("edited")},u}(Backbone.View)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};hubspot.define("sidekick.SidekickSidebar.views.datatable.PropertyRow",["jQuery"],function(e){var n;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.className="data-row",n.prototype.label_col_template=jade.templates.data_col_label,n.prototype.link_col_template=jade.templates.data_col_link,n.prototype.default_value_col_template=jade.templates.data_col_value,n.prototype.initialize=function(e,t){this.model.isLink()?this.value_template=this.link_col_template:this.value_template=this.default_value_col_template},n.prototype.render=function(){return this.$el.html(this.label_col_template({property:this.model.toJSON()})),this.$el.append(this.value_template({property:this.model.toJSON()})),this.$el.attr("data-row-type",this.model.label()),this.$el},n.prototype.hasValue=function(){return this.model.hasValue()},n.prototype.isEditable=function(){return this.model.isEditable()},n.prototype.isReadable=function(){return this.model.isReadable()},n}(Backbone.View)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};hubspot.define("sidekick.SidekickSidebar.views.datatable.PropertyRows",["jQuery","sidekick.SidekickSidebar.models.base.Property","sidekick.SidekickSidebar.views.datatable.PropertyRow"],function(e,n,r){var i;return i=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.className="data-rows",i.prototype.propertyRows=[],i.prototype.hidden=!1,i.prototype.editable=!1,i.prototype.initialize=function(e,t){this.hidden=e.hidden,this.environment=t.environment,this.parent=t.parent},i.prototype.render=function(){var e,t,n,r;this.$el.empty(),this.hidden&&this.$el.hide(),r=this.propertyRows;for(t=0,n=r.length;t<n;t++)e=r[t],(e.isReadable()&&e.hasValue()||this.editable&&e.isEditable())&&this.$el.append(e.render());return this.$el},i.prototype.update=function(e){var t,i,s;this.propertyRows=[];for(i=0,s=e.length;i<s;i++)t=e[i],this.propertyRows.push(new r({model:new n(t,{parent:this.parent})}));return this.render()},i.prototype.scrollDown=function(){return this.hidden=!1,this.$el.slideDown()},i.prototype.setEditable=function(e){return this.editable=e,this.render()},i}(Backbone.View)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};hubspot.define("sidekick.SidekickSidebar.views.mainview.AppBar",["jQuery"],function(t){var r;return r=function(t){function r(){return this.clickedSettings=e(this.clickedSettings,this),this.clickedCloseSidekick=e(this.clickedCloseSidekick,this),this.render=e(this.render,this),r.__super__.constructor.apply(this,arguments)}return n(r,t),r.prototype.className="app-banner full-length-container",r.prototype.template=jade.templates.app_bar,r.prototype.events={"click a.close-sidekick-btn":"clickedCloseSidekick","click a.settings-sidekick-btn":"clickedSettings"},r.prototype.initialize=function(e,t){return this.environment=t.environment,this},r.prototype.render=function(){var e;return this.environment.get("is_gmail")?e=this.environment.getWebappUrl("/settings#gmail"):e=this.environment.getWebappUrl("/settings#web"),this.$el.html(this.template({settings_link:e})),this},r.prototype.clickedCloseSidekick=function(){this.environment.get("is_gmail")?(this.environment.trackAction('Sidekick: "Collapsed Sidebar in Gmail"'),this.environment.setCollapsed(!0)):this.environment.trackAction('Sidekick: "Collapsed Sidebar"'),this.environment.postMessage("closeSidekick")},r.prototype.clickedSettings=function(){this.environment.trackAction('Sidekick: "Clicked Settings"')},r}(Backbone.View)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};hubspot.define("sidekick.SidekickSidebar.views.mainview.DummyView",["jQuery"],function(t){var r;return r=function(r){function i(){return this.initializeTwitterWidget=e(this.initializeTwitterWidget,this),this.clickedEmail=e(this.clickedEmail,this),this.selectStream=e(this.selectStream,this),this.switchStream=e(this.switchStream,this),this.expandedItem=e(this.expandedItem,this),this.render=e(this.render,this),i.__super__.constructor.apply(this,arguments)}return n(i,r),i.prototype.className="dummy-view",i.prototype.template=jade.templates.dummy_view,i.prototype.events={"click .expandable":"expandedItem","click .stream-heading":"selectStream","click a.email-link":"clickedEmail"},i.prototype.initialize=function(e,t){this.environment=t.environment},i.prototype.render=function(e){return this.$el.html(this.template(e)),this.initializeTwitterWidget(),this.$el},i.prototype.expandedItem=function(e){t(e.currentTarget).toggleClass("expanded")},i.prototype.switchStream=function(){return this.$(".stream-heading").removeClass("active"),this.$(".stream-heading[data-stream-type="+this.current_stream+"]").addClass("active"),this.$(".social-stream").addClass("hide"),this.$(".social-stream[data-stream-type="+this.current_stream+"]").removeClass("hide")},i.prototype.selectStream=function(e){return this.selected_stream=t(e.currentTarget).data("stream-type"),this.current_stream=this.selected_stream,this.switchStream()},i.prototype.clickedEmail=function(e){var n;return e.preventDefault(),e.stopPropagation(),n=t(e.currentTarget).attr("href"),this.environment.postMessage("emailGmail",{email:n})},i.prototype.initializeTwitterWidget=function(){var e,t;t=function(e,t,n){var r,i,s;i=void 0,r=e.getElementsByTagName(t)[0],s=/^http:/.test(e.location)?"http":"https",i=e.createElement(t),i.id=n,i.src=s+"://platform.twitter.com/widgets.js",r.parentNode.insertBefore(i,r)},e=Math.floor(Math.random()*1e4),t(document,"script","getsidekick"+e)},i}(Backbone.View)})}.call(this),
function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};hubspot.define("sidekick.SidekickSidebar.views.mainview.DummyViewContainer",["jQuery","sidekick.SidekickSidebar.views.shared.Header","sidekick.SidekickSidebar.views.mainview.LeadView","sidekick.SidekickSidebar.views.mainview.DummyView"],function(t,r,i,s){var o;return o=function(t){function i(){return this.attach=e(this.attach,this),this.unattach=e(this.unattach,this),this.render=e(this.render,this),i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.className="experiment-dummy-lead-view-container lead-view no-status",i.prototype.initialize=function(e,t){this.environment=t.environment,this.model.set("name","Daniel Wolchonok"),this.model.set("avatar_url","/static/img/onboarding/insights-onboarding-avatar-dan.jpg"),this.model.set("title","Product Manager, Sidekick"),this.model.set("companyObject",null),this.header=new r({model:this.model,is_child_view:this.is_child_view},{environment:this.environment}),this.dummyView=new s({model:this.model},{environment:this.environment}),this.sub_views=[],this.sub_views.concat([this.header,this.dummyView])},i.prototype.render=function(){return this.$el.append(this.header.render()),this.$el.append(this.dummyView.render()),this},i.prototype.unattach=function(){return i.__super__.unattach.call(this)},i.prototype.attach=function(){this.$el.fadeIn()},i}(i)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};hubspot.define("sidekick.SidekickSidebar.views.mainview.LeadView",["jQuery","sidekick.SidekickSidebar.views.shared.Header","sidekick.SidekickSidebar.views.company.RelatedCompaniesTable","sidekick.SidekickSidebar.views.company.CompanyDataTable","sidekick.SidekickSidebar.views.company.ExistingRecordsTable","sidekick.SidekickSidebar.views.contact.SignalsActivitiesTable","sidekick.SidekickSidebar.views.contact.SocialStreamsContainer","sidekick.SidekickSidebar.views.contact.ContactDataTable","sidekick.SidekickSidebar.views.contact.InviteView","sidekick.SidekickSidebar.views.company.ContactsHeader","sidekick.SidekickSidebar.experiments.graphExperimentsNamespace"],function(t,r,i,s,o,u,a,f,l,c,h){var p;return p=function(p){function d(){return this.expandCompanyView=e(this.expandCompanyView,this),this.clickedError=e(this.clickedError,this),this.clickedViewRelatedCompanies=e(this.clickedViewRelatedCompanies,this),this.updateLeadStatus=e(this.updateLeadStatus,this),this.attach=e(this.attach,this),this.unattach=e(this.unattach,this),this.render=e(this.render,this),this.showInviteCTA=e(this.showInviteCTA,this),this.renderCompanyObject=e(this.renderCompanyObject,this),d.__super__.constructor.apply(this,arguments)}return n(d,p),d.prototype.className="lead-view",d.prototype.events={"click .related-companies-table a.view-related-companies-btn":"clickedViewRelatedCompanies","click a.banner-button.add-as-lead.adding.error":"clickedError","click .child-lead-view .header":"expandCompanyView"},d.prototype.initialize=function(e,t){this.environment=t.environment,this.model.listenTo(this.model,"change:status",this.updateLeadStatus),this.domain=this.model.get("domain"),!this.domain&&this.model.get("companyObject")&&(this.domain=this.model.get("companyObject").get("domain")),this.is_child_view=e.is_child_view,this.sub_views=[],this.model.get("type")==="company"?(this.header=new r({model:this.model,is_child_view:this.is_child_view},{environment:this.environment}),this.contactsHeader=new c({model:this.model},{environment:this.environment}),this.relatedCompaniesTable=new i({model:this.model},{environment:this.environment}),this.dataTable=new s({model:this.model},{environment:this.environment}),this.existingRecordsTable=new o({model:this.model},{environment:this.environment}),this.sub_views.concat([this.header,this.contactsHeader,this.relatedCompaniesTable,this.dataTable,this.existingRecordsTable])):this.model.get("type")==="contact"&&(this.environment.get("is_user_profile")?(this.signalsActivitiesTable=new u({model:this.model},{environment:this.environment}),this.sub_views.push(this.signalsActivitiesTable)):(this.header=new r({model:this.model,is_child_view:this.is_child_view},{environment:this.environment}),this.model.get("no-reply")||(this.environment.user().set("disableRequestUpdatedInfoButton",h.get("hasRequestUpdatedInfoButton")==null),this.environment.user().set("showViralInviteButton",h.get("showViralInviteButton")),this.showInviteCTA()&&(this.inviteView=new l({model:this.model},{environment:this.environment})),this.socialStreamsContainer=new a({model:this.model},{environment:this.environment}),this.dataTable=new f({model:this.model},{environment:this.environment}),this.sub_views.push(this.socialStreamsContainer),this.sub_views.push(this.header),this.sub_views.push(this.dataTable)),this.model.get("companyObject")&&(this.childLeadView=new d({model:this.model.get("companyObject"),is_child_view:!0},{environment:this.environment})))),this.is_child_view&&this.model.listenTo(this.model,"change",this.renderCompanyObject),this.dataTable&&(this.model.listenTo(this.model,"change:revenue",this.dataTable.update),this.model.listenTo(this.model,"change:employees",this.dataTable.update),this.model.listenTo(this.model,"change:state",this.dataTable.update),this.model.listenTo(this.model,"change:overview",this.dataTable.update),this.model.listenTo(this.model,"change:last_touch_date",this.dataTable.update))},d.prototype.renderCompanyObject=function(){if(this.model.get("company_name"))return this.attach()},d.prototype.showInviteCTA=function(){return this.environment.get("isCollapsed")?!1:this.environment.get("user")?this.environment.get("user").get("user_key")?this.environment.get("user").get("disableRequestUpdatedInfoButton")?this.environment.get("user").get("showViralInviteButton")==="network"?!1:!0:!1:!1:!1},d.prototype.render=function(){return this.header&&this.$el.append(this.header.render()),this.environment.get("is_user_profile")||(this.dataTable&&this.$el.append(this.dataTable.render()),(this.environment.user().get("use_salesforce")||this.environment.user().get("use_hscrm"))&&this.model.get("type")==="company"&&this.existingRecordsTable!=null&&this.$el.append(this.existingRecordsTable.render())),this.model.get("type")==="company"?(this.$el.append(this.contactsHeader.render()),this.$el.append(this.relatedCompaniesTable.render())):this.model.get("type")==="contact"&&(this.childLeadView&&(this.$el.append("<div class='child-company-container'>"),this.$el.find(".child-company-container").append(this.childLeadView.render().el)),this.inviteView&&this.$el.append(this.inviteView.render()),this.socialStreamsContainer?this.$el.append(this.socialStreamsContainer.render()):this.signalsActivitiesTable&&this.$el.append(this.signalsActivitiesTable.render())),this.is_child_view&&(this.$el.addClass("child-lead-view"),this.$el.hide()),this},d.prototype.unattach=function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v=this;n=function(e){var t;return(t=v.model)!=null&&t.off(null,null,e),e.undelegateEvents(),e.$el.removeData().unbind(),e.remove(),Backbone.View.prototype.remove.call(e)},o=this.sub_views;for(i=0,s=o.length;i<s;i++)r=o[i],n(r);this.childLeadView&&this.childLeadView.unattach();if(e=(u=this.model)!=null?u.get("companyObject"):void 0)e.removeRecords(),e.destroy(),(a=this.model)!=null&&a.set("companyObject",null);else if(t=(f=this.model)!=null?f.get("company_contacts"):void 0)t=null,(l=this.model)!=null&&l.set("company_contacts",null);(c=this.model)!=null&&c.removeRecords(),(h=this.model)!=null&&h.stopListening(),(p=this.model)!=null&&p.set("id",null),(d=this.model)!=null&&d.destroy(),n(this)},d.prototype.attach=function(){this.$el.fadeIn()},d.prototype.updateLeadStatus=function(){this.$el.addClass(this.model.get("status")).addClass("has-status").removeClass("no-status"),this.model.get("salesforce_error_message")&&this.$el.addClass("lead-status-error").addClass("has-status")},d.prototype.clickedViewRelatedCompanies=function(){t(".related-companies-list").is(":visible")?this.relatedCompaniesTable.scrollUp():this.relatedCompaniesTable.scrollDown()},d.prototype.clickedError=function(e){window.open(t(e.currentTarget).data("help-url"),"_blank")},d.prototype.expandCompanyView=function(e){this.$(".child-company-container").hasClass("expanded")?(this.$(".child-company-container").removeClass("expanded"),this.header.close()):(this.$(".child-company-container").addClass("expanded"),this.environment.trackAction('Sidekick: "Expanded Company View (vertical slider)"'),this.header.expand())},d}(Backbone.View)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};hubspot.define("sidekick.SidekickSidebar.views.mainview.login.LoginView",["jQuery","sidekick.SidekickSidebar.views.mainview.LeadView"],function(t,r){var i;return i=function(t){function r(){return this.clickedLoginWithGoogle=e(this.clickedLoginWithGoogle,this),this.clickedForgotPassword=e(this.clickedForgotPassword,this),this.clickedLogin=e(this.clickedLogin,this),this.checkLoginStatus=e(this.checkLoginStatus,this),r.__super__.constructor.apply(this,arguments)}return n(r,t),r.prototype.className="login-view",r.prototype.template=jade.templates.login_view,r.prototype.events={"click a.login-cta":"clickedLogin","click a.login-with-google-cta":"clickedLoginWithGoogle","click a.forgot-password-link":"clickedForgotPassword","submit form.login-form":"clickedLoginWithCreds"},r.prototype.initialize=function(e){return e==null&&(e={}),this.environment=e.environment,this.sub_views=[],this},r.prototype.render=function(){return this.$el.html(this.template({loginWithCredentialsUrl:this.environment.getWebappUrl("/mobile/login"),loginWithGoogleUrl:this.environment.getWebappUrl("/google/add/existing?referrer=inline-sidebar&next=%2Fgoogle%2Ffinished"),forgotPasswordUrl:this.environment.getWebappUrl("/password/forgot")})),this},r.prototype.checkLoginStatus=function(){var e,t,n,r,i=this;e=0,n=30,r=function(){return e+=1,e>n&&clearInterval(t),i.environment.user().retrieveUserData().then(function(){return clearInterval(t),i.environment.trackAction('Sidekick: "Detected Auth and Refreshed"'),i.environment.trigger("refreshAll")})},t=setInterval(r,1e4)},r.prototype.clickedLogin=function(e){e.preventDefault(),e.stopPropagation(),this.environment.trackAction('Sidekick: "Clicked Log In"'),this.$(".pre-login-container").animate({left:"-100%"},250),this.$(".login-form-container").animate({left:"0%"},250)},r.prototype.clickedForgotPassword=function(e){this.environment.trackAction('Sidekick: "Clicked Forgot Password"')},r.prototype.clickedLoginWithGoogle=function(e){var t,n,r,i,s,o=this;e.preventDefault(),e.stopPropagation(),s=function(){var e,t;if(n.location!=null&&((e=n.location.href)!=null?e.indexOf("/google/finished"):void 0)!==-1&&((t=n.location.href)!=null?t.indexOf("/_ah/login"):void 0)===-1)return n.close(),clearInterval(i),o.environment.trigger("refreshAll")},t=this.$(e.currentTarget).attr("href"),r="modal='yes',height=560,width=530",n=window.open(t,"_blank",r),i=setInterval(s,500)},r.prototype.clickedLoginWithCreds=function(e){var t,n,r,i,s=this;return e.preventDefault(),i=this.$(e.currentTarget).attr("action"),n=this.$(e.currentTarget).serialize(),r=function(e,t,n){s.environment.trackAction('Sidekick: "Logged in with Credentials"'),s.environment.trigger("refreshAll")},t=function(e,t,n){s.$("p.incorrect-creds").slideDown()},this.environment.postJSON({url:i,data:n,success:r,error:t})},r}(r)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};hubspot.define("sidekick.SidekickSidebar.views.shared.AddHubSpotRecordDetail",["jQuery"],function(t){var r;return r=function(r){function i(){return this.clickedCancel=e(this.clickedCancel,this),this.errorAddingLead=e(this.errorAddingLead,this),this.addedLead=e(this.addedLead,this),this.postRecord=e(this.postRecord,this),this.clickedSaveRecord=e(this.clickedSaveRecord,this),this.viewedCRMRecord=e(this.viewedCRMRecord,this),this.clickedRow=e(this.clickedRow,this),this.scrollDown=e(this.scrollDown,this),this.scrollUp=e(this.scrollUp,this),this.hide=e(this.hide,this),this.updateLeadStatus=e(this.updateLeadStatus,this),this.render=e(this.render,this),i.__super__.constructor.apply(this,arguments)}return n(i,r),i.prototype.className="edit-lead-detail",i.prototype.template=jade.templates.add_hubspot_record_detail_table,i.prototype.events={"click .data-row":"clickedRow","click a.save-record":"clickedSaveRecord","submit form.new-hubspot-record":"postRecord","click a.cancel":"clickedCancel","click a.view-in-crm":"viewedCRMRecord"},i.prototype.initialize=function(e,t){this.environment=t.environment,this.type=e.type,this.location=e.location,this.model.get("dataRetrieved")||this.model.retrieveData(),this.model.listenTo(this.model,"change",this.render),this.form_visible=!1,this.data_table_visible=!0,this.animating=!1},i.prototype.render=function(){var e,n,r,i,s,o,u,a,f,l,c,h,p,d;if(this.animating)return;o=!1;if(this.$el.is(":visible")||this.form_visible)o=!0;return this.type==="contact"?(e=(a=this.model.get("companyObject"))!=null?a.get("company_name"):void 0,e||(e=this.model.get("company_name")),e||(e=this.model.get("domain")),r=this.model.get("existing_records"),this.model.get("companyObject")?this.companies=(f=this.model.get("companyObject"))!=null?(l=f.get("existing_records"))!=null?l.get("object_primary").toJSON():void 0:void 0:(u=(c=this.model.get("existing_records"))!=null?(h=c.get("object_primary"))!=null?h.toJSON():void 0:void 0,u&&u.length>0&&(this.companies=u)),(!this.companies||this.companies.length<1)&&this.model.get("new_company_record")&&(this.companies=[this.model.get("new_company_record")]),n=this.environment.getWebappUrl("/insights/contacts/create.json"),i=[{property:"hubspot_owner_id",value:(p=this.environment.user().get("hubspot_owner"))!=null?p.ownerId:void 0},{property:"city",value:this.model.get("city")},{property:"country",value:this.model.get("country")},{property:"address",value:this.model.get("address")},{property:"zip",value:this.model.get("zipcode")},{property:"state",value:this.model.get("state")},{property:"twitterhandle",value:this.model.get("twitter_name")}],s=[{property:"firstname",label:"First Name",value:this.model.get("firstName")},{property:"lastname",label:"Last Name",value:this.model.get("lastName")},{property:"jobtitle",label:"Title",value:this.model.get("title")},{property:"website",label:"Website",value:this.model.get("domain")},{property:"email",label:"Email",value:this.model.get("email")},{property:"phone",label:"Phone",value:this.model.get("phone_number")}]):(e=this.model.get("company_name"),n=this.environment.getWebappUrl("/insights/companies/create.json"),i=[{property:"hubspot_owner_id",value:(d=this.environment.user().get("hubspot_owner"))!=null?d.ownerId:void 0},{property:"city",value:this.model.get("city")},{property:"country",value:this.model.get("country")},{property:"address",value:this.model.get("address")},{property:"zip",value:this.model.get("zipcode")},{property:"state",value:this.model.get("state")},{property:"description",value:this.model.get("overview")},{property:"linkedin_company_page",value:this.model.get("linkedin_url")},{property:"facebook_company_page",value:this.model.get("facebook_url")},{property:"twitterhandle",value:this.model.get("twitter_name")},{property:"domain",value:this.model.get("domain")}],s=[{property:"website",label:"Website",value:this.model.get("domain")},{property:"phone",label:"Phone",value:this.model.get("phone_number")}]),this.$el.html(this.template({statuses:this.environment.get("hubspotStatuses"),lifecycle_stages:this.environment.get("hubspotLifecycleStages"),hubspot_id:this.model.get("id"),company:e,email:this.model.get("email"),domain:this.model.get("domain"),companies:this.companies,create_url:n,type:this.type[0].toUpperCase()+this.type.slice(1),hscrm_error_message:this.model.get("hscrm_error_message"),valid_hidden_properties:i,valid_visible_properties:s})),this.form_visible=!0,t("input.data-field[prefilled]",this.$el).each(function(){return t(this).val(t(this).attr("placeholder"))}),o||this.$el.hide(),this.data_table_visible||this.$(".data-table").hide(),this.updateLeadStatus(),this.$el},i.prototype.updateLeadStatus=function(){this.model.get("status")==="added-record"&&(this.$("a.save-record").hide(),this.$("a.cancel").hide(),this.$("a.button.view-in-crm").removeClass("hide"),this.$("a.button.view-in-crm").attr("href",this.model.getHubspotUrl()),this.$("a.button.view-in-crm").data("url",this.model.getHubspotUrl()),this.$("a.banner.existing").attr("href",this.model.getHubspotUrl()),this.$("a.banner.existing").data("url",this.model.getHubspotUrl()));if(this.model.get("status")==="error-adding-lead")return this.$("a.save-record").hide(),this.$("a.cancel").hide(),this.$(".notice.error").show()},i.prototype.hide=function(){this.$el.hide()},i.prototype.scrollUp=function(){this.$el.slideUp()},i.prototype.scrollDown=function(){t(".highlight").removeClass("highlight"),t(".edit-lead-detail").slideUp(),this.$el.is(":hidden")&&(this.$el.prev().addClass("highlight"),this.$el.slideDown(),this.render())},i.prototype.clickedRow=function(e){t(e.target).hasClass("data-field")||t(e.currentTarget).find("input.data-field").focus().select()},i.prototype.viewedCRMRecord=function(){this.environment.trackAction('Sidekick: "Viewed CRM Record"',{type:this.type,location_in_sidebar:this.location})},i.prototype.clickedSaveRecord=function(e){e&&(e.preventDefault(),e.stopPropagation()),this.add_lead_cta_state="adding",this.$("a.banner-button").addClass("adding"),this.$(".save").hide(),this.$(".adding-success").hide().delay(50).fadeIn(),typeof console!="undefined"&&console!==null&&console.log(this.$("form.new-hubspot-record")),this.$("form.new-hubspot-record").submit(),this.environment.trackAction('Sidekick: "Added CRM Record"',{type:this.type,location_in_sidebar:this.location})},i.prototype.postRecord=function(e){var t,n,r,i,s,o,u,a,f,l,c=this;e&&(e.preventDefault(),e.stopPropagation()),r=this,o=this.$("form.new-hubspot-record").serializeArray();if(this.type==="contact"){this.model.get("companyObject")?t=this.model.get("companyObject"):t=this.model;for(i=f=0,l=o.length;f<l;i=++f)s=o[i],s.name==="email"&&s.value.length<1?delete o[i]:(s.property=s.name,this.companies&&s.name==="company"&&(s.value==="NEW"?t.get("company_name")?s.value=t.get("company_name"):s.value=t.get("domain"):(n=this.companies[s.value]["company-id"],n||(n=this.companies[s.value].companyId),s.value=this.companies[s.value].company_name,o.push({property:"associatedcompanyid",value:n}))),delete s.name)}return _.each(o,function(e){return e.source="SIDEKICK",e[c.model.get("source_id_name")]=c.environment.user().get("email")}),o=o.filter(function(){return!0}),typeof console!="undefined"&&console!==null&&console.debug(o),o=JSON.stringify({properties:o}),a=this.$("form.new-hubspot-record").attr("action"),u=function(e,t,n){if(e&&"status"in e&&e.status==="error")return r.errorAddingLead(e.message,a,o);if(e)return r.addedLead(e)},this.environment.postJSON({url:a,data:o,success:u})},i.prototype.addedLead=function(e){this.type==="contact"?this.model.set("id","contacts/"+e.vid):(this.model.set("id","companies/"+e.companyId),this.model.set("hubspot_company_id",e.companyId),e.company_name=this.model.get("company_name"),this.model.set("new_company_record",e)),this.model.set("status","added-record"),this.data_table_visible=!1,this.$(".data-table").slideUp()},i.prototype.errorAddingLead=function(e,n,r){var i;try{e=t.parseJSON(e);if(e.error==="CONTACT_EXISTS")return this.addedLead(e.property);i=e.msg}catch(s){Raven.captureMessage("HSCRM ERROR: "+JSON.stringify(e),{extra:{url:n,form_data:r}}),i=e}throw this.model.set("hscrm_error_message",i),this.model.set("status","error-adding-lead"),this.data_table_visible=!1,this.$(".data-table").slideUp(),new Error("ERROR: ["+i+"]")},i.prototype.clickedCancel=function(){this.scrollUp()},i}(Backbone.View)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};hubspot.define("sidekick.SidekickSidebar.views.shared.AddLeadDetail",["jQuery"],function(t){var r;return r=function(r){function i(){return this.viewedLeadRecord=e(this.viewedLeadRecord,this),this.clickedCancel=e(this.clickedCancel,this),this.errorAddingLead=e(this.errorAddingLead,this),this.addedLead=e(this.addedLead,this),this.postRecord=e(this.postRecord,this),this.clickedSaveRecord=e(this.clickedSaveRecord,this),this.clickedRow=e(this.clickedRow,this),this.scrollDown=e(this.scrollDown,this),this.scrollUp=e(this.scrollUp,this),this.hide=e(this.hide,this),this.updateLeadStatus=e(this.updateLeadStatus,this),this.render=e(this.render,this),i.__super__.constructor.apply(this,arguments)}return n(i,r),i.prototype.className="edit-lead-detail",i.prototype.template=jade.templates.add_lead_detail_table,i.prototype.events={"click .data-row":"clickedRow","click a.save-record":"clickedSaveRecord","submit form.new-sfdc-lead":"postRecord","click a.cancel":"clickedCancel","click .existing-record-link":"viewedLeadRecord"},i.prototype.initialize=function(e,t){this.environment=t.environment,this.type=e.type,this.location=e.location,this.model.get("dataRetrieved")||this.model.retrieveData(),this.model.listenTo(this.model,"change:add_lead_state",this.render),this.model.listenTo(this.model,"change:status",this.render),this.form_visible=!1,this.animating=!1},i.prototype.render=function(){var e;if(this.animating)return;return e=!1,this.$el.is(":visible")&&(e=!0),this.$el.html(this.template({salesforce_id:this.model.get("salesforce_id"),input_statuses:this.model.get("add_lead_state"),first_name:this.model.get("firstName"),last_name:this.model.get("lastName"),title:this.model.get("title"),company:this.model.get("company_name"),phone:this.model.get("phone_number"),email:this.model.get("email"),overview:this.model.get("overview"),domain:this.model.get("domain"),address1:this.model.get("address1"),city:this.model.get("city"),state:this.model.get("state"),country:this.model.get("country"),employees:this.model.get("employees"),zipcode:this.model.get("zipcode"),salesforce_error_message:this.model.get("salesforce_error_message"),createLeadUrl:this.environment.getWebappUrl("/contacts/salesforce/leads/new.json")})),t("input.data-field[prefilled]",this.$el).each(function(){return t(this).val(t(this).attr("placeholder"))}),this.model.get("add_lead_state")||(this.$("a.banner-button").addClass("searching"),this.$("a.banner-button.searching-status").show(),this.$("a.banner-button.default").hide()),e||this.$el.hide(),this.updateLeadStatus(),this.$el},i.prototype.updateLeadStatus=function(){this.model.get("status")==="added-record"&&(this.$("a.save-record").hide(),this.$("a.cancel").hide(),this.$(".notice.success").show(),this.$("a.existing-record-link").attr("href",this.model.get("salesforce_url")),this.$("a.existing-record-link").data("url",this.model.get("salesforce_url")),this.$("a.banner.existing").attr("href",this.model.get("salesforce_url")),this.$("a.banner.existing").data("url",this.model.get("salesforce_url")));if(this.model.get("status")==="error-adding-lead")return this.$("a.save-record").hide(),this.$("a.cancel").hide(),this.$(".notice.error").show()},i.prototype.hide=function(){this.$el.hide()},i.prototype.scrollUp=function(){this.$el.slideUp()},i.prototype.scrollDown=function(){t(".highlight").removeClass("highlight"),t(".edit-lead-detail").slideUp(),this.$el.is(":hidden")&&(this.$el.prev().addClass("highlight"),this.$el.slideDown(),this.render())},i.prototype.clickedRow=function(e){t(e.target).hasClass("data-field")||t(e.currentTarget).find("input.data-field").focus().select()},i.prototype.clickedSaveRecord=function(e){e&&(e.preventDefault(),e.stopPropagation()),this.environment.trackAction('Sidekick: "Added Lead Record"',{type:this.type,location_in_sidebar:this.location}),this.add_lead_cta_state="adding",this.$("a.banner-button").addClass("adding"),this.$(".save").hide(),this.$(".adding-success").hide().delay(50).fadeIn(),this.postRecord()},i.prototype.postRecord=function(e){var t,n,r,i=this;return e&&(e.preventDefault(),e.stopPropagation()),r=this.$("form.new-sfdc-lead").attr("action"),t=this.$("form.new-sfdc-lead").serialize(),n=function(e,n,s){return typeof console!="undefined"&&console!==null&&console.log(e),"error"in e?(i.errorAddingLead(e.error),Raven.captureMessage("SFDC ERROR: "+e.error,{extra:{url:r,form_data:JSON.stringify(t)}})):i.addedLead(e.lead_url)},this.environment.postJSON({url:r,data:t,success:n})},i.prototype.addedLead=function(e){this.model.set("salesforce_url",e),this.model.set("status","added-record"),this.$(".data-table").slideUp()},i.prototype.errorAddingLead=function(e){var n;try{e=t.parseJSON(e),n=e[0].message}catch(r){Raven.captureMessage("SFDC PARSE ERROR: "+JSON.stringify(e)),n=e}throw this.model.set("salesforce_error_message",n),this.model.set("status","error-adding-lead"),this.$(".data-table").slideUp(),this.$el.prev(".company-contact").removeClass("highlight"),new Error("ERROR: ["+n+"]")},i.prototype.clickedCancel=function(){this.scrollUp()},i.prototype.viewedLeadRecord=function(){this.environment.trackAction('Sidekick: "Viewed Lead Record"',{type:this.type,location_in_sidebar:this.location})},i}(Backbone.View)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};hubspot.define("sidekick.SidekickSidebar.views.shared.Header",["jQuery"],function(t){var r;return r=function(r){function i(){return this.close=e(this.close,this),this.expand=e(this.expand,this),this.update=e(this.update,this),this.render=e(this.render,this),i.__super__.constructor.apply(this,arguments)}return n(i,r),i.prototype.className="header",i.prototype.company_template=jade.templates.header_company,i.prototype.contact_template=jade.templates.header_contact,i.prototype.initialize=function(e){this.model.listenTo(this.model,"change:company_name",this.update),this.model.listenTo(this.model,"change:name",this.update),this.model.listenTo(this.model,"change:company_data_status",this.update),this.model.listenTo(this.model,"change:title",this.update),this.is_child_view=e.is_child_view},i.prototype.render=function(){var e;return this.model.get("type")==="company"?(this.model.get("company_name")&&this.model.get("company_data_status")!=="error"?e=this.model.get("company_name"):e=this.model.get("domain"),this.$el.html(this.company_template({company_name:e,domain:this.model.get("domain"),is_child_view:this.is_child_view}))):(this.$el.html(this.contact_template({name:this.model.get("name"),email:this.model.get("email"),avatar_url:this.model.get("avatar_url"),company_name:this.model.get("company_name"),title:this.model.get("title"),location:this.model.get("location")})),this.$el.addClass("contact-header")),this.$("img.company-avatar").one("error",function(){return this.src="/static/img/default_avatar.png"}),this.$("img.header-contact-avatar").one("error",function(){return this.src="/static/img/default_avatar.png"}),this.model.get("type")==="contact"&&this.update(),this.$el},i.prototype.update=function(){if(this.model.get("type")!=="contact")return this.render();this.model.get("company_name")&&this.model.get("title")?this.$(".secondary-name").text(""+this.model.get("company_name")+", "+this.model.get("title")):this.model.get("title")?this.$(".secondary-name").text(""+this.model.get("title")):this.model.get("company_name")?this.$(".secondary-name").text(""+this.model.get("company_name")):this.model.get("name")&&this.model.get("email")&&this.$(".secondary-name").text(""+this.model.get("email")),this.model.get("name")?this.$(".primary-name").html(this.model.get("name")):this.$(".primary-name").text(this.model.get("email"))},i.prototype.expand=function(){t(".expand-container i").removeClass("icon-double-angle-up").addClass("icon-double-angle-down")},i.prototype.close=function(){t(".expand-container i").removeClass("icon-double-angle-down").addClass("icon-double-angle-up")},i}(Backbone.View)})}.call(this);